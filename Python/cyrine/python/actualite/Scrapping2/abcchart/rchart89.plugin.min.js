/*! rChart - 8.80VN - 26/01/2022
* Copyright (c) 2016-2021 - Rodolphe Vialles */
function isNumberKey(n) {
    var t = n.which ? n.which : n.keyCode;
    return t == 44 || t == 46 ? !0 : t > 31 && (t < 48 || t > 57) ? !1 : !0
}
function isIntNumberKey(n) {
    var t = n.which ? n.which : n.keyCode;
    return t > 31 && (t < 48 || t > 57) ? !1 : !0
}
function isNumberLetterKey(n) {
    var t = n.which ? n.which : n.keyCode;
    return t == 44 || t == 46 || t == 45 ? !0 : t > 31 && (t < 48 || t > 57) ? !1 : !0
}
function gs(n, t) {
    switch (t) {
    case "c":
    case "o":
    case "h":
    case "l":
    case "v1":
        return n[t];
    case "m":
        return (n.h + n.l) / 2;
    case "m2":
        return (n.h + n.l + n.c) / 3;
    case "m3":
        return (n.o + n.h + n.l + n.c) / 4;
    default:
        return n.c
    }
}
var RODTL, mydragg, RODTA;
Math.log10 = Math.log10 || function(n) {
    return Math.log(n) / Math.LN10
}
,
function(n) {
    var i, t, r;
    !function(u, f) {
        function ri(n, t) {
            return t || ""
        }
        function w(n) {
            return "[object Function]" === vt.call(n)
        }
        function b(n) {
            return "[object Array]" === vt.call(n)
        }
        function h(n, t) {
            var i;
            if (n)
                for (i = 0; i < n.length && (!n[i] || !t(n[i], i, n)); i += 1)
                    ;
        }
        function st(n, t) {
            var i;
            if (n)
                for (i = n.length - 1; -1 < i && (!n[i] || !t(n[i], i, n)); i -= 1)
                    ;
        }
        function s(n, t) {
            return ti.call(n, t)
        }
        function o(n, t) {
            return s(n, t) && n[t]
        }
        function y(n, t) {
            for (var i in n)
                if (s(n, i) && t(n[i], i))
                    break
        }
        function ht(n, t, i, r) {
            return t && y(t, function(t, u) {
                !i && s(n, u) || (!r || "object" != typeof t || !t || b(t) || w(t) || t instanceof RegExp ? n[u] = t : (n[u] || (n[u] = {}),
                ht(n[u], t, i, r)))
            }),
            n
        }
        function c(n, t) {
            return function() {
                return t.apply(n, arguments)
            }
        }
        function ct() {
            return document.getElementsByTagName("script")
        }
        function bt(n) {
            throw n;
        }
        function kt(n) {
            if (!n)
                return n;
            var t = u;
            return h(n.split("."), function(n) {
                t = t[n]
            }),
            t
        }
        function p(n, t, i, r) {
            var u = new Error(t + "\nhttps://requirejs.org/docs/errors.html#" + n);
            return u.requireType = n,
            u.requireModules = r,
            i && (u.originalError = i),
            u
        }
        function ui(n) {
            function nt(n, t, r) {
                var s, h, f, c, l, a, e, w, v, b, u = t && t.split("/"), y = i.map, p = y && y["*"];
                if (n && (a = (n = n.split("/")).length - 1,
                i.nodeIdCompat && it.test(n[a]) && (n[a] = n[a].replace(it, "")),
                "." === n[0].charAt(0) && u && (n = u.slice(0, u.length - 1).concat(n)),
                function(n) {
                    for (var i, t = 0; t < n.length; t++)
                        if ("." === (i = n[t]))
                            n.splice(t, 1),
                            t -= 1;
                        else if (".." === i) {
                            if (0 === t || 1 === t && ".." === n[2] || ".." === n[t - 1])
                                continue;
                            0 < t && (n.splice(t - 1, 2),
                            t -= 2)
                        }
                }(n),
                n = n.join("/")),
                r && y && (u || p)) {
                    n: for (f = (h = n.split("/")).length; 0 < f; f -= 1) {
                        if (l = h.slice(0, f).join("/"),
                        u)
                            for (c = u.length; 0 < c; c -= 1)
                                if ((s = o(y, u.slice(0, c).join("/"))) && (s = o(s, l))) {
                                    e = s;
                                    w = f;
                                    break n
                                }
                        !v && p && o(p, l) && (v = o(p, l),
                        b = f)
                    }
                    !e && v && (e = v,
                    w = b);
                    e && (h.splice(0, w, e),
                    n = h.join("/"))
                }
                return o(i.pkgs, n) || n
            }
            function oi(n) {
                a && h(ct(), function(i) {
                    if (i.getAttribute("data-requiremodule") === n && i.getAttribute("data-requirecontext") === t.contextName)
                        return i.parentNode.removeChild(i),
                        !0
                })
            }
            function gt(n) {
                var r = o(i.paths, n);
                if (r && b(r) && 1 < r.length)
                    return r.shift(),
                    t.require.undef(n),
                    t.makeRequire(null, {
                        skipMap: !0
                    })([n]),
                    !0
            }
            function si(n) {
                var i, t = n ? n.indexOf("!") : -1;
                return -1 < t && (i = n.substring(0, t),
                n = n.substring(t + 1, n.length)),
                [i, n]
            }
            function v(n, i, r, u) {
                var a, s, v, h, f = null, c = i ? i.name : null, p = n, y = !0, e = "";
                return n || (y = !1,
                n = "_@r" + (ai += 1)),
                f = (h = si(n))[0],
                n = h[1],
                f && (f = nt(f, c, u),
                s = o(l, f)),
                n && (f ? e = r ? n : s && s.normalize ? s.normalize(n, function(n) {
                    return nt(n, c, u)
                }) : -1 === n.indexOf("!") ? nt(n, c, u) : n : (f = (h = si(e = nt(n, c, u)))[0],
                e = h[1],
                r = !0,
                a = t.nameToUrl(e))),
                {
                    prefix: f,
                    name: e,
                    parentMap: i,
                    unnormalized: !!(v = !f || s || r ? "" : "_unnormalized" + (vi += 1)),
                    url: a,
                    originalName: p,
                    isDefine: y,
                    id: (f ? f + "!" + e : e) + v
                }
            }
            function ft(n) {
                var u = n.id
                  , i = o(r, u);
                return i || (i = r[u] = new t.Module(n)),
                i
            }
            function et(n, t, i) {
                var f = n.id
                  , u = o(r, f);
                !s(l, f) || u && !u.defineEmitComplete ? (u = ft(n)).error && "error" === t ? i(u.error) : u.on(t, i) : "defined" === t && i(l[f])
            }
            function k(n, t) {
                var u = n.requireModules
                  , i = !1;
                t ? t(n) : (h(u, function(t) {
                    var u = o(r, t);
                    u && (u.error = n,
                    u.events.error && (i = !0,
                    u.emit("error", n)))
                }),
                i || e.onError(n))
            }
            function ti() {
                rt.length && (h(rt, function(n) {
                    var i = n[0];
                    "string" == typeof i && (t.defQueueMap[i] = !0);
                    d.push(n)
                }),
                rt = [])
            }
            function ri(n) {
                delete r[n];
                delete vt[n]
            }
            function ui() {
                var s, c, v = 1e3 * i.waitSeconds, u = v && t.startTime + v < (new Date).getTime(), n = [], w = [], e = !1, b = !0;
                if (!lt) {
                    if (lt = !0,
                    y(vt, function(t) {
                        var i = t.map
                          , r = i.id;
                        if (t.enabled && (i.isDefine || w.push(t),
                        !t.error))
                            if (!t.inited && u)
                                gt(r) ? e = c = !0 : (n.push(r),
                                oi(r));
                            else if (!t.inited && t.fetched && i.isDefine && (e = !0,
                            !i.prefix))
                                return b = !1
                    }),
                    u && n.length)
                        return (s = p("timeout", "Load timeout for modules: " + n, null, n)).contextName = t.contextName,
                        k(s);
                    b && h(w, function(n) {
                        !function t(n, i, u) {
                            var f = n.map.id;
                            n.error ? n.emit("error", n.error) : (i[f] = !0,
                            h(n.depMaps, function(f, e) {
                                var s = f.id
                                  , h = o(r, s);
                                !h || n.depMatched[e] || u[s] || (o(i, s) ? (n.defineDep(e, l[s]),
                                n.check()) : t(h, i, u))
                            }),
                            u[f] = !0)
                        }(n, {}, {})
                    });
                    u && !c || !e || !a && !yt || at || (at = f(function() {
                        at = 0;
                        ui()
                    }, 50));
                    lt = !1
                }
            }
            function fi(n) {
                s(l, n[0]) || ft(v(n[0], null, !0)).init(n[1], n[2])
            }
            function hi(n, t, i, r) {
                n.detachEvent && !wt ? r && n.detachEvent(r, t) : n.removeEventListener(i, t, !1)
            }
            function ci(n) {
                var i = n.currentTarget || n.srcElement;
                return hi(i, t.onScriptLoad, "load", "onreadystatechange"),
                hi(i, t.onScriptError, "error"),
                {
                    node: i,
                    id: i && i.getAttribute("data-requiremodule")
                }
            }
            function li() {
                var n;
                for (ti(); d.length; ) {
                    if (null === (n = d.shift())[0])
                        return k(p("mismatch", "Mismatched anonymous define() module: " + n[n.length - 1]));
                    fi(n)
                }
                t.defQueueMap = {}
            }
            var lt, ei, t, ut, at, i = {
                waitSeconds: 7,
                baseUrl: "./",
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            }, r = {}, vt = {}, pt = {}, d = [], l = {}, ot = {}, dt = {}, ai = 1, vi = 1;
            return ut = {
                require: function(n) {
                    return n.require ? n.require : n.require = t.makeRequire(n.map)
                },
                exports: function(n) {
                    if (n.usingExports = !0,
                    n.map.isDefine)
                        return n.exports ? l[n.map.id] = n.exports : n.exports = l[n.map.id] = {}
                },
                module: function(n) {
                    return n.module ? n.module : n.module = {
                        id: n.map.id,
                        uri: n.map.url,
                        config: function() {
                            return o(i.config, n.map.id) || {}
                        },
                        exports: n.exports || (n.exports = {})
                    }
                }
            },
            (ei = function(n) {
                this.events = o(pt, n.id) || {};
                this.map = n;
                this.shim = o(i.shim, n.id);
                this.depExports = [];
                this.depMaps = [];
                this.depMatched = [];
                this.pluginMaps = {};
                this.depCount = 0
            }
            ).prototype = {
                init: function(n, t, i, r) {
                    r = r || {};
                    this.inited || (this.factory = t,
                    i ? this.on("error", i) : this.events.error && (i = c(this, function(n) {
                        this.emit("error", n)
                    })),
                    this.depMaps = n && n.slice(0),
                    this.errback = i,
                    this.inited = !0,
                    this.ignore = r.ignore,
                    r.enabled || this.enabled ? this.enable() : this.check())
                },
                defineDep: function(n, t) {
                    this.depMatched[n] || (this.depMatched[n] = !0,
                    this.depCount -= 1,
                    this.depExports[n] = t)
                },
                fetch: function() {
                    if (!this.fetched) {
                        this.fetched = !0;
                        t.startTime = (new Date).getTime();
                        var n = this.map;
                        if (!this.shim)
                            return n.prefix ? this.callPlugin() : this.load();
                        t.makeRequire(this.map, {
                            enableBuildCallback: !0
                        })(this.shim.deps || [], c(this, function() {
                            return n.prefix ? this.callPlugin() : this.load()
                        }))
                    }
                },
                load: function() {
                    var n = this.map.url;
                    ot[n] || (ot[n] = !0,
                    t.load(this.map.id, n))
                },
                check: function() {
                    var o;
                    if (this.enabled && !this.enabling) {
                        var i, f, r = this.map.id, c = this.depExports, n = this.exports, u = this.factory;
                        if (this.inited) {
                            if (this.error)
                                this.emit("error", this.error);
                            else if (!this.defining) {
                                if (this.defining = !0,
                                this.depCount < 1 && !this.defined) {
                                    if (w(u)) {
                                        if (this.events.error && this.map.isDefine || e.onError !== bt)
                                            try {
                                                n = t.execCb(r, u, c, n)
                                            } catch (f) {
                                                i = f
                                            }
                                        else
                                            n = t.execCb(r, u, c, n);
                                        if (this.map.isDefine && void 0 === n && ((f = this.module) ? n = f.exports : this.usingExports && (n = this.exports)),
                                        i)
                                            return i.requireMap = this.map,
                                            i.requireModules = this.map.isDefine ? [this.map.id] : null,
                                            i.requireType = this.map.isDefine ? "define" : "require",
                                            k(this.error = i)
                                    } else
                                        n = u;
                                    (this.exports = n,
                                    this.map.isDefine && !this.ignore && (l[r] = n,
                                    e.onResourceLoad)) && (o = [],
                                    h(this.depMaps, function(n) {
                                        o.push(n.normalizedMap || n)
                                    }),
                                    e.onResourceLoad(t, this.map, o));
                                    ri(r);
                                    this.defined = !0
                                }
                                this.defining = !1;
                                this.defined && !this.defineEmitted && (this.defineEmitted = !0,
                                this.emit("defined", this.exports),
                                this.defineEmitComplete = !0)
                            }
                        } else
                            s(t.defQueueMap, r) || this.fetch()
                    }
                },
                callPlugin: function() {
                    var n = this.map
                      , u = n.id
                      , f = v(n.prefix);
                    this.depMaps.push(f);
                    et(f, "defined", c(this, function(f) {
                        var h, l, a, b = o(dt, this.map.id), w = this.map.name, g = this.map.parentMap ? this.map.parentMap.name : null, d = t.makeRequire(n.parentMap, {
                            enableBuildCallback: !0
                        });
                        return this.map.unnormalized ? (f.normalize && (w = f.normalize(w, function(n) {
                            return nt(n, g, !0)
                        }) || ""),
                        et(l = v(n.prefix + "!" + w, this.map.parentMap, !0), "defined", c(this, function(n) {
                            this.map.normalizedMap = l;
                            this.init([], function() {
                                return n
                            }, null, {
                                enabled: !0,
                                ignore: !0
                            })
                        })),
                        void ((a = o(r, l.id)) && (this.depMaps.push(l),
                        this.events.error && a.on("error", c(this, function(n) {
                            this.emit("error", n)
                        })),
                        a.enable()))) : b ? (this.map.url = t.nameToUrl(b),
                        void this.load()) : ((h = c(this, function(n) {
                            this.init([], function() {
                                return n
                            }, null, {
                                enabled: !0
                            })
                        })).error = c(this, function(n) {
                            this.inited = !0;
                            (this.error = n).requireModules = [u];
                            y(r, function(n) {
                                0 === n.map.id.indexOf(u + "_unnormalized") && ri(n.map.id)
                            });
                            k(n)
                        }),
                        h.fromText = c(this, function(r, f) {
                            var o = n.name
                              , c = v(o)
                              , l = tt;
                            f && (r = f);
                            l && (tt = !1);
                            ft(c);
                            s(i.config, u) && (i.config[o] = i.config[u]);
                            try {
                                e.exec(r)
                            } catch (r) {
                                return k(p("fromtexteval", "fromText eval for " + u + " failed: " + r, r, [u]))
                            }
                            l && (tt = !0);
                            this.depMaps.push(c);
                            t.completeLoad(o);
                            d([o], h)
                        }),
                        void f.load(n.name, d, h, i))
                    }));
                    t.enable(f, this);
                    this.pluginMaps[f.id] = f
                },
                enable: function() {
                    (vt[this.map.id] = this).enabled = !0;
                    this.enabling = !0;
                    h(this.depMaps, c(this, function(n, i) {
                        var u, f, e;
                        if ("string" == typeof n) {
                            if (n = v(n, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap),
                            this.depMaps[i] = n,
                            e = o(ut, n.id))
                                return void (this.depExports[i] = e(this));
                            this.depCount += 1;
                            et(n, "defined", c(this, function(n) {
                                this.undefed || (this.defineDep(i, n),
                                this.check())
                            }));
                            this.errback ? et(n, "error", c(this, this.errback)) : this.events.error && et(n, "error", c(this, function(n) {
                                this.emit("error", n)
                            }))
                        }
                        u = n.id;
                        f = r[u];
                        s(ut, u) || !f || f.enabled || t.enable(n, this)
                    }));
                    y(this.pluginMaps, c(this, function(n) {
                        var i = o(r, n.id);
                        i && !i.enabled && t.enable(n, this)
                    }));
                    this.enabling = !1;
                    this.check()
                },
                on: function(n, t) {
                    var i = this.events[n];
                    i || (i = this.events[n] = []);
                    i.push(t)
                },
                emit: function(n, t) {
                    h(this.events[n], function(n) {
                        n(t)
                    });
                    "error" === n && delete this.events[n]
                }
            },
            (t = {
                config: i,
                contextName: n,
                registry: r,
                defined: l,
                urlFetched: ot,
                defQueue: d,
                defQueueMap: {},
                Module: ei,
                makeModuleMap: v,
                nextTick: e.nextTick,
                onError: k,
                configure: function(n) {
                    var f, u, e;
                    (n.baseUrl && "/" !== n.baseUrl.charAt(n.baseUrl.length - 1) && (n.baseUrl += "/"),
                    "string" == typeof n.urlArgs) && (f = n.urlArgs,
                    n.urlArgs = function(n, t) {
                        return (-1 === t.indexOf("?") ? "?" : "&") + f
                    }
                    );
                    u = i.shim;
                    e = {
                        paths: !0,
                        bundles: !0,
                        config: !0,
                        map: !0
                    };
                    y(n, function(n, t) {
                        e[t] ? (i[t] || (i[t] = {}),
                        ht(i[t], n, !0, !0)) : i[t] = n
                    });
                    n.bundles && y(n.bundles, function(n, t) {
                        h(n, function(n) {
                            n !== t && (dt[n] = t)
                        })
                    });
                    n.shim && (y(n.shim, function(n, i) {
                        b(n) && (n = {
                            deps: n
                        });
                        !n.exports && !n.init || n.exportsFn || (n.exportsFn = t.makeShimExports(n));
                        u[i] = n
                    }),
                    i.shim = u);
                    n.packages && h(n.packages, function(n) {
                        var t;
                        t = (n = "string" == typeof n ? {
                            name: n
                        } : n).name;
                        n.location && (i.paths[t] = n.location);
                        i.pkgs[t] = n.name + "/" + (n.main || "main").replace(ni, "").replace(it, "")
                    });
                    y(r, function(n, t) {
                        n.inited || n.map.unnormalized || (n.map = v(t, null, !0))
                    });
                    (n.deps || n.callback) && t.require(n.deps || [], n.callback)
                },
                makeShimExports: function(n) {
                    return function() {
                        var t;
                        return n.init && (t = n.init.apply(u, arguments)),
                        t || n.exports && kt(n.exports)
                    }
                },
                makeRequire: function(i, u) {
                    function f(o, h, c) {
                        var a, y;
                        return u.enableBuildCallback && h && w(h) && (h.__requireJsBuild = !0),
                        "string" == typeof o ? w(h) ? k(p("requireargs", "Invalid require call"), c) : i && s(ut, o) ? ut[o](r[i.id]) : e.get ? e.get(t, o, i, f) : (a = v(o, i, !1, !0).id,
                        s(l, a) ? l[a] : k(p("notloaded", 'Module name "' + a + '" has not been loaded yet for context: ' + n + (i ? "" : ". Use require([])")))) : (li(),
                        t.nextTick(function() {
                            li();
                            (y = ft(v(null, i))).skipMap = u.skipMap;
                            y.init(o, h, c, {
                                enabled: !0
                            });
                            ui()
                        }),
                        f)
                    }
                    return u = u || {},
                    ht(f, {
                        isBrowser: a,
                        toUrl: function(n) {
                            var u, r = n.lastIndexOf("."), f = n.split("/")[0];
                            return -1 !== r && (!("." === f || ".." === f) || 1 < r) && (u = n.substring(r, n.length),
                            n = n.substring(0, r)),
                            t.nameToUrl(nt(n, i && i.id, !0), u, !0)
                        },
                        defined: function(n) {
                            return s(l, v(n, i, !1, !0).id)
                        },
                        specified: function(n) {
                            return n = v(n, i, !1, !0).id,
                            s(l, n) || s(r, n)
                        }
                    }),
                    i || (f.undef = function(n) {
                        ti();
                        var f = v(n, i, !0)
                          , u = o(r, n);
                        u.undefed = !0;
                        oi(n);
                        delete l[n];
                        delete ot[f.url];
                        delete pt[n];
                        st(d, function(t, i) {
                            t[0] === n && d.splice(i, 1)
                        });
                        delete t.defQueueMap[n];
                        u && (u.events.defined && (pt[n] = u.events),
                        ri(n))
                    }
                    ),
                    f
                },
                enable: function(n) {
                    o(r, n.id) && ft(n).enable()
                },
                completeLoad: function(n) {
                    var u, f, e, h = o(i.shim, n) || {}, c = h.exports;
                    for (ti(); d.length; ) {
                        if (null === (f = d.shift())[0]) {
                            if (f[0] = n,
                            u)
                                break;
                            u = !0
                        } else
                            f[0] === n && (u = !0);
                        fi(f)
                    }
                    if (t.defQueueMap = {},
                    e = o(r, n),
                    !u && !s(l, n) && e && !e.inited) {
                        if (!(!i.enforceDefine || c && kt(c)))
                            return gt(n) ? void 0 : k(p("nodefine", "No define call for " + n, null, [n]));
                        fi([n, h.deps || [], h.exportsFn])
                    }
                    ui()
                },
                nameToUrl: function(n, r, u) {
                    var l, c, s, f, h, a, v = o(i.pkgs, n);
                    if (v && (n = v),
                    a = o(dt, n))
                        return t.nameToUrl(a, r, u);
                    if (e.jsExtRegExp.test(n))
                        f = n + (r || "");
                    else {
                        for (l = i.paths,
                        s = (c = n.split("/")).length; 0 < s; s -= 1)
                            if (h = o(l, c.slice(0, s).join("/"))) {
                                b(h) && (h = h[0]);
                                c.splice(0, s, h);
                                break
                            }
                        f = c.join("/");
                        f = ("/" === (f += r || (/^data\:|^blob\:|\?/.test(f) || u ? "" : ".js")).charAt(0) || f.match(/^[\w\+\.\-]+:/) ? "" : i.baseUrl) + f
                    }
                    return i.urlArgs && !/^blob\:/.test(f) ? f + i.urlArgs(n, f) : f
                },
                load: function(n, i) {
                    e.load(t, n, i)
                },
                execCb: function(n, t, i, r) {
                    return t.apply(r, i)
                },
                onScriptLoad: function(n) {
                    if ("load" === n.type || ii.test((n.currentTarget || n.srcElement).readyState)) {
                        g = null;
                        var i = ci(n);
                        t.completeLoad(i.id)
                    }
                },
                onScriptError: function(n) {
                    var t = ci(n), i;
                    if (!gt(t.id))
                        return i = [],
                        y(r, function(n, r) {
                            0 !== r.indexOf("_@r") && h(n.depMaps, function(n) {
                                if (n.id === t.id)
                                    return i.push(r),
                                    !0
                            })
                        }),
                        k(p("scripterror", 'Script error for "' + t.id + (i.length ? '", needed by: ' + i.join(", ") : '"'), n, [t.id]))
                }
            }).require = t.makeRequire(),
            t
        }
        function fi() {
            return g && "interactive" === g.readyState || st(ct(), function(n) {
                if ("interactive" === n.readyState)
                    return g = n
            }),
            g
        }
        var e, ut, k, d, ft, et, g, ot, l, lt, dt = /\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm, gt = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g, it = /\.js$/, ni = /^\.\//, at = Object.prototype, vt = at.toString, ti = at.hasOwnProperty, a = !("undefined" == typeof n || "undefined" == typeof navigator || !n.document), yt = !a && "undefined" != typeof importScripts, ii = a && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/, pt = "_", wt = "undefined" != typeof opera && "[object Opera]" === opera.toString(), nt = {}, v = {}, rt = [], tt = !1;
        if (void 0 === r) {
            if (void 0 !== i) {
                if (w(i))
                    return;
                v = i;
                i = void 0
            }
            void 0 === t || w(t) || (v = t,
            t = void 0);
            e = i = function(n, t, i, r) {
                var f, u, s = pt;
                return b(n) || "string" == typeof n || (u = n,
                b(t) ? (n = t,
                t = i,
                i = r) : n = []),
                u && u.context && (s = u.context),
                (f = o(nt, s)) || (f = nt[s] = e.s.newContext(s)),
                u && f.configure(u),
                f.require(n, t, i)
            }
            ;
            e.config = function(n) {
                return e(n)
            }
            ;
            e.nextTick = void 0 !== f ? function(n) {
                f(n, 4)
            }
            : function(n) {
                n()
            }
            ;
            t || (t = e);
            e.version = "2.3.6";
            e.jsExtRegExp = /^\/|:|\?|\.js$/;
            e.isBrowser = a;
            ut = e.s = {
                contexts: nt,
                newContext: ui
            };
            e({});
            h(["toUrl", "undef", "defined", "specified"], function(n) {
                e[n] = function() {
                    var t = nt[pt];
                    return t.require[n].apply(t, arguments)
                }
            });
            a && (k = ut.head = document.getElementsByTagName("head")[0],
            d = document.getElementsByTagName("base")[0],
            d && (k = ut.head = d.parentNode));
            e.onError = bt;
            e.createNode = function(n) {
                var t = n.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
                return t.type = n.scriptType || "text/javascript",
                t.charset = "utf-8",
                t.async = !0,
                t
            }
            ;
            e.load = function(n, t, i) {
                var r, u = n && n.config || {};
                if (a)
                    return (r = e.createNode(u, t, i)).setAttribute("data-requirecontext", n.contextName),
                    r.setAttribute("data-requiremodule", t),
                    !r.attachEvent || r.attachEvent.toString && r.attachEvent.toString().indexOf("[native code") < 0 || wt ? (r.addEventListener("load", n.onScriptLoad, !1),
                    r.addEventListener("error", n.onScriptError, !1)) : (tt = !0,
                    r.attachEvent("onreadystatechange", n.onScriptLoad)),
                    r.src = i,
                    u.onNodeCreated && u.onNodeCreated(r, u, t, i),
                    ot = r,
                    d ? k.insertBefore(r, d) : k.appendChild(r),
                    ot = null,
                    r;
                if (yt)
                    try {
                        f(function() {}, 0);
                        importScripts(i);
                        n.completeLoad(t)
                    } catch (r) {
                        n.onError(p("importscripts", "importScripts failed for " + t + " at " + i, r, [t]))
                    }
            }
            ;
            a && !v.skipDataMain && st(ct(), function(n) {
                if (k || (k = n.parentNode),
                ft = n.getAttribute("data-main"))
                    return l = ft,
                    v.baseUrl || -1 !== l.indexOf("!") || (l = (et = l.split("/")).pop(),
                    lt = et.length ? et.join("/") + "/" : "./",
                    v.baseUrl = lt),
                    l = l.replace(it, ""),
                    e.jsExtRegExp.test(l) && (l = ft),
                    v.deps = v.deps ? v.deps.concat(l) : [l],
                    !0
            });
            r = function(n, t, i) {
                var u, r;
                "string" != typeof n && (i = t,
                t = n,
                n = null);
                b(t) || (i = t,
                t = null);
                !t && w(i) && (t = [],
                i.length && (i.toString().replace(dt, ri).replace(gt, function(n, i) {
                    t.push(i)
                }),
                t = (1 === i.length ? ["require"] : ["require", "exports", "module"]).concat(t)));
                tt && (u = ot || fi()) && (n || (n = u.getAttribute("data-requiremodule")),
                r = nt[u.getAttribute("data-requirecontext")]);
                r ? (r.defQueue.push([n, t, i]),
                r.defQueueMap[n] = !0) : rt.push([n, t, i])
            }
            ;
            r.amd = {
                jQuery: !0
            };
            e.exec = function(n) {
                return eval(n)
            }
            ;
            e(v)
        }
    }(this, "undefined" == typeof setTimeout ? void 0 : setTimeout);
    n.RodRequire = t
}(window);
RODTL = function() {
    function t(n, t) {
        n = n.toFixed(t) + "";
        for (var i = /(\d+)(\d{3})/; i.test(n); )
            n = n.replace(i, "$1 $2");
        return n
    }
    var n = {};
    return n.offset = function(n) {
        if (!n.getClientRects().length)
            return {
                top: 0,
                left: 0
            };
        var t, i;
        return t = n.getBoundingClientRect(),
        i = n.ownerDocument.defaultView,
        {
            top: t.top + i.pageYOffset,
            left: t.left + i.pageXOffset
        }
    }
    ,
    n.pointerEventToXY = function(n) {
        var t = {
            x: 0,
            y: 0
        }, i;
        return n.type == "touchstart" || n.type == "touchmove" || n.type == "touchend" ? (i = n.touches[0] || n.changedTouches[0],
        t.x = i.pageX,
        t.y = i.pageY) : (t.x = n.pageX,
        t.y = n.pageY),
        t
    }
    ,
    n.formatDecimales = function(n, i) {
        if (i)
            return n.toFixed(1) + " %";
        var r = Math.abs(n);
        return r >= 1e3 ? t(n, 0) : r >= 100 ? n.toFixed(1) : r > 9 ? n.toFixed(2) : r >= 1 ? n.toFixed(3) : n.toFixed(4)
    }
    ,
    n.rgb2hex = function(n) {
        return n = n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),
        n && n.length == 4 ? "#" + ("0" + parseInt(n[1], 10).toString(16)).slice(-2) + ("0" + parseInt(n[2], 10).toString(16)).slice(-2) + ("0" + parseInt(n[3], 10).toString(16)).slice(-2) : ""
    }
    ,
    n
}(),
function() {
    function r(n, t) {
        var i;
        return n = n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function(n, t, i, r) {
            return t + t + i + i + r + r
        }),
        i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),
        "rgba(" + parseInt(i[1], 16) + "," + parseInt(i[2], 16) + "," + parseInt(i[3], 16) + "," + t + ")"
    }
    function v(n) {
        return n = n.replace(/^rgba?\(|\s+|\)$/g, "").split(","),
        parseFloat(n[3])
    }
    function u(n, t) {
        return n = "" + n,
        t.substring(0, t.length - n.length) + n
    }
    function s(n, t) {
        n = n + "";
        var i = parseInt(n.substr(6));
        return t == 1 ? u(Math.floor(i / 60), "00") + ":" + u(i % 60, "00") : n.substring(4, 6) + "/" + n.substring(2, 4) + " " + u(Math.floor(i / 60), "00") + ":" + u(i % 60, "00")
    }
    function y(n) {
        return n < 60 ? n + " min" : Math.floor(n / 60) + "h " + n % 60 + "min"
    }
    function f(n, t) {
        var i = new Date(n * 864e5);
        switch (t) {
        case 1:
            return u(i.getDate(), "00") + "/" + u(i.getMonth() + 1, "00") + "/" + i.getFullYear().toString();
        case 2:
            return u(i.getDate(), "00") + "/" + u(i.getMonth() + 1, "00") + "/" + i.getFullYear().toString().substring(2, 4);
        case 3:
            return u(i.getDate(), "00") + "/" + u(i.getMonth() + 1, "00");
        case 4:
            return u(i.getMonth() + 1, "00") + "/" + i.getFullYear().toString()
        }
    }
    function t(n) {
        for (var i = "rgba(255,0,0,1)", t = "rgba(0,95,192,1)", l = "rgba(61,68,241,0.9)", a = "rgba(61,68,241,0.5)", r = "rgba(192,0,0,1)", f = "rgba(192,0,0,0.9)", e = "rgba(192,0,0,0.5)", o = "rgba(192,0,0,0.8)", v = "rgba(0,0,0,1)", u = "rgba(0,140,0,1)", y = "rgba(0,128,0,0.5)", s = "rgba(0,128,0,0.8)", p = "rgba(51,153,102,1)", h = "rgba(96,96,96,1)", w = [{
            type: "line",
            color: "rgba(17,66,87,0.9)",
            color2: "rgba(24, 106, 142,0.8)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw"]
            }
        }, {
            type: "line2",
            color: "rgba(17,66,87,1)",
            params: {
                c: [lang.l_trace],
                w: ["sw"]
            }
        }, {
            type: "candle",
            color: "rgba(0,255,0,1)",
            color2: i,
            color3: h,
            params: {
                c: [lang.l_hausses, lang.l_baisses, lang.l_ombres]
            }
        }, {
            type: "mm",
            color: i,
            param1: 20,
            params: {
                p: [lang.l_prd],
                c: [lang.l_moymobile],
                w: ["sw"]
            }
        }, {
            type: "cmoy",
            color: i,
            w1: 2,
            params: {
                c: ["Cours moyen"],
                w: ["sw"]
            }
        }, {
            type: "cmedian",
            color: u,
            w1: 2,
            params: {
                c: ["Cours médian"],
                w: ["sw"]
            }
        }, {
            type: "VWAP",
            color: t,
            params: {
                c: ["VWAP"],
                w: ["sw"]
            }
        }, {
            type: "barcolor",
            color: t,
            color2: i,
            params: {
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "bar",
            color: "rgba(17,66,87,1)",
            params: {
                c: ["Bar Chart"]
            }
        }, {
            type: "perf",
            color: "rgba(17,66,87,0.9)",
            color2: "rgba(24, 106, 142,0.8)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw"]
            }
        }, {
            type: "volume",
            color: "rgba(3,170,2,0.75)",
            color2: "rgba(255,0,0,0.75)",
            params: {
                c: [lang.l_hausses, lang.l_baisses],
                w: ["o", "o"]
            }
        }, {
            type: "volumecash",
            color: "rgba(3,170,2,0.75)",
            color2: "rgba(255,0,0,0.75)",
            params: {
                c: [lang.l_hausses, lang.l_baisses],
                w: ["o", "o"]
            }
        }, {
            type: "boll",
            color: "rgba(244,143,0,0.7)",
            color2: "rgba(244,143,0,0.15)",
            param1: 20,
            param2: 2,
            params: {
                p: [lang.l_prd, lang.l_ec],
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "primeband",
            color: "rgba(244,143,0,0.7)",
            color2: "rgba(244,143,0,0.15)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "rsi",
            color: t,
            param1: 14,
            sh: 70,
            sb: 30,
            params: {
                c: ["RSI"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "schaff",
            color: t,
            param1: 23,
            param2: 50,
            sh: 75,
            sb: 25,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2"],
                c: ["Schaff"],
                w: ["sw"]
            }
        }, {
            type: "vpn",
            color: t,
            param1: 30,
            param2: .1,
            params: {
                p: ["Période", "Fraction ATR"],
                c: ["VPN"],
                w: ["sw"]
            }
        }, {
            type: "chop",
            color: t,
            param1: 14,
            sh: 61.8,
            sb: 38.2,
            params: {
                c: ["Choppiness"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "fr",
            color: l,
            color2: a,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "cmo",
            color: t,
            param1: 10,
            sh: 50,
            sb: -50,
            params: {
                c: ["CMO"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "cci",
            color: t,
            param1: 20,
            sh: 100,
            sb: -100,
            params: {
                c: ["CCI"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "mom",
            color: f,
            color2: e,
            param1: 12,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }, {
            type: "primeosc",
            color: f,
            color2: e,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "macd",
            color: t,
            color2: r,
            color3: y,
            param1: 12,
            param2: 26,
            param3: 9,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2", "Signal"],
                c: ["MACD", "Signal", lang.l_histogram],
                w: ["sw", "sw"]
            }
        }, {
            type: "sto",
            color: t,
            color2: i,
            param1: 14,
            param2: 3,
            param3: 3,
            sh: 9999,
            sb: 9999,
            params: {
                p: [lang.l_prd, lang.l_stok, lang.l_stod],
                c: ["%K", "%D"],
                w: ["sw", "sw"]
            }
        }, {
            type: "rvi",
            color: t,
            color2: i,
            param1: 10,
            params: {
                p: [lang.l_prd],
                c: ["RVI", "Signal"],
                w: ["sw", "sw"]
            }
        }, {
            type: "ichimoku",
            color: t,
            color2: "rgba(210,0,0,1)",
            color3: u,
            color4: "rgba(64,64,255,1)",
            color5: "rgba(64,64,255,1)",
            color6: "rgba(64,64,255,0.3)",
            param1: 26,
            param2: 9,
            params: {
                c: ["Kijun-Sen", "Tenkan-Sen", "Chikou-Span", "Senkou A", "Senkou B", "Kumo"],
                p: ["Kijun-Sen", "Tenkan-Sen"],
                w: ["sw", "sw", "sw", "sw", "sw", "o"]
            }
        }, {
            type: "equity",
            color: "rgba(51,102,255,1)",
            color2: "rgba(51,102,255,0.5)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "phpb",
            color: u,
            color2: "rgba(210,0,0,1)",
            param1: 20,
            params: {
                c: [lang.l_hausses, lang.l_baisses],
                p: [lang.l_prd]
            }
        }, {
            type: "demark",
            color: u,
            color2: i,
            params: {
                c: ["TD Setup", "TD Countdown"]
            }
        }, {
            type: "evt",
            params: {}
        }, {
            type: "actu",
            params: {}
        }, {
            type: "lineard",
            param1: 30,
            param2: 1,
            color: v,
            color2: "rgba(0,128,128,1)",
            color3: r,
            params: {
                p: [lang.l_prd, lang.l_ec],
                c: [lang.l_droitereg, "Resistance", "Support"],
                w: ["w", "w", "w"]
            }
        }, {
            type: "supres",
            param1: 5,
            color: y,
            color2: "rgba(255,0,0,0.4)",
            params: {
                p: [lang.l_barrep],
                c: [lang.l_hausses, lang.l_baisses],
                w: ["o", "o"]
            }
        }, {
            type: "coppock",
            param1: 11,
            param2: 14,
            param3: 10,
            color: "rgba(0,0,128,0.8)",
            color2: "rgba(0,0,128,0.3)",
            params: {
                p: ["ROC 1", "ROC2", lang.l_moyenne],
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "compare",
            color: i,
            params: {
                c: ["Style"],
                w: ["sw"]
            }
        }, {
            type: "pivots",
            color: "rgba(0,0,0,0.7)",
            color2: "rgba(255,0,0,0.7)",
            color3: "rgba(0,128,0,0.7)",
            params: {
                c: ["Pivot", "Supports", "Resistances"]
            }
        }, {
            type: "zig zag",
            color: i,
            param1: 3,
            params: {
                p: [lang.l_variation],
                c: ["Zig Zag"],
                w: ["sw"]
            }
        }, {
            type: "mmp",
            color: "rgba(180,0,0,1)",
            param1: 15,
            params: {
                p: [lang.l_prd],
                c: [lang.l_moymobp],
                w: ["sw"]
            }
        }, {
            type: "mmh",
            color: "rgba(180,0,0,1)",
            param1: 9,
            params: {
                p: [lang.l_prd],
                c: [lang.l_mmh2],
                w: ["sw"]
            }
        }, {
            type: "double EMA",
            color: i,
            param1: 20,
            params: {
                p: [lang.l_prd],
                c: ["Double EMA"],
                w: ["sw"]
            }
        }, {
            type: "triple EMA",
            color: t,
            param1: 20,
            params: {
                p: [lang.l_prd],
                c: ["Triple EMA"],
                w: ["sw"]
            }
        }, {
            type: "alligator",
            color: t,
            color2: i,
            color3: u,
            param1: 13,
            param2: 8,
            param3: 5,
            params: {
                p: ["Jaw", "Teeth", "Lips"],
                c: ["Jaw", "Teeth", "Lips"],
                w: ["sw", "sw", "sw"]
            }
        }, {
            type: "mme",
            color: t,
            param1: 30,
            params: {
                p: [lang.l_prd],
                c: [lang.l_moymobe],
                w: ["sw"]
            }
        }, {
            type: "mmt",
            color: t,
            param1: 20,
            params: {
                p: [lang.l_prd],
                c: [lang.l_moymobt],
                w: ["sw"]
            }
        }, {
            type: "evmm",
            color: "rgba(192,0,0,0.7)",
            color2: "rgba(192,0,0,0.15)",
            param1: 20,
            param2: 2,
            params: {
                p: [lang.l_prd, lang.l_ecart],
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "donchian",
            color: "rgba(0,128,0,0.7)",
            color2: "rgba(0,128,0,0.15)",
            param1: 20,
            params: {
                p: [lang.l_prd],
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "gmma",
            color: u,
            color2: r,
            params: {
                c: ["Fast", "Slow"],
                w: ["sw", "sw"]
            }
        }, {
            type: "supertrend",
            color: r,
            color2: u,
            param1: 10,
            param2: 3,
            params: {
                p: [lang.l_prd, lang.l_coeff],
                c: ["Resistance", "Support"],
                w: ["w", "w"]
            }
        }, {
            type: "atrs",
            color: r,
            color2: u,
            param1: 5,
            param2: 3.5,
            params: {
                p: [lang.l_prd, lang.l_coeff],
                c: ["Resistance", "Support"],
                w: ["w", "w"]
            }
        }, {
            type: "keltner",
            color: "rgba(0,128,0,0.7)",
            color2: "rgba(0,128,0,0.20)",
            param1: 20,
            param2: 2,
            param3: 10,
            params: {
                p: [lang.l_prd, lang.l_ecart2, lang.l_atrperiod],
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "heikin ashi",
            color: p,
            color2: "rgba(255,64,64,1)",
            color3: h,
            params: {
                c: [lang.l_hausses, lang.l_baisses, lang.l_ombres]
            }
        }, {
            type: "renko",
            color: p,
            color2: i,
            color3: h,
            params: {
                p: [lang.l_tboite],
                c: [lang.l_hausses, lang.l_baisses, lang.l_border]
            },
            nolinearX: !0
        }, {
            type: "point figure",
            color: p,
            color2: i,
            param2: 3,
            params: {
                p: ["Box", "Reverse"],
                c: [lang.l_hausses, lang.l_baisses]
            },
            nolinearX: !0
        }, {
            type: "season",
            nolinearX: !0
        }, {
            type: "kagi",
            color: "rgba(51,102,255,1)",
            color2: "rgba(255,64,64,1)",
            params: {
                p: [lang.l_tboite],
                c: ["Yang", "Yin"]
            },
            nolinearX: !0
        }, {
            type: "equivolume",
            color: "rgba(51,102,255,1)",
            color2: "rgba(255,64,64,1)",
            params: {
                c: [lang.l_hausses, lang.l_baisses]
            },
            nolinearX: !0
        }, {
            type: "line break",
            color: p,
            color2: i,
            color3: h,
            params: {
                p: [lang.l_lines],
                c: [lang.l_hausses, lang.l_baisses, lang.l_border]
            },
            nolinearX: !0
        }, {
            type: "hollow",
            color: "rgba(7,103,69,1)",
            color2: i,
            color3: h,
            params: {
                c: [lang.l_hausses, lang.l_baisses, lang.l_ombres]
            }
        }, {
            type: "accDist",
            color: f,
            color2: e,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "obv",
            color: l,
            color2: a,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "forceindex",
            color: l,
            color2: a,
            param1: 13,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }, {
            type: "perfi",
            color: l,
            color2: a,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "kvo",
            color: "rgba(0,0,128,1)",
            color2: u,
            params: {
                c: ["KVO", "Signal"],
                w: ["sw", "sw"]
            }
        }, {
            type: "ultimate",
            color: t,
            param1: 7,
            param2: 14,
            param3: 28,
            sh: 70,
            sb: 30,
            params: {
                c: ["Ultimate Osc."],
                p: [lang.l_mm2 + " 1", lang.l_mm2 + " 2", lang.l_mm2 + " 3"],
                w: ["sw"]
            }
        }, {
            type: "bollb",
            color: t,
            param1: 20,
            sh: 100,
            sb: 0,
            params: {
                c: ["Bollinger %B"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "bollw",
            color: "rgba(255,102,0,1)",
            param1: 20,
            param2: 2,
            params: {
                c: [lang.l_trace],
                p: [lang.l_prd, lang.l_ec],
                w: ["sw"]
            }
        }, {
            type: "atr",
            color: t,
            param1: 14,
            params: {
                c: ["ATR"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "eom",
            color: f,
            color2: e,
            param1: 14,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }, {
            type: "cmf",
            color: f,
            color2: e,
            param1: 21,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }, {
            type: "dpo",
            color: f,
            color2: e,
            param1: 20,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }, {
            type: "asi",
            color: f,
            color2: "rgba(192,0,0,0.4)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "nvi",
            color: r,
            params: {
                c: ["NVI"],
                w: ["sw"]
            }
        }, {
            type: "pvi",
            color: t,
            params: {
                c: ["PVI"],
                w: ["sw"]
            }
        }, {
            type: "macdzl",
            color: t,
            color2: r,
            color3: y,
            param1: 12,
            param2: 26,
            param3: 9,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2", "Signal"],
                c: ["MACD Zéro Lag", "Signal", lang.l_histogram],
                w: ["sw", "sw"]
            }
        }, {
            type: "wto",
            color: t,
            color2: r,
            color3: y,
            param1: 10,
            param2: 21,
            sh: 60,
            sb: -60,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2"],
                c: ["Wave Trend Osc", "Signal", lang.l_histogram],
                w: ["sw", "sw"]
            }
        }, {
            type: "macdh",
            color: "rgba(0,0,192,0.8)",
            color2: o,
            param1: 12,
            param2: 26,
            param3: 9,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2", "Signal"],
                c: ["MACD > Signal", "MACD < Signal"]
            }
        }, {
            type: "awesome",
            color: s,
            color2: o,
            param1: 5,
            param2: 34,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2"],
                c: [lang.l_ascend, lang.l_descend]
            }
        }, {
            type: "tvi",
            color: s,
            color2: o,
            param1: .5,
            params: {
                p: [lang.l_variation],
                c: [lang.l_ascend, lang.l_descend]
            }
        }, {
            type: "bop",
            color: s,
            color2: o,
            color3: "rgba(128,128,128,0.8)",
            params: {
                c: [lang.l_acheteur, lang.l_vendeur, lang.l_neutre]
            }
        }, {
            type: "mf",
            color: "rgba(0,255,0,0.9)",
            color2: "rgba(127,0,0,0.9)",
            color3: "rgba(0,127,255,0.9)",
            color4: "rgba(255,0,255,0.9)",
            params: {
                c: ["greenbar", "fadebar", "fakebar", "squatbar"]
            }
        }, {
            type: "qstick",
            color: s,
            color2: o,
            param1: 5,
            params: {
                p: [lang.l_prd],
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "ewo",
            color: s,
            color2: o,
            param1: 5,
            param2: 35,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2"],
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "ppo",
            color: s,
            color2: o,
            param1: 12,
            param2: 26,
            param3: 9,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2", "signal"],
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "elderbear",
            color: r,
            color2: r,
            param1: 13,
            params: {
                p: [lang.l_prd],
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "elderbull",
            color: u,
            color2: u,
            param1: 13,
            params: {
                p: [lang.l_prd],
                c: [lang.l_hausses, lang.l_baisses]
            }
        }, {
            type: "dmi",
            color: u,
            color2: r,
            color3: v,
            param1: 14,
            params: {
                p: [lang.l_prd],
                c: ["DI+", "DI-", "ADX"],
                w: ["sw", "sw", "sw"]
            }
        }, {
            type: "aroon",
            color: u,
            color2: r,
            param1: 14,
            params: {
                p: [lang.l_prd],
                c: ["Aroon up", "Aroon down"],
                w: ["sw", "sw"]
            }
        }, {
            type: "adx",
            color: v,
            color2: r,
            param1: 14,
            sh: 9999,
            sb: 9999,
            params: {
                p: [lang.l_prd],
                c: ["ADX", "ADXR"],
                w: ["sw", "sw"]
            }
        }, {
            type: "vortex",
            color: u,
            color2: r,
            param1: 14,
            params: {
                p: [lang.l_prd],
                c: ["+VI", "-VI"],
                w: ["sw", "sw"]
            }
        }, {
            type: "roc",
            color: t,
            param1: 10,
            sh: 9999,
            sb: 9999,
            params: {
                c: ["Rate of change"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "disp",
            color: t,
            param1: 10,
            params: {
                c: ["Disparity index"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "std",
            color: t,
            param1: 10,
            params: {
                c: ["Std Deviation"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "ulcer",
            color: t,
            param1: 14,
            params: {
                c: ["Ulcer Index"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "di",
            color: t,
            param1: 10,
            params: {
                c: ["Demand Index"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "sto rsi",
            color: t,
            color2: i,
            param1: 14,
            param2: 3,
            param3: 3,
            param4: 14,
            sh: 80,
            sb: 20,
            params: {
                p: [lang.l_prd + " Sto.", lang.l_stok, lang.l_stod, lang.l_prd + " RSI"],
                c: ["%K", "%D"],
                w: ["sw", "sw"]
            }
        }, {
            type: "smi",
            color: "rgba(128,128,128,1)",
            color2: i,
            param1: 14,
            param2: 3,
            param3: 5,
            param4: 3,
            sh: 9999,
            sb: 9999,
            params: {
                p: [lang.l_prd, lang.l_lissage + " 1", lang.l_lissage + " 2", "Signal"],
                c: [lang.l_stochastic, "Signal"],
                w: ["sw", "sw"]
            }
        }, {
            type: "tsi",
            color: v,
            color2: i,
            param1: 25,
            param2: 13,
            param3: 13,
            sh: 9999,
            sb: 9999,
            params: {
                p: [lang.l_prd + " 1", lang.l_prd + " 2", "Signal"],
                c: ["True Strength", "Signal"],
                w: ["sw", "sw"]
            }
        }, {
            type: "kst",
            color: t,
            color2: i,
            param1: 10,
            param2: 15,
            param3: 20,
            param4: 30,
            params: {
                p: ["ROC 1", "ROC 2", "ROC 3", "ROC 4"],
                c: ["KST", "Signal"],
                w: ["sw", "sw"]
            }
        }, {
            type: "trix",
            color: t,
            param1: 12,
            params: {
                c: ["TRIX"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "pgo",
            color: t,
            param1: 14,
            sh: 2,
            sb: -2,
            params: {
                c: ["PGO"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "mass index",
            color: t,
            param1: 25,
            params: {
                c: ["Mass Index"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "vroc",
            color: t,
            param1: 10,
            params: {
                c: ["Volume ROC"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "moonphase",
            color: "rgba(255,153,0,0.9)",
            color2: "rgba(255,204,0,0.5)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw"]
            }
        }, {
            type: "ac will",
            color: "rgba(61,68,241,0.9)",
            color2: "rgba(61,68,241,0.5)",
            params: {
                c: [lang.l_trace, lang.l_remplis],
                w: ["sw", "o"]
            }
        }, {
            type: "will r",
            color: r,
            param1: 14,
            sh: -20,
            sb: -80,
            params: {
                c: ["Williams %R"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "mfi",
            color: r,
            param1: 14,
            sh: 80,
            sb: 20,
            params: {
                c: ["Money flow idx"],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "sar",
            color: "rgba(210,0,0,1)",
            color2: u,
            param1: .02,
            param2: .2,
            params: {
                c: [lang.l_baisses, lang.l_hausses],
                p: [lang.l_accel]
            }
        }, {
            type: "linearc",
            color: "rgba(255,0,255,1)",
            param1: 10,
            params: {
                c: [lang.l_lineareg],
                p: [lang.l_prd],
                w: ["sw"]
            }
        }, {
            type: "linearo",
            color: f,
            color2: e,
            param1: 10,
            params: {
                c: [lang.l_trace, lang.l_remplis],
                p: [lang.l_prd],
                w: ["sw", "o"]
            }
        }], b = w.length, c = 0; c < b; c++)
            if (w[c].type == n)
                return w[c]
    }
    function e() {
        for (var t, n = 1; n < arguments.length; n++)
            for (t in arguments[n])
                arguments[n].hasOwnProperty(t) && (typeof arguments[0][t] == "object" && typeof arguments[n][t] == "object" ? e(arguments[0][t], arguments[n][t]) : arguments[0][t] = arguments[n][t]);
        return arguments[0]
    }
    function a(n) {
        return n = n.replace(/'/g, "%27"),
        n = n.replace(/"/g, "%22"),
        n.replace(/,/g, "%2C")
    }
    function h() {
        var n = "t";
        try {
            return localStorage.setItem(n, n),
            localStorage.removeItem(n),
            !0
        } catch (t) {
            return !1
        }
    }
    function o(n) {
        try {
            return JSON.parse(JSON.stringify(n))
        } catch (t) {}
    }
    function c(n, t, i) {
        var u = n.QuoteTab, r, f = 0, e = 999999, o = u.length;
        for (t || (t = 0),
        i ? i > o && (i = o) : i = o,
        r = t; r < i; r++)
            u[r].h > f && (f = u[r].h),
            u[r].l < e && (e = u[r].l);
        return n.High = f,
        n.Low = e,
        n
    }
    function l() {
        return {
            bkcolor: "#fff",
            txtColor: "#606060",
            gridV: !0,
            gridH: !0,
            gridLine: !0,
            gridColor: "#e0e0e0",
            indicValues: !0,
            quotesValues: !0,
            isEncadre: !0,
            yaxis: !1,
            nosticky: !1,
            reticColor: "#114257",
            semilog: !1,
            cadreColor: "#e0e0e0",
            traceColor: null,
            noVeilleIntra: !1,
            veilleStyle: !1,
            veilleColor: "#fe0000",
            fontSize: 12,
            splitStyle: "band",
            splitColor: "rgba(153,153,153,1)"
        }
    }
    var n = new function() {
        this.gi = function(n) {
            return document.getElementById(n)
        }
        ;
        this.qsa = function(n) {
            return document.querySelectorAll(n)
        }
        ;
        this.qs = function(n) {
            return document.querySelector(n)
        }
        ;
        this.qsga = function(n, t) {
            var i = this.qs(n);
            if (i != null)
                return i.getAttribute(t)
        }
        ;
        this.idempty = function(n) {
            var t = this.gi(n);
            t != null && (t.innerHTML = "")
        }
        ;
        this.qsaempty = function(n) {
            var t = this.qsa(n);
            [].forEach.call(t, function(n) {
                n.innerHTML = ""
            })
        }
        ;
        this.clrem = function(n) {
            for (var r, t, i = 0; i < n.length; i++)
                for (r = document.getElementsByClassName(n[i]),
                t = r.item(0); t; )
                    t.parentNode.removeChild(t),
                    t = r.item(0)
        }
        ;
        this.idrem = function(n) {
            var t = this.gi(n);
            t != null && t.parentNode.removeChild(t)
        }
        ;
        this.qsarem = function(n) {
            var t = this.qsa(n);
            [].forEach.call(t, function(n) {
                n.parentNode.removeChild(n)
            })
        }
        ;
        this.qsarclass = function(n, t) {
            var i = this.qsa(n);
            [].forEach.call(i, function(n) {
                n.classList.remove(t)
            })
        }
        ;
        this.qsaaclass = function(n, t) {
            var i = this.qsa(n);
            [].forEach.call(i, function(n) {
                n.classList.add(t)
            })
        }
        ;
        this.clcss = function(n, t, i) {
            for (var u = document.getElementsByClassName(n), r = 0; r < u.length; r++)
                u[r].style[t] = i
        }
        ;
        this.idst = function(n, t) {
            var i = this.gi(n);
            i != null && (i.textContent = t)
        }
        ;
        this.idhtml = function(n, t) {
            var i = this.gi(n);
            i != null && (i.innerHTML = t)
        }
        ;
        this.idcss = function(n, t, i) {
            var r = this.gi(n);
            r != null && (r.style[t] = i)
        }
        ;
        this.gigt = function(n) {
            var t = this.gi(n);
            return t != null ? t.textContent : ""
        }
        ;
        this.qstxt = function(n, t) {
            var i = this.qs(n);
            i != null && (i.textContent = t)
        }
        ;
        this.qshtml = function(n, t) {
            var i = this.qs(n);
            i != null && (i.innerHTML = t)
        }
        ;
        this.clhide = function(n) {
            for (var i = document.getElementsByClassName(n), t = 0; t < i.length; t++)
                i[t].style.display = "none"
        }
    }
      , p = function(p) {
        function wf() {
            if (w.hideTrace) {
                var t = document.createElement("div");
                t.id = it("hst-");
                t.setAttribute("class", "spg hst_icon");
                t.setAttribute("style", "top:" + (w.paddingTop + 3) + "px;right:" + (w.paddingRight + 5) + "px");
                tt.doc.appendChild(t);
                ui.forEach(function(t) {
                    n.gi(it("hst-")).addEventListener(t, tt.hideShowTrace)
                })
            } else
                n.idrem(it("hst-"))
        }
        function at(n) {
            var t;
            switch (n) {
            case "c":
                t = "crosshair";
                break;
            case "p":
                t = "pointer";
                break;
            case "m":
                t = "move";
                break;
            case "n":
                t = "ns-resize";
                break;
            case "zi":
                t = "zoom-in";
                break;
            default:
                t = "default"
            }
            tt.doc.style.cursor = t
        }
        function lc() {
            at("zi");
            tt.doc.addEventListener("mousedown", fu);
            tt.doc.addEventListener("touchstart", fu);
            rt("mousedown", fu);
            rt("touchstart", fu);
            tt.doc.addEventListener("touchmove", eu);
            tt.doc.addEventListener("mousemove", eu);
            rt("touchmove", eu);
            rt("mousemove", eu)
        }
        function ks() {
            g.tmp1 = null;
            ni();
            dt()
        }
        function fu(t) {
            t.preventDefault();
            var u = RODTL.offset(n.gi(it("rodgraph-")))
              , f = RODTL.pointerEventToXY(t)
              , r = parseInt(f.x - u.left)
              , e = parseInt(f.y - u.top)
              , i = w;
            r < i.innerWidth + i.paddingLeft && r > i.paddingLeft && e > i.paddingTop && e < k[0].HeightPx + i.paddingTop && (g.tmp1 = r,
            tt.doc.addEventListener("mouseup", ou),
            tt.doc.addEventListener("touchend", ou),
            rt("mouseup", ou),
            rt("touchend", ou))
        }
        function eu(t) {
            var o, h, c;
            t.preventDefault();
            var l = RODTL.offset(n.gi(it("rodgraph-")))
              , a = RODTL.pointerEventToXY(t)
              , u = parseInt(a.x - l.left)
              , r = w
              , e = n.gi(it("overlay-"))
              , i = e.getContext("2d");
            if (!g.tmp1) {
                i.strokeStyle = r.set.reticColor;
                i.clearRect(0, 0, e.width, e.height);
                i.beginPath();
                i.moveTo(u + .5, r.paddingTop);
                i.lineTo(u + .5, k[0].HeightPx + r.paddingTop);
                i.stroke();
                o = new ht(u,0,0);
                i.fillStyle = r.set.reticColor;
                i.fillText(r.chartPeriod >= 0 ? f(o.x, 1) : s(o.x), o.mx, k[0].HeightPx + r.paddingTop - 3);
                return
            }
            g.tmp2 = u;
            i.fillStyle = "rgba(255,106,0,0.3)";
            i.clearRect(0, 0, e.width, e.height);
            i.fillRect(g.tmp1, r.paddingTop, u - g.tmp1, k[0].HeightPx);
            h = new ht(Math.min(g.tmp1, g.tmp2),0,0);
            c = new ht(Math.max(g.tmp1, g.tmp2),0,0);
            i.fillStyle = "rgba(255,106,0,1)";
            i.fillText(r.chartPeriod >= 0 ? f(h.x, 1) : s(h.x), h.mx, k[0].HeightPx);
            i.fillText(r.chartPeriod >= 0 ? f(c.x, 1) : s(c.x), c.mx, k[0].HeightPx + r.paddingTop - 3)
        }
        function ou(t) {
            var r, u;
            t.preventDefault();
            for (var f = new ht(Math.min(g.tmp1, g.tmp2),0,0), e = new ht(Math.max(g.tmp1, g.tmp2),0,0), o = d.QuoteTab.length, i = 0; i < o; i++)
                if (d.QuoteTab[i].d == f.x && (nt.minX = i),
                d.QuoteTab[i].d == e.x) {
                    nt.maxX = i;
                    break
                }
            r = n.gi(it("overlay-"));
            u = r.getContext("2d");
            u.clearRect(0, 0, r.width, r.height);
            lu();
            ft();
            ks();
            typeof extResetTools == "function" && extResetTools()
        }
        function dt() {
            if (!g.eventsActive && !VGP.noEvents) {
                var t = n.gi(it("overlay-")).getContext("2d");
                t.font = w.set.fontSize + "px Arial";
                t.strokeStyle = w.set.reticColor;
                t.lineWidth = 1;
                t.setLineDash && t.setLineDash([3]);
                g.lineNumber = 999;
                g.cursorState = !1;
                tt.doc.addEventListener("mousewheel", au);
                tt.doc.addEventListener("DOMMouseScroll", au);
                tt.doc.addEventListener("mouseleave", th);
                tt.doc.addEventListener("touchmove", su);
                tt.doc.addEventListener("mousemove", su);
                tt.doc.addEventListener("mouseup", cu);
                tt.doc.addEventListener("touchend", cu);
                tt.doc.addEventListener("mousedown", hu);
                tt.doc.addEventListener("touchstart", hu);
                g.eventsActive = !0
            }
        }
        function ds(n, t) {
            var i = [];
            ["line break", "kagi", "point figure", "equivolume", "renko", "heikin ashi", "season"].indexOf(n) != -1 && i.push(w.installDir + "RODNL2.min.js");
            i.length != 0 ? RodRequire(i, function() {
                t()
            }) : t()
        }
        function ac(n, t) {
            var i = [];
            ["mm", "mmp", "linearc", "lineard", "mme", "boll", "compare", "evt", "actu", "pivots", "double EMA", "triple EMA"].indexOf(n) == -1 && i.push(w.installDir + "RODTAE7.min.js");
            i.length != 0 ? RodRequire(i, function() {
                t()
            }) : t()
        }
        function vc(n, t) {
            var i = [];
            ["volume", "volumecash", "equity", "perfi", "rsi", "linearo", "fr", "atr", "cci", "mom", "macd", "macdh", "roc", "sto"].indexOf(n) == -1 && i.push(w.installDir + "RODTAD8.min.js");
            i.length != 0 ? RodRequire(i, function() {
                t()
            }) : t()
        }
        function tr(n, t) {
            typeof DisplayAlert == "function" && DisplayAlert(n, t)
        }
        function bf(n, i) {
            var u, f, o, r;
            for (w = e(w, n),
            u = t(w.mainChart.type),
            u = e(u, w.mainChart.typedef),
            w.mainChart.typedef = u,
            o = w.mainChart.indicators.length,
            f = 0; f < o; f++)
                u = t(w.mainChart.indicators[f].type),
                u = e(u, w.mainChart.indicators[f]),
                w.mainChart.indicators[f] = u;
            r = w.set.fontSize - 11;
            w.set.yaxis ? (n.paddingRight != null ? w.paddingRight += r * 4 : w.paddingRight = 10 + r * 4,
            n.paddingLeft != null ? w.paddingLeft += r * 4 : w.paddingLeft = 45 + r * 4) : (n.paddingRight != null ? w.paddingRight += r * 4 : w.paddingRight = 45 + r * 4,
            n.paddingLeft != null ? w.paddingLeft += r * 4 : w.paddingLeft = 10 + r * 4);
            w.paddingTop += r;
            w.paddingBottom += r;
            w.innerWidth = w.widthGraph - w.paddingRight - w.paddingLeft;
            w.marginInter = 3;
            w.usableHeight = w.heightGraph - w.paddingTop - w.paddingBottom - w.indicators.length * w.marginInter;
            ir(i)
        }
        function kf(n) {
            var u, f, t, r, i = [], e = ["volume", "volumecash", "equity", "perfi", "rsi", "linearo", "fr", "atr", "cci", "mom", "macd", "macdh", "roc", "sto"], o = ["mm", "mmp", "linearc", "lineard", "mme", "boll", "compare", "evt", "actu", "pivots", "double EMA", "triple EMA"];
            for (w.searchConfig != "" && i.push(w.installDir + "RODCDL4.min.js"),
            ["line break", "kagi", "point figure", "equivolume", "renko", "heikin ashi", "season"].indexOf(w.mainChart.type) != -1 && i.push(w.installDir + "RODNL2.min.js"),
            r = w.mainChart.indicators.length,
            t = 0; t < r; t++)
                if (o.indexOf(w.mainChart.indicators[t].type) == -1) {
                    f = !0;
                    break
                }
            for (r = w.indicators.length,
            t = 0; t < r; t++)
                if (e.indexOf(w.indicators[t].type) == -1) {
                    u = !0;
                    break
                }
            u && i.push(w.installDir + "RODTAD8.min.js");
            f && i.push(w.installDir + "RODTAE7.min.js");
            i.length != 0 ? RodRequire(i, function() {
                n()
            }) : n()
        }
        function nh(n) {
            var t, r = n.mainChart.indicators.length, i;
            if (n.isCompare != null && n.isCompare != !0 && n.isCompare != !1) {
                for (t = 0; t < r; t++)
                    n.mainChart.indicators[t].type == "compare" && (n.mainChart.indicators[t].symbol = n.isCompare,
                    n.isCompare = !0,
                    i = 1);
                i || (n.isCompare = !1)
            }
            n.isCompare == null && (n.isCompare = !1)
        }
        function yc(n) {
            for (var r = l(), i = Object.keys(r), u = i.length, t = 0; t < u; t++)
                n.set[i[t]] == r[i[t]] && delete n.set[i[t]];
            return n
        }
        function th() {
            var e = n.gi(it("overlay-")), h = e.getContext("2d"), t, u, i, r, o, f, s;
            if (h.clearRect(0, 0, e.width, e.height),
            t = w,
            g.isVerticalZoom = !1,
            g.moveZoomX = 0,
            g.moveZoomY = 0,
            g.moveLayer = !1,
            !t.mainChart.typedef.nolinearX) {
                if (u = 0,
                t.mainChart.type != "perf" && (u = se(t.chartPeriod < 0 ? !0 : !1),
                u = u >= 0 ? '<span class="quote_up2"> +' + u.toFixed(2) + "%<\/span>" : '<span class="quote_down2"> ' + u.toFixed(2) + "%<\/span>"),
                i = k[0].Bars[0][0],
                i != null && t.set.quotesValues && (t.mainChart.type != "perf" ? t.widthGraph > 490 ? n.idhtml(it("coursval-"), "<span><b>O<\/b>: " + i.o + "<\/span><span><b>H<\/b>: " + i.h + "<\/span><span><b>" + lang.l_b + "<\/b>: " + i.l + "<\/span><span><b>C<\/b>: " + i.c + "<\/span>" + u + "") : n.idhtml(it("coursval-"), "<span>" + i.c + "<\/span>" + u) : n.idhtml(it("coursval-"), '<span class="quote_' + (i.c >= 0 ? "up" : "down") + 'b">' + i.c + "%<\/span>")),
                t.set.indicValues && t.mainChart.type != "perf")
                    for (o = t.mainChart.indicators.length,
                    r = 0; r < o; r++)
                        f = t.mainChart.indicators[r].type,
                        f != "evt" && f != "actu" && f != "lineard" && f != "pivots" && f != "gmma" && f != "demark" && n.idhtml(it("val-") + r, ci(k[0].Bars[r + 1][0]));
                if (i != null && t.set.indicValues)
                    for (s = k.length,
                    r = 1; r < s; r++)
                        n.qstxt(it("#infoindic-") + r + " .indicval", ci(k[r].Bars[i.d]))
            }
        }
        function ci(n) {
            var t, r, i, u;
            if (n == null)
                return "";
            if (r = n.length,
            i = "",
            r == null)
                return u = Math.abs(n),
                u > 1e3 ? Math.round(n) : Math.abs(n) < 2 ? n.toFixed(3) : n.toFixed(2);
            if (typeof n[0] == "number") {
                for (t = 0; t < r; t++)
                    i = Math.abs(n[t]) < 2 ? i + n[t].toFixed(3) + " - " : i + n[t].toFixed(2) + " - ";
                return i.substring(0, i.length - 3)
            }
            for (t = 0; t < r; t++)
                n[t].c != null && (i += '<span style="color:' + n[t].c + '">'),
                n[t].t != null && (i += n[t].t),
                i += Math.abs(n[t].v) < 2 ? n[t].v.toFixed(3) : n[t].v.toFixed(2),
                n[t].c != null && (i += " <\/span>");
            return i
        }
        function su(t) {
            var yt, pt, c, wt, ot, y, fi, a, h, o, v, st, ut, ft, b, kt, p, dt, rt, ht, ct, ei, gt, ni, l, et, vt;
            if (g.isPinchZoom) {
                t.preventDefault();
                t.touches.length == 2 && (yt = Math.hypot(t.touches[0].pageX - t.touches[1].pageX, t.touches[0].pageY - t.touches[1].pageY),
                pt = .33,
                g.distPinchZoom > 0 && (yt > g.distPinchZoom ? gf(pt) : ne(pt)),
                g.distPinchZoom = yt);
                return
            }
            if (w.cursor != "b") {
                t.preventDefault();
                var ii = RODTL.offset(n.gi(it("rodgraph-"))), ri = RODTL.pointerEventToXY(t), u = parseInt(ri.x - ii.left), e = parseInt(ri.y - ii.top), r, i = w;
                if (g.moveLayer) {
                    if (g.activeLayer == null)
                        return;
                    pc(e, g.activeLayer);
                    return
                }
                if (g.moveZoomX != 0 && g.moveZoomY != 0) {
                    wc(u, e);
                    return
                }
                if (g.isVerticalZoom) {
                    var oi = e - g.moveZoomY
                      , si = (nt.maxY - nt.minY) / i.heightGraph
                      , ui = oi * si * 2;
                    nt.minY = nt.minY - ui;
                    nt.maxY = nt.maxY + ui;
                    g.moveZoomY = e;
                    lt(0);
                    return
                }
                if (c = kr(u, e),
                i.mainChart.type != "perf" && !i.mainChart.typedef.nolinearX && (g.lineNumber = df(u, e, c),
                wt = g.fiEvt.length,
                wt != 0 && i.chartPeriod >= 0))
                    if (e > k[0].HeightPx + i.paddingTop - 25 && c == 0) {
                        for (r = 0; r < wt; r++)
                            if (g.fiEvt[r].px != null)
                                if (g.fiEvt[r].px > u - 9 && g.fiEvt[r].px < u + 9) {
                                    y = "<b>";
                                    switch (g.fiEvt[r].evt) {
                                    case "R":
                                        y += lang.l_resultat + g.fiEvt[r].s + "<\/b>";
                                        ot = "r";
                                        break;
                                    case "C":
                                        y += lang.l_chifaff + g.fiEvt[r].s + "<\/b>";
                                        ot = "c";
                                        break;
                                    case "D":
                                        y += lang.l_dividend + g.fiEvt[r].s + " " + i.money;
                                        ot = "d";
                                        break;
                                    case "S":
                                        y += lang.l_split + g.fiEvt[r].s;
                                        ot = "s";
                                        break;
                                    case "A":
                                        VGP.isPro ? (fi = g.fiEvt[r].u.split("_"),
                                        y += '<a href="#" onclick="openNews2(' + fi[1] + ')">' + g.fiEvt[r].s + "<\/a><\/b>") : y += '<a href="' + g.fiEvt[r].u + '" target="_blank">' + g.fiEvt[r].s + "<\/a><\/b>";
                                        ot = "a"
                                    }
                                    a = n.gi(it("eod_infofi-"));
                                    a == null && (a = document.createElement("div"),
                                    a.id = it("eod_infofi-"),
                                    tt.doc.appendChild(a));
                                    a.setAttribute("class", "eod_infofi eod_col" + ot);
                                    y += "<\/br>" + f(g.fiEvt[r].d, 1);
                                    a.style.display = "block";
                                    a.style.top = k[0].HeightPx - i.paddingTop - 60 + "px";
                                    a.style.left = g.fiEvt[r].px - 76 + "px";
                                    a.innerHTML = y;
                                    break
                                } else
                                    n.clhide("eod_infofi")
                    } else
                        e < k[0].HeightPx + i.paddingTop - 95 && c == 0 && n.clhide("eod_infofi");
                if (w.mainChart.type != "perf" && e > i.paddingTop && (!i.set.yaxis && u > i.widthGraph - i.paddingRight || i.set.yaxis && u < i.paddingLeft)) {
                    at("n");
                    return
                }
                if (h = n.gi(it("overlay-")),
                o = h.getContext("2d"),
                u < h.width - i.paddingRight && u > i.paddingLeft && e > i.paddingTop && e < h.height - i.paddingBottom) {
                    if (o.clearRect(0, 0, h.width, h.height),
                    c != null) {
                        if (o.fillStyle = i.set.reticColor,
                        o.beginPath(),
                        v = i.set.fontSize - 12,
                        i.cursor == "r" && (o.moveTo(i.paddingLeft, e + .5),
                        o.lineTo(h.width - i.paddingRight, e + .5),
                        o.moveTo(u + .5, i.paddingTop),
                        o.lineTo(u + .5, h.height - i.paddingBottom),
                        o.stroke()),
                        i.set.yaxis ? c == 0 ? o.fillRect(0, e - 14, i.paddingLeft, 29 + v) : o.fillRect(0, e - 8, i.paddingLeft, 18 + v) : c == 0 ? o.fillRect(i.widthGraph - i.paddingRight, e - 14, i.paddingRight, 29 + v) : o.fillRect(i.widthGraph - i.paddingRight, e - 8, i.paddingRight, 18 + v),
                        st = 70 + v * 2,
                        ut = u - st / 2,
                        ut < i.paddingLeft && (ut = i.paddingLeft),
                        o.fillRect(ut, h.height - i.paddingBottom + 1, st, i.paddingBottom - 1),
                        o.fillRect(ut, -2, st, i.paddingTop + 2),
                        bt[u] != null) {
                            if (ft = i.chartPeriod >= 0 ? f(bt[u], 1) : s(bt[u]),
                            ws = ft,
                            b = k[0].Bars,
                            b[0][bt[u]] != null && i.set.quotesValues && (kt = b[0][bt[u]].i,
                            p = "",
                            kt > 0 && i.mainChart.type != "perf" && (i.chartPeriod < 0 && d.qv != null ? p = (b[0][bt[u]].c - d.qv.c) * 100 / d.qv.c : (dt = d.QuoteTab[kt - 1 + nt.minX].c,
                            p = (b[0][bt[u]].c - dt) * 100 / dt),
                            p = p >= 0 ? '<span class="quote_up2"> +' + p.toFixed(2) + "%<\/span>" : '<span class="quote_down2"> ' + p.toFixed(2) + "%<\/span>"),
                            rt = b[0][bt[u]],
                            i.mainChart.type != "perf" ? i.widthGraph > 490 ? n.idhtml(it("coursval-"), "<span><b>O<\/b>: " + rt.o + "<\/span><span><b>H<\/b>: " + rt.h + "<\/span><span><b>" + lang.l_b + "<\/b>: " + rt.l + "<\/span><span><b>C<\/b>: " + rt.c + "<\/span>" + p) : n.idhtml(it("coursval-"), "<span>" + rt.c + "<\/span>" + p) : n.idhtml(it("coursval-"), '<span class="quote_' + (rt.c >= 0 ? "up" : "down") + 'b">' + rt.c + "%<\/span>")),
                            i.set.indicValues) {
                                for (ht = k.length,
                                r = 1; r < ht; r++)
                                    n.qstxt(it("#infoindic-") + r + " .indicval", ci(k[r].Bars[bt[u]]));
                                if (i.mainChart.type != "perf")
                                    for (ht = i.mainChart.indicators.length,
                                    r = 0; r < ht; r++)
                                        ct = i.mainChart.indicators[r].type,
                                        ct != "evt" && ct != "actu" && ct != "lineard" && b[r + 1] != null && n.idhtml(it("val-") + r, ci(b[r + 1][bt[u]]))
                            }
                        } else
                            u - i.paddingLeft > ti.length - 1 ? (ei = Math.round((u - i.paddingLeft - (ti.length - 1)) / k[0].PxPointX),
                            gt = ee(ei),
                            ft = i.chartPeriod >= 0 ? f(gt, 1) : s(gt)) : ft = ws;
                        o.fillStyle = ve(i.set.reticColor);
                        ni = Math.round(o.measureText(ft).width);
                        o.fillText(ft, Math.round(ut + (st - ni) / 2), h.height - 6);
                        o.fillText(ft, Math.round(ut + (st - ni) / 2), 12 + v);
                        l = 0;
                        et = 0;
                        c == 0 ? (l = i.set.semilog && !i.isCompare ? eh(e - i.paddingTop, i.logData) : k[0].V0 - (e - i.paddingTop) / k[0].PxPointY,
                        et = (l - d.QuoteTab[d.QuoteTab.length - 1].c) * 100 / d.QuoteTab[d.QuoteTab.length - 1].c,
                        et = et > 0 ? "+" + et.toFixed(1) + "%" : et.toFixed(1) + "%",
                        i.isCompare && (l = (l - d.QuoteTab[nt.minX].c) * 100 / d.QuoteTab[nt.minX].c)) : l = (k[c].V0 - e + k[c].RealY) / k[c].PxPointY;
                        vt = i.set.yaxis ? 2 : h.width - i.paddingRight + 5;
                        isNaN(l) || (l >= 1e5 && (l = l / 1e3),
                        c == 0 ? (o.fillText(RODTL.formatDecimales(l), vt, e - 3 + v),
                        i.mainChart.type != "perf" && o.fillText(et, vt - 2, e + 11 + v)) : o.fillText(RODTL.formatDecimales(l), vt, e + 4 + v))
                    }
                } else
                    o.clearRect(0, 0, h.width, h.height);
                g.activeLayer = sl(e);
                g.activeLayer != null ? (at("n"),
                g.cursorState = !0) : g.cursorState && (g.cursorState = !1,
                at())
            }
        }
        function hu(t) {
            var i, o, l, s, c, h, a, r, u, f, e;
            if (!g.isPinchZoom) {
                if (t.touches && t.touches.length == 2) {
                    g.isPinchZoom = !0;
                    g.distPinchZoom = 0;
                    return
                }
                if (w.cursor != "b") {
                    if (i = t.target,
                    VGP.isPro) {
                        if (i.className == "corner")
                            return;
                        if (i.parentNode != null && i.parentNode.className == "pave")
                            return
                    }
                    if (t.preventDefault(),
                    o = n.gi(it("overlay-")),
                    l = o.getContext("2d"),
                    l.clearRect(0, 0, o.width, o.height),
                    !VGP.noCommand) {
                        c = i.className.replace(" filter1", "");
                        switch (c) {
                        case "closelayericon":
                            t.stopPropagation();
                            s = i.parentNode.id.slice(-1);
                            lr(s);
                            return;
                        case "eodmoveup":
                            t.stopPropagation();
                            dh("up", i);
                            return;
                        case "eodmovedown":
                            t.stopPropagation();
                            dh("down", i);
                            return;
                        case "zoompanel":
                            t.stopPropagation();
                            gl(i.parentNode.id.slice(-1));
                            return;
                        case "eod_param":
                        case "mci-p":
                            g.flagSave = !0;
                            ii();
                            h = c == "mci-p" ? i.parentNode.getAttribute("data-name").split("_") : i.getAttribute("data-name").split("_");
                            a = h.length > 1 ? h[1] : null;
                            kh(a, h[0], null);
                            return;
                        case "paramlayericon":
                            g.flagSave = !0;
                            ii();
                            s = i.parentNode.id.slice(-1);
                            kh(null, null, s);
                            return
                        }
                    }
                    if (VGP.isPro && (tt.doc.classList.contains("eod_active") || (n.qsarclass(".eod_container", "eod_active"),
                    tt.doc.classList.add("eod_active"),
                    callUpdateInfosFull(w.symbol))),
                    t.type != "touchstart" || w.cursor == "t")
                        if (g.lineNumber != 999) {
                            u = RODTL.offset(n.gi(it("rodgraph-")));
                            r = RODTL.pointerEventToXY(t);
                            var f = parseInt(r.x - u.left)
                              , e = parseInt(r.y - u.top)
                              , v = kr(f, e);
                            ri(g.lineNumber, v)
                        } else {
                            if (g.cursorState) {
                                g.moveLayer = !0;
                                return
                            }
                            if (r = RODTL.pointerEventToXY(t),
                            u = RODTL.offset(n.gi(it("rodgraph-"))),
                            f = parseInt(r.x - u.left),
                            e = parseInt(r.y - u.top),
                            w.mainChart.type != "perf" && e > w.paddingTop && (!w.set.yaxis && f > w.widthGraph - w.paddingRight || w.set.yaxis && f < w.paddingLeft)) {
                                g.isVerticalZoom = !0;
                                g.moveZoomY = e;
                                return
                            }
                            at("m");
                            g.moveZoomX = f;
                            g.moveZoomY = e;
                            g.initMaxY = nt.maxY;
                            g.initMinY = nt.minY;
                            g.initViewBegin = nt.minX;
                            g.initViewEnd = nt.maxX
                        }
                }
            }
        }
        function cu(t) {
            var r, i, u;
            if (g.isPinchZoom) {
                g.isPinchZoom = !1;
                return
            }
            if (g.isVerticalZoom) {
                g.isVerticalZoom = !1;
                return
            }
            if (r = t.target.className,
            r != "corner") {
                if (t.type == "touchend" && (i = n.gi(it("overlay-")),
                u = i.getContext("2d"),
                u.clearRect(0, 0, i.width, i.height)),
                t.type == "touchend" && !w.mainChart.typedef.nolinearX) {
                    var f = t.touches[0] || t.changedTouches[0]
                      , e = RODTL.offset(n.gi(it("rodgraph-")))
                      , o = parseInt(f.pageX - e.left)
                      , s = parseInt(f.pageY - e.top);
                    if (g.lineNumber = df(o, s, kr(o, s)),
                    g.lineNumber != 999) {
                        ri(g.lineNumber, wi(t));
                        return
                    }
                }
                g.moveLayer = !1;
                g.activeLayer = null;
                g.moveZoomX = 0;
                g.moveZoomY = 0;
                at()
            }
        }
        function pc(t, i) {
            var r = k[i].RealY - t, f, u;
            if (!(k[i].HeightPx + r < 30) && !(k[i - 1].HeightPx - r < 30)) {
                k[i].Move(t, r, i);
                k[i].DrawEncadre();
                n.idcss(it("infoindic-") + i, "top", t + 5 + "px");
                k[i - 1].Move(k[i - 1].RealY, -r, i - 1);
                k[i - 1].DrawEncadre();
                i == 1 ? (f = n.gi(it("trace-")),
                u = n.gi(it("tindic-") + "1")) : (f = n.gi(it("tindic-") + (i - 1)),
                u = n.gi(it("tindic-") + i));
                f.height = f.height - r;
                u.height = u.height + r;
                u.style.top = t + "px";
                lt(i);
                return
            }
        }
        function wc(n, t) {
            var f = g.initViewBegin, o = t - g.moveZoomY, r = o / k[0].PxPointY, i, u, e;
            (Math.abs(o) < 7 && (r = 0),
            i = Math.round((n - g.moveZoomX) / k[0].PxPointX),
            i != 0 || r != 0) && (u = !0,
            e = !0,
            (w.mainChart.type == "perf" || w.set.semilog || t > k[0].RealY + k[0].HeightPx) && (r = 0),
            r == 0 && (e = !1),
            nt.maxY = g.initMaxY + r,
            nt.minY = g.initMinY + r,
            f - nt.minX == i && (u = !1),
            ti.length <= 200 && i < 0 && (u = !1),
            f - i < 0 && (u = !1),
            u && (nt.minX = f - i,
            nt.maxX = g.initViewEnd - i),
            u || e) && ft(!0)
        }
        function df(n, t, i) {
            var o;
            if (w.hideTrace || k[i] == null || k[i].lines == null || k[i].lines.length == 0)
                return at(),
                999;
            for (var u = t, e = n - w.paddingLeft, l = k[i].lines.length, r, f = 0; f < l; f++) {
                r = k[i].lines[f];
                switch (r.type) {
                case "c":
                    if (ga(e, u, r))
                        return at("p"),
                        f;
                    break;
                case "t":
                case "wf":
                    if (tv(e, u, r, i))
                        return at("p"),
                        f;
                    break;
                case "ewi":
                case "ewc":
                    if (nv(e, u, r, i))
                        return at("p"),
                        f;
                    break;
                case "arrup":
                case "arrdw":
                case "arrrt":
                case "arrlt":
                case "sm1":
                case "sm2":
                case "sm3":
                    if (da(e, u, r))
                        return at("p"),
                        f;
                    break;
                default:
                    if (e >= Math.min(r.RealX0, r.RealX1) - 2 && e < Math.max(r.RealX0, r.RealX1) + 2)
                        switch (r.type) {
                        case "r":
                        case "rf":
                        case "m":
                            if (o = r.type == "rf" ? Math.ceil(r.RealY0 + (r.RealY0 - r.RealY1) * .618) : r.RealY0,
                            u < o + 4 && u > o - 4 || u < r.RealY1 + 4 && u > r.RealY1 - 4 || e >= r.RealX0 - 2 && e <= r.RealX0 + 2 || e >= r.RealX1 - 2 && e <= r.RealX1 + 2)
                                return at("p"),
                                f;
                            break;
                        case "sr":
                        case "h":
                            if (u > r.RealY0 - 3 && u < r.RealY0 + 3)
                                return at("p"),
                                f;
                            break;
                        case "mv":
                            if (u > Math.min(r.RealY0, r.RealY1) - 3 && u < Math.max(r.RealY0, r.RealY1) + 3)
                                return at("p"),
                                f;
                            break;
                        default:
                            var s = ps(r, e, u)
                              , h = e - s.x
                              , c = u - s.y
                              , a = Math.abs(Math.sqrt(h * h + c * c));
                            if (a < 5)
                                return at("p"),
                                f
                        }
                }
            }
            return at(),
            999
        }
        function gf(n) {
            if (d == null || ti.length == 0 || ti[ti.length - 1].i < 25 || nt.maxX - nt.minX < 25)
                return !0;
            var t = nt.maxX - nt.minX
              , i = Math.round((-75e-7 * t * t + .025 * t + 7.8) * n);
            nt.minX = nt.minX + i;
            lu();
            ft(!0, !1)
        }
        function ne(n) {
            var r, t, i;
            if (d == null)
                return !0;
            if (r = nt.maxX - nt.minX,
            t = Math.round((-75e-7 * r * r + .025 * r + 7.8) * n),
            w.mainChart.typedef.nolinearX)
                nt.minX > 0 ? (nt.minX = nt.minX - t,
                nt.minX < 0 && (nt.minX = 0)) : nt.maxX = nt.maxX + t,
                nt.maxX > nt.maxNL && nt.minX == 0 && (nt.maxX = nt.maxNL);
            else if (nt.minX > 0)
                nt.minX = nt.minX - t,
                nt.minX < 0 && (nt.minX = 0);
            else if (nt.maxX = nt.maxX + t,
            nt.maxX > d.QuoteTab.length - 1)
                return nt.maxX = d.QuoteTab.length - 1,
                lu(),
                w.histoLength != 1 || w.set.noVeilleIntra || (i = d.qv.c,
                i > nt.maxY && (nt.maxY = i),
                i < nt.minY && (nt.minY = i)),
                ft(!0, !1),
                !0;
            lu();
            ft(!0, !1)
        }
        function ih(n, t, i) {
            var u = w
              , r = new XMLHttpRequest;
            r.open("GET", VGP.urlWS + "TraceGetSymbol?userid=" + VGP.userID + "&symbol=" + u.symbol, !0);
            r.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            r.onload = function() {
                var f, e;
                if (r.status >= 200 && r.status < 400) {
                    if (f = JSON.parse(r.responseText),
                    f != null && f != "") {
                        e = f.substring(0, 1) == '"' ? f.substr(1, f.length - 2) : f;
                        try {
                            k[0].lines = JSON.parse(e);
                            ct(w.symbol);
                            t && ft()
                        } catch (o) {
                            k[0].lines = [];
                            localStorage.removeItem(u.symbol);
                            le();
                            delete VGP.drawings[u.symbol]
                        }
                    }
                    n && ff(i)
                }
            }
            ;
            r.send()
        }
        function lu() {
            var i = 0, r = 999999, n, u = 0, f = nt.minX, e = nt.maxX, t = d.QuoteTab;
            for (w.mainChart.typedef.nolinearX && (f = 0,
            e = t.length - 1),
            n = f; n <= e; n++)
                t[n] != null && (u == 0 && (u = t[n].c),
                t[n].h > i && (i = t[n].h),
                t[n].l < r && (r = d.QuoteTab[n].l));
            nt.maxY = i;
            nt.minY = r;
            w.isCompare && ef(i, r, u, f, e)
        }
        function au(n) {
            var t = n.wheelDelta || -n.detail;
            t > 0 ? gf(1) : ne(1);
            n.preventDefault()
        }
        function ft(n, t) {
            br();
            var i, r = k.length;
            if (w.mainChart.typedef.nolinearX) {
                k[0].DrawEncadre();
                cf(t);
                return
            }
            for (i = 0; i < r; i++)
                k[i].DrawEncadre();
            for (sf(d, !1, n),
            i = 1; i < r; i++)
                hf(k[i]);
            ot()
        }
        function lt(n, t) {
            if (n == 0) {
                br();
                k[0].DrawEncadre();
                w.mainChart.typedef.nolinearX ? cf(t) : (sf(d),
                ot());
                return
            }
            k[n - 1].DrawEncadre();
            k[n].DrawEncadre();
            n - 1 == 0 && sf(d, !0);
            hf(k[n - 1]);
            hf(k[n]);
            ot()
        }
        function ot() {
            var s = ki.trades, t;
            if (!VGP.chartSimple) {
                for (var u = d.QuoteTab[nt.minX].d, f = nt.maxX > d.QuoteTab.length - 1 ? ee() : d.QuoteTab[nt.maxX].d, h = k.length, e, c = [], r, o, i = 0; i < h; i++)
                    o = i == 0 ? n.gi(it("trace-")) : n.gi(it("tindic-") + i),
                    r = o.getContext("2d"),
                    r.clearRect(0, 0, o.width, o.height),
                    c[i] = r;
                if (w.mainChart.type != "perf" && !w.hideTrace) {
                    for (i = 0; i < h; i++)
                        if (k[i].lines != null)
                            for (r = c[i],
                            len = k[i].lines.length,
                            e = 0; e < len; e++)
                                if (t = k[i].lines[e],
                                t != null)
                                    switch (t.type) {
                                    case "fa":
                                        t.x0 < f && fl(r, t, u, i);
                                        break;
                                    case "t":
                                        t.x0 < f && rl(r, t, u, i);
                                        break;
                                    case "ewi":
                                    case "ewc":
                                        il(r, t, u, i);
                                        break;
                                    case "gg":
                                    case "ga":
                                    case "ff":
                                        t.x0 < f && te(r, t, u, i);
                                        break;
                                    case "arrup":
                                    case "arrdw":
                                    case "arrlt":
                                    case "arrrt":
                                    case "sm1":
                                    case "sm2":
                                    case "sm3":
                                        dc(r, t, u, i);
                                        break;
                                    case "af":
                                    case "cf":
                                    case "an":
                                    case "c":
                                    case "ef":
                                        te(r, t, u, i);
                                        break;
                                    case "wf":
                                        ul(r, t, u, i);
                                        break;
                                    case "sr":
                                        t.x0 < f && gc(r, t, u, i);
                                        break;
                                    case "a":
                                        t.x0 < f && tl(r, t, u, i);
                                        break;
                                    case "v":
                                        t.x0 < f && kc(r, t, u, i);
                                        break;
                                    case "rf":
                                    case "r":
                                    case "m":
                                        (t.x1 > u || t.x0 > u) && (t.x1 < f || t.x0 < f) && nl(r, t, u, f, i);
                                        break;
                                    case "h":
                                    case "mg":
                                        bc(r, t, i, i);
                                        break;
                                    default:
                                        t.x1 <= u && t.x0 <= u || t.x0 > f ? (t.RealX0 = 0,
                                        t.RealX1 = 0) : te(r, t, u, i)
                                    }
                    s != null && s.length != 0 && sh(s)
                }
            }
        }
        function li(n, t, i, r, u) {
            n.RealX0 = t;
            n.RealY0 = i;
            n.RealX1 = r;
            n.RealY1 = u
        }
        function bc(n, t, i) {
            var r, u = k[i], f;
            r = w.set.semilog && w.logData != null ? st(t.y0, w.logData) : i == 0 ? Math.round((u.V0 - t.y0) * u.PxPointY) : Math.round(u.V0 - t.y0 * u.PxPointY);
            r > 0 && r < u.HeightPx && wr(n, {
                my: r,
                y: t.y0
            }, t.style, t.width, t.color, t.type == "mg" ? 0 : t.fontSize, t.type);
            f = u.RealY;
            li(t, 0, r + f, w.innerWidth, r + f)
        }
        function kc(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r);
            tf(n, u, t.style, t.width, t.color, t.fontSize);
            li(t, u.mx, 0, u.mx, u.my)
        }
        function dc(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), f;
            if (u.mx < 0 && (u.mx = 0),
            u.my > 0 && u.my < k[r].HeightPx)
                switch (t.type) {
                case "arrup":
                case "arrdw":
                case "arrrt":
                case "arrlt":
                    si(n, u, t.color, t.type, t.color2, t.width);
                    break;
                case "sm1":
                case "sm2":
                case "sm3":
                    pr(n, u, t.color, t.type, t.width)
                }
            f = k[r].RealY;
            li(t, u.mx, u.my + f, u.mx, u.my + f)
        }
        function gc(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), f;
            u.mx < 0 && (u.mx = 0);
            u.my > 0 && u.my < k[r].HeightPx && nf(n, u, t.style, t.width, t.color, t.fontSize);
            f = k[r].RealY;
            li(t, u.mx, u.my + f, w.innerWidth, u.my + f)
        }
        function nl(n, t, i, r, u) {
            var f = new wt(t.x0,t.y0,i,u), e = new wt(t.x1,t.y1,i,u), c = f.my, l = e.my, o = f.mx, s = e.mx, h;
            (t.x0 < i && (o = f.mx = 0),
            t.x1 > r && (s = e.mx = w.innerWidth),
            t.x0 > r && (o = f.mx = w.innerWidth),
            t.x1 < i && (s = e.mx = 0),
            h = k[u].RealY,
            li(t, o, c + h, s, l + h),
            o != 0 || s != 0) && (t.type == "rf" && ue(n, t.color, t.color2, f, e, t.width, t.fontSize),
            (t.type == "r" || t.type == "m") && rf(n, t.color, t.color2, f, e, t.type, t.h, t.width, t.style, t.fontSize))
        }
        function tl(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), o = unescape(t.h), f, e;
            if (n.save(),
            n.fillStyle = t.color,
            n.font = (t.fontSize != null ? t.fontSize : 12) + "px Arial",
            f = n.measureText(o).width,
            u.mx + f < 0) {
                li(t, 0, 0, 0, 0);
                n.restore();
                return
            }
            n.fillText(o, u.mx, u.my + 4);
            n.restore();
            e = k[r].RealY;
            li(t, u.mx, u.my + e, u.mx + f, u.my + e)
        }
        function te(n, t, i, r) {
            var f = new wt(t.x0,t.y0,i,r), u = new wt(t.x1,t.y1,i,r), e, o;
            switch (t.type) {
            case "ff":
                pu(n, t.color, t.style, t.width, f, u, t.fontSize);
                break;
            case "ga":
                wu(n, t.color, t.style, t.width, f, u, t.fontSize);
                break;
            case "gg":
                bu(n, t.color, t.style, t.width, f, u);
                break;
            case "cf":
                vu(n, t.color, t.style, t.width, f, u, r, t.fontSize);
                break;
            case "af":
                du(n, t.color, t.style, t.width, f, u, t.fontSize);
                break;
            case "an":
                u.mx = ku(n, t.color, t.style, t.width, f, u, t.h, t.fontSize);
                break;
            case "c":
                gu(n, t.color, t.style, t.width, f, u, t.color2);
                break;
            default:
                e = t.h;
                t.type == "p" && (e = Math.round(t.h * k[r].PxPointY));
                or(n, t.type, t.color, t.style, t.width, e, f, u, t.color2, t.fontSize)
            }
            o = k[r].RealY;
            li(t, f.mx, f.my + o, u.mx, u.my + o)
        }
        function il(n, t, i, r) {
            for (var f = [], e = t.h.length, u = 0; u < e; u++)
                f.push(new wt(t.h[u].x,t.h[u].y,i,r));
            ie(n, f, t.color, t.width, t.style, t.fontSize);
            t.h = f
        }
        function rl(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), f = new wt(t.x1,t.y1,i,r), o = new wt(t.h.C.x,t.h.C.y,i,r), e;
            yu(n, u, f, o, t.color, t.color2, t.width);
            e = k[r].RealY;
            li(t, u.mx, u.my + e, f.mx, f.my + e);
            t.h.C = o
        }
        function ul(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), f = new wt(t.x1,t.y1,i,r), o = new wt(t.h.C.x,t.h.C.y,i,r), e;
            ru(n, u, f, o, t.color, t.color2, t.width, t.fontSize);
            e = k[r].RealY;
            li(t, u.mx, u.my + e, f.mx, f.my + e);
            t.h.C = o
        }
        function fl(n, t, i, r) {
            var u = new wt(t.x0,t.y0,i,r), e = new wt(t.x1,t.y1,i,r), o = new wt(t.h.B.x,t.h.B.y,i,r), s = new wt(t.h.C.x,t.h.C.y,i,r), f;
            yr(n, u, o, s, t.color, t.color2, t.width);
            f = k[r].RealY;
            li(t, u.mx, u.my + f, e.mx, e.my + f);
            t.h.B = o;
            t.h.C = s
        }
        function el(n, t, i) {
            var f, r, u, e;
            if (n.save(),
            f = w.paddingLeft,
            t != null) {
                for (e = t.id.param2 * t.et * k[i].PxPointY,
                r = 1; r < 4; r++)
                    if (!t.id["v" + r]) {
                        n.strokeStyle = r == 1 ? t.id.color : t.id["color" + r];
                        switch (r) {
                        case 1:
                            u = 0;
                            break;
                        case 2:
                            u = -e;
                            break;
                        case 3:
                            u = e
                        }
                        n.lineWidth = t.id["w" + r] != null ? t.id["w" + r] : 1;
                        n.beginPath();
                        n.moveTo(t.p0.mx + f, t.p0.my + u);
                        n.lineTo(t.p1.mx + f, t.p1.my + u);
                        n.stroke()
                    }
                n.restore()
            }
        }
        function vu(n, t, i, r, u, f, e, o) {
            var l, h, c, s, a;
            for (n.save(),
            n.strokeStyle = t,
            n.lineWidth = 2,
            n.beginPath(),
            n.moveTo(u.mx, u.my),
            n.lineTo(f.mx, f.my),
            n.stroke(),
            l = f.mx - u.mx,
            h = [0, 1, 2, 3, 5, 8, 13, 21, 34, 55],
            i != null && r != null ? (n.lineWidth = r,
            yt(n, i)) : n.lineWidth = 1,
            n.fillStyle = t,
            n.font = (o != null ? o : 12) + "px Arial",
            n.beginPath(),
            a = h.length,
            s = 0; s < a; s++)
                c = u.mx + l * h[s] + .5,
                n.moveTo(c, 0),
                n.lineTo(c, k[e].HeightPx),
                n.fillText(h[s], c + 2, k[e].HeightPx - 3);
            n.stroke();
            n.restore()
        }
        function yr(n, t, i, u, f, e, o) {
            var y, p, h, c;
            n.save();
            n.strokeStyle = f;
            n.beginPath();
            var l = i.mx + Math.round((u.mx - i.mx) / 2)
              , v = i.my + Math.round((u.my - i.my) / 2)
              , a = (t.my - v) / (l - t.mx)
              , s = 3e3;
            return l < t.mx && (s = -s),
            y = t.mx + s,
            p = t.my - s * a,
            n.lineWidth = o != null ? o : 1,
            n.moveTo(i.mx + s, i.my - s * a),
            n.lineTo(i.mx, i.my),
            n.lineTo(u.mx, u.my),
            n.lineTo(u.mx + s, u.my - s * a),
            n.fillStyle = r(e, .15),
            n.fill(),
            n.moveTo(t.mx, t.my),
            n.lineTo(y, p),
            n.stroke(),
            n.setLineDash && n.setLineDash([2]),
            n.beginPath(),
            h = i.mx + Math.round((l - i.mx) / 2),
            c = i.my + Math.round((v - i.my) / 2),
            n.moveTo(h, c),
            n.lineTo(h + s, c - s * a),
            h = l + Math.round((u.mx - l) / 2),
            c = v + Math.round((u.my - v) / 2),
            n.moveTo(h, c),
            n.lineTo(h + s, c - s * a),
            n.stroke(),
            n.restore(),
            {
                Dx: y,
                Dy: p
            }
        }
        function pr(n, t, i, r, u) {
            var f = 10 + 2 * u, h = 2, o = 4 + u, e, s;
            n.save();
            n.strokeStyle = i;
            n.beginPath();
            n.arc(t.mx, t.my, f, 0, 2 * Math.PI, !1);
            n.lineWidth = 2;
            n.stroke();
            n.beginPath();
            e = t.mx - o;
            s = t.my - o;
            n.arc(e, s, h, 0, 2 * Math.PI, !1);
            e = t.mx + o;
            n.arc(e, s, h, 0, 2 * Math.PI, !1);
            n.fillStyle = i;
            n.fill();
            n.beginPath();
            r == "sm1" ? n.arc(t.mx, t.my, f - 7, 0, Math.PI, !1) : r == "sm2" ? n.arc(t.mx, t.my + f / 2, f - 7, Math.PI, 2 * Math.PI, !1) : r == "sm3" && (n.moveTo(t.mx - f / 2, t.my + f / 4),
            n.lineTo(t.mx + f / 2, t.my + f / 4));
            n.stroke();
            n.restore()
        }
        function si(n, t, i, r, u, f) {
            var e, o;
            switch (r) {
            case "arrup":
            case "arrlt":
                e = 8.5 + f;
                o = 15.5 + 2 * f;
                break;
            case "arrdw":
            case "arrrt":
                e = -8.5 - f;
                o = -15.5 - 2 * f
            }
            n.save();
            n.strokeStyle = i;
            n.beginPath();
            n.moveTo(t.mx, t.my);
            r == "arrlt" || r == "arrrt" ? (n.lineTo(t.mx + e, t.my - 6.5 - f),
            n.lineTo(t.mx + e, t.my - 1.5 - f),
            n.lineTo(t.mx + o, t.my - 1.5 - f),
            n.lineTo(t.mx + o, t.my + 1.5 + f),
            n.lineTo(t.mx + e, t.my + 1.5 + f),
            n.lineTo(t.mx + e, t.my + 6.5 + f),
            n.lineTo(t.mx, t.my)) : (n.lineTo(t.mx - 6.5 - f, t.my + e),
            n.lineTo(t.mx - 1.5 - f, t.my + e),
            n.lineTo(t.mx - 1.5 - f, t.my + o),
            n.lineTo(t.mx + 1.5 + f, t.my + o),
            n.lineTo(t.mx + 1.5 + f, t.my + e),
            n.lineTo(t.mx + 6.5 + f, t.my + e),
            n.lineTo(t.mx, t.my));
            n.fillStyle = u;
            n.fill();
            n.stroke();
            n.restore()
        }
        function ie(n, t, i, r, u, f) {
            n.save();
            n.strokeStyle = i;
            n.fillStyle = i;
            n.font = (f != null ? f : 14) + "px Arial";
            u != null && r != null ? (n.lineWidth = r,
            yt(n, u)) : n.lineWidth = 1;
            n.beginPath();
            n.moveTo(t[0].mx, t[0].my);
            for (var h = t.length, o = [], s, o = t.length == 6 ? ["1", "2", "3", "4", "5"] : ["a", "b", "c"], e = 1; e < h; e++)
                n.lineTo(t[e].mx, t[e].my),
                s = t[e].my < t[e - 1].my ? -7 : 16,
                n.fillText(o[e - 1], t[e].mx - 4, t[e].my + s);
            n.stroke();
            n.restore()
        }
        function yu(n, t, i, u, f, e, o) {
            n.strokeStyle = f;
            n.lineWidth = o != null ? o : 1;
            n.beginPath();
            n.moveTo(t.mx, t.my);
            n.lineTo(i.mx, i.my);
            n.lineTo(u.mx, u.my);
            n.lineTo(t.mx, t.my);
            n.stroke();
            e != null && (n.fillStyle = r(e, .15),
            n.fill())
        }
        function pu(n, t, i, r, u, f, e) {
            var w;
            n.save();
            n.strokeStyle = t;
            n.lineWidth = 2;
            n.beginPath();
            n.moveTo(u.mx, u.my);
            n.lineTo(f.mx, f.my);
            n.stroke();
            i != null && r != null ? (n.lineWidth = r,
            yt(n, i)) : n.lineWidth = 1;
            var y = u.my - f.my, s, h, l = 1500, a = 200, v = [.25, .382, .5, .618, .75], p = ["0.25", "0.382", "0.5", "0.618", "0.75"], c, o;
            for (n.fillStyle = t,
            n.font = (e != null ? e : 12) + "px Arial",
            n.beginPath(),
            w = v.length,
            c = 0; c < w; c++)
                o = Math.atan(y / v[c] / Math.abs(u.mx - f.mx)),
                s = u.my - l * Math.sin(o),
                h = u.mx + l * Math.cos(o),
                n.moveTo(u.mx, u.my),
                n.lineTo(h, s),
                s = u.my - a * Math.sin(o),
                h = u.mx + a * Math.cos(o),
                n.fillText(p[c], h, s),
                o = Math.atan(y * v[c] / Math.abs(u.mx - f.mx)),
                s = u.my - l * Math.sin(o),
                h = u.mx + l * Math.cos(o),
                n.moveTo(u.mx, u.my),
                n.lineTo(h, s),
                s = u.my - a * Math.sin(o),
                h = u.mx + a * Math.cos(o),
                n.fillText(p[c], h, s);
            n.stroke();
            n.restore()
        }
        function wu(n, t, i, r, u, f, e) {
            var y;
            n.save();
            n.strokeStyle = t;
            n.lineWidth = 2;
            n.beginPath();
            n.moveTo(u.mx, u.my);
            n.lineTo(f.mx, f.my);
            n.stroke();
            i != null && r != null ? (n.lineWidth = r,
            yt(n, i)) : n.lineWidth = 1;
            var p = u.my - f.my, h, c, l = 1500, a = 180, v = [8, 4, 3, 2, 1, .5, .333, .25, .125], w = ["8x1", "4x1", "3x1", "2x1", "1x1", "1x2", "1x3", "1x4", "1x8"], o, s;
            for (n.fillStyle = t,
            n.font = (e != null ? e : 12) + "px Arial",
            n.beginPath(),
            y = v.length,
            o = 0; o < y; o++)
                s = Math.atan(p / v[o] / Math.abs(u.mx - f.mx)),
                h = u.my - l * Math.sin(s),
                c = u.mx + l * Math.cos(s),
                n.moveTo(u.mx, u.my),
                n.lineTo(c, h),
                h = u.my - a * Math.sin(s),
                c = u.mx + a * Math.cos(s),
                n.fillText(w[o], c, h);
            n.stroke();
            n.restore()
        }
        function bu(n, t, i, r, u, f) {
            n.save();
            n.strokeStyle = t;
            n.lineWidth = 2;
            n.beginPath();
            n.moveTo(u.mx, u.my);
            n.lineTo(f.mx, f.my);
            n.stroke();
            i != null && r != null ? (n.lineWidth = r,
            yt(n, i)) : n.lineWidth = 1;
            var s = (u.my - f.my) / Math.abs(u.mx - f.mx), c = u.mx - f.mx > 0 ? -1 : 1, l = u.my - s * 1500, h = u.mx + c * 1500, o = (u.my - f.my) * 2, e, a = u.my + s * 1500;
            for (n.beginPath(),
            e = -20; e < 20; e++)
                n.moveTo(u.mx, u.my + o * e),
                n.lineTo(h, l + o * e),
                n.moveTo(u.mx, u.my + o * e),
                n.lineTo(h, a + o * e);
            n.stroke();
            n.restore()
        }
        function ku(n, t, i, r, u, f, e, o) {
            var h, s;
            return n.save(),
            n.strokeStyle = t,
            n.beginPath(),
            n.moveTo(u.mx + 50, u.my + .5),
            n.lineTo(u.mx, u.my + .5),
            n.stroke(),
            h = e >= 0 ? !1 : !0,
            n.beginPath(),
            n.arc(u.mx, u.my, 30, -e, 0, h),
            n.stroke(),
            s = (u.my - f.my) / Math.tan(e),
            i != null && r != null ? (n.lineWidth = r,
            yt(n, i)) : n.lineWidth = 1,
            n.beginPath(),
            n.moveTo(u.mx, u.my),
            n.lineTo(u.mx + s, f.my),
            n.stroke(),
            n.fillStyle = t,
            n.font = (o != null ? o : 12) + "px Arial",
            n.fillText((e * 180 / Math.PI).toFixed(0) + "°", u.mx + 55, u.my),
            n.restore(),
            u.mx + s
        }
        function du(n, t, i, u, f, e, o) {
            var c, y, h, s, p;
            n.save();
            var a = Math.abs(f.mx - e.mx)
              , v = Math.abs(f.my - e.my)
              , l = Math.sqrt(a * a + v * v);
            for (n.strokeStyle = t,
            n.beginPath(),
            n.moveTo(f.mx, f.my),
            n.lineTo(e.mx, e.my),
            n.stroke(),
            i != null && u != null ? (n.lineWidth = u,
            yt(n, i)) : n.lineWidth = 1,
            n.strokeStyle = r(t, .7),
            n.fillStyle = t,
            n.font = (o != null ? o : 12) + "px Arial",
            c = !0,
            f.y > e.y && (c = !1),
            h = [.236, .5, .786, 1, 1.618, 2.618],
            p = h.length,
            s = 0; s < p; s++)
                n.beginPath(),
                n.arc(f.mx, f.my, l * h[s], 0, Math.PI, c),
                n.stroke(),
                y = c ? f.my - l * h[s] - 2 : f.my + l * h[s] + 10,
                n.fillText(h[s].toFixed(3), f.mx - 15, y);
            n.restore()
        }
        function gu(n, t, i, u, f, e, o) {
            n.save();
            n.beginPath();
            var s = Math.abs(f.mx - e.mx)
              , h = Math.abs(f.my - e.my);
            n.translate(f.mx - s, f.my - h);
            n.scale(s, h);
            n.arc(1, 1, 1, 0, 2 * Math.PI, !1);
            n.restore();
            n.save();
            n.strokeStyle = t;
            i != null && u != null ? (n.lineWidth = u,
            yt(n, i)) : n.lineWidth = 1;
            n.stroke();
            o != null && (n.fillStyle = r(o, .15),
            n.fill());
            n.restore()
        }
        function nf(n, t, i, r, u, f) {
            var e = .5;
            n.strokeStyle = u;
            n.save();
            i != null && r != null ? (n.lineWidth = r,
            r % 2 == 0 && (e = 0),
            yt(n, i)) : n.lineWidth = 1;
            n.beginPath();
            n.moveTo(t.mx, t.my + e);
            n.lineTo(w.innerWidth, t.my + e);
            n.stroke();
            n.fillStyle = u;
            n.font = (f != null ? f : 12) + "px Arial";
            n.fillText(t.y.toFixed(2), t.mx + 5, t.my - 2);
            n.restore()
        }
        function tf(n, t, i, r, u, e) {
            var h = .5, o;
            n.strokeStyle = u;
            n.save();
            i != null && r != null ? (n.lineWidth = r,
            r % 2 == 0 && (h = 0),
            yt(n, i)) : n.lineWidth = 1;
            n.beginPath();
            n.moveTo(t.mx + h, 0);
            n.lineTo(t.mx + h, k[0].HeightPx);
            n.stroke();
            n.fillStyle = u;
            n.font = (e != null ? e : 12) + "px Arial";
            o = t.mx + 3;
            w.innerWidth - t.mx < 60 && (o = t.mx - 60);
            w.chartPeriod < 0 ? n.fillText(s(t.x), o, k[0].HeightPx - 2) : n.fillText(f(t.x, 2), o, k[0].HeightPx - 2);
            n.restore()
        }
        function wr(n, t, i, r, u, f, e) {
            var c = .5, v, a;
            if (n.strokeStyle = u,
            n.save(),
            i != null && r != null ? (n.lineWidth = r,
            r % 2 == 0 && (c = 0),
            yt(n, i)) : n.lineWidth = 1,
            n.beginPath(),
            n.moveTo(0, t.my + c),
            n.lineTo(w.innerWidth, t.my + c),
            n.stroke(),
            n.font = (f != null ? f : 12) + "px Arial",
            f != 0 && (n.fillStyle = u,
            v = t.y,
            n.fillText(v.toFixed(2), 5, t.my - 4)),
            e == "mg") {
                n.font = "12px Arial";
                var y = t.y, o = 0, s = 0, h, l = nt.maxX;
                for (l >= d.QuoteTab.length && (l = d.QuoteTab.length - 1),
                h = nt.minX; h <= l; h++)
                    d.QuoteTab[h].c >= y ? o++ : s++;
                a = f != 0 ? 70 : 5;
                n.fillStyle = "#fe0000";
                n.fillText((s * 100 / (o + s)).toFixed(0) + "%", a, t.my + 15);
                n.fillStyle = "#008000";
                n.fillText((o * 100 / (o + s)).toFixed(0) + "%", a, t.my - 4);
                n.fillStyle = "rgba(0,191,0,0.1)";
                n.fillRect(0, 0, w.innerWidth, t.my);
                n.fillStyle = "rgba(255,0,0,0.1)";
                n.fillRect(0, t.my, w.innerWidth, 9999)
            }
            n.restore()
        }
        function re(n, t, i, r, u) {
            n.save();
            n.font = (i != null ? i : "12") + "px Arial";
            n.fillStyle = r;
            var f = t.mx + n.measureText(u).width;
            return n.fillText(u, t.mx, t.my + 4),
            n.restore(),
            Math.round(f)
        }
        function or(n, t, i, u, f, e, o, s, h, c) {
            var l, a, y, p, v;
            if (n.save(),
            yt(n, u),
            n.strokeStyle = i,
            l = .5,
            f == null && (f = 1),
            n.lineWidth = f,
            f % 2 == 0 && (l = 0),
            n.beginPath(),
            (t == "mv" || t == "mh") && (n.font = (c != null ? c : "12") + "px Arial",
            a = c != null ? parseInt(c) + 2 : 12,
            n.fillStyle = i),
            t == "mv") {
                n.moveTo(s.mx - 10, s.my + .5);
                n.lineTo(s.mx + 10, s.my + .5);
                n.moveTo(s.mx - 10, o.my + .5);
                n.lineTo(s.mx + 10, o.my + .5);
                s.y < o.y ? (n.moveTo(s.mx - 8, s.my - 8),
                n.lineTo(s.mx, s.my),
                n.lineTo(s.mx + 8, s.my - 8)) : (n.moveTo(s.mx - 8, s.my + 8),
                n.lineTo(s.mx, s.my + 1),
                n.lineTo(s.mx + 8, s.my + 8));
                n.moveTo(o.mx + .5, o.my);
                n.lineTo(s.mx + .5, s.my);
                n.stroke();
                y = (s.y - o.y) * 100 / o.y;
                p = (s.y - o.y).toFixed(2);
                v = Math.min(s.my, o.my) + Math.abs((s.my - o.my) / 2);
                n.fillText(p + w.money, s.mx + 5, v);
                n.fillText(y.toFixed(2) + "%", s.mx + 5, v + a + 2);
                n.restore();
                return
            }
            if (t == "mh") {
                n.moveTo(s.mx + .5, o.my - 10);
                n.lineTo(s.mx + .5, o.my + 10);
                n.moveTo(o.mx + .5, o.my - 10);
                n.lineTo(o.mx + .5, o.my + 10);
                n.moveTo(Math.max(s.mx, o.mx) - 8, s.my - 8);
                n.lineTo(Math.max(s.mx, o.mx), s.my);
                n.lineTo(Math.max(s.mx, o.mx) - 8, s.my + 8);
                n.moveTo(o.mx, o.my + .5);
                n.lineTo(s.mx, s.my + .5);
                n.stroke();
                n.fillText(rh(o.x, s.x), Math.min(s.mx, o.mx) + 5, o.my + a);
                n.restore();
                return
            }
            n.moveTo(o.mx, o.my + l);
            n.lineTo(s.mx, s.my + l);
            t == "p" && (n.moveTo(o.mx, o.my + e + l),
            n.lineTo(s.mx, s.my + e + l));
            n.stroke();
            t == "p" && h != null && (n.moveTo(o.mx, o.my + l),
            n.lineTo(s.mx, s.my + l),
            n.lineTo(s.mx, s.my + e + l),
            n.lineTo(o.mx, o.my + e + l),
            n.fillStyle = r(h, .15),
            n.fill());
            t == "ef" && ol(n, o, s, i, h, e, c);
            t == "f" && (e == 1 || e == null ? uh(n, o.mx, s.mx, o.my, s.my, i, f) : uh(n, s.mx, o.mx, s.my, o.my, i, f));
            n.restore()
        }
        function rh(n, t) {
            var i = "";
            return k[0].Bars[0][n] != null && k[0].Bars[0][t] != null && (i = " - " + Math.abs(k[0].Bars[0][t].i - k[0].Bars[0][n].i) + lang.l_barres),
            w.chartPeriod >= 0 ? Math.abs(n - t) + lang.l_jours + i : i != "" ? y(Math.abs((k[0].Bars[0][t].i - k[0].Bars[0][n].i) * parseInt(w.chartPeriod))) + i : y(Math.abs(t - n))
        }
        function ol(n, t, i, u, f, e, o) {
            var p, w, h = w = i.my, b = p = t.my, k = t.mx, d = i.mx, g = t.y, v = i.y, a = Math.max(k, d), l, c, s, y, nt, tt;
            for (e == null && (e = 250),
            k > d && (h = p,
            b = w,
            g = i.y,
            v = t.y),
            n.beginPath(),
            l = b - h,
            (n.lineWidth == 1 || n.lineWidth == 3) && (h += .5),
            c = [0, .236, .382, .5, .618, 1, 1.618, 2.618],
            y = c.length,
            s = 0; s < y; s++)
                n.moveTo(a, h - Math.round(l * c[s])),
                n.lineTo(a + e, h - Math.round(l * c[s]));
            for (n.stroke(),
            f != null && (n.fillStyle = r(f, .15),
            n.fillRect(a, h, e, -Math.round(l * 2.618))),
            h = h - 3,
            n.font = (o != null ? o : 12) + "px Arial",
            n.fillStyle = u,
            s = 0; s < y; s++)
                tt = h - Math.round(l * c[s]),
                nt = v + (v - g) * c[s],
                n.fillText(nt.toFixed(2) + "  (" + (c[s] * 100).toFixed(1) + "%)", a, tt)
        }
        function uh(n, t, i, r, u, f, e) {
            var l = i, a = u, s = 5 + e, o, h, c;
            n.fillStyle = f;
            n.lineWidth = 1;
            n.beginPath();
            o = Math.atan2(u - r, i - t);
            h = s * Math.cos(o) + l;
            c = s * Math.sin(o) + a;
            n.moveTo(h, c);
            o += 1 / 3 * 2 * Math.PI;
            h = s * Math.cos(o) + l;
            c = s * Math.sin(o) + a;
            n.lineTo(h, c);
            o += 1 / 3 * 2 * Math.PI;
            h = s * Math.cos(o) + l;
            c = s * Math.sin(o) + a;
            n.lineTo(h, c);
            n.closePath();
            n.fill()
        }
        function rf(n, t, i, u, f, e, o, s, h, c) {
            var v = u.mx, y = f.mx, p = u.my, d = f.my, tt = .5, l, a, b, k, nt, rt;
            if (s != null ? (n.lineWidth = s,
            s % 2 == 0 && (tt = 0)) : n.lineWidth = 1,
            n.save(),
            yt(n, h),
            n.strokeStyle = t,
            n.beginPath(),
            n.rect(v + tt, p + tt, y - v, d - p),
            n.stroke(),
            e == "m") {
                n.setLineDash && n.setLineDash([1, 1]);
                l = Math.round((y + v) / 2);
                n.moveTo(l + .5, p);
                n.lineTo(l + .5, d);
                var it = Math.min(p, d)
                  , g = Math.max(p, d)
                  , ut = Math.min(v, y);
                o == 0 ? (n.moveTo(l - 5, g - 5),
                n.lineTo(l, g),
                n.lineTo(l + 5, g - 5)) : (n.moveTo(l - 5, it + 5),
                n.lineTo(l, it),
                n.lineTo(l + 5, it + 5));
                a = Math.round((d + p) / 2);
                n.moveTo(v, a + .5);
                n.lineTo(y, a + .5);
                n.lineTo(y - 5, a - 5);
                n.moveTo(y, a);
                n.lineTo(y - 5, a + 5);
                n.moveTo(v + 5, a + 5);
                n.lineTo(v, a);
                n.lineTo(v + 5, a - 5);
                n.stroke();
                b = Math.min(u.y, f.y);
                k = Math.max(u.y, f.y);
                o == 1 ? (nt = (k - b) * 100 / b,
                rt = (k - b).toFixed(2) + w.money + " (" + nt.toFixed(2) + "%)") : (nt = (b - k) * 100 / k,
                rt = (b - k).toFixed(2) + w.money + " (" + nt.toFixed(2) + "%)");
                n.fillStyle = t;
                c == null && (c = 12);
                n.font = c + "px Arial";
                n.fillText(rt, ut + 5, g - 6);
                n.fillText(rh(u.x, f.x), ut + 5, g + 11 + (c - 11))
            }
            i != null && (n.fillStyle = r(i, .15),
            n.fill());
            n.restore()
        }
        function ue(n, t, i, u, f, e, o, s) {
            var k = .5, a, l, h, w, b, nt, tt;
            e != null ? (n.lineWidth = e,
            e % 2 == 0 && (k = 0)) : n.lineWidth = 1;
            var d = u.my
              , c = f.my
              , v = u.mx
              , y = f.mx
              , g = u.y
              , p = f.y;
            for (s && (d = f.my,
            c = u.my,
            g = f.y,
            p = u.y),
            n.strokeStyle = t,
            n.beginPath(),
            a = d - c,
            c = c + k,
            l = [0, .236, .382, .5, .618, .786, 1, 1.618],
            w = l.length,
            h = 0; h < w; h++)
                n.moveTo(v, c + Math.round(a * l[h])),
                n.lineTo(y, c + Math.round(a * l[h]));
            for (n.stroke(),
            b = Math.min(v, y),
            i != null && (n.fillStyle = r(i, .15),
            n.fillRect(b, c, Math.abs(y - v), Math.round(a * 1.618))),
            c = c - 1.5,
            n.font = (o != null ? o : 12) + "px Arial",
            n.fillStyle = t,
            h = 0; h < w; h++)
                nt = c + Math.round(a * l[h]),
                tt = p + (g - p) * l[h],
                n.fillText(tt.toFixed(2) + "  (" + (l[h] * 100).toFixed(1) + "%)", b, nt)
        }
        function wt(n, t, i, r) {
            var u, f, e, o, h, c, s, l;
            if (this.x = n,
            this.y = t,
            u = w,
            f = k[r],
            this.my = r == 0 && u.set.semilog && u.logData != null && t != 0 ? st(t, u.logData) : r == 0 ? Math.round((f.V0 - t) * f.PxPointY) : Math.round(f.V0 - t * f.PxPointY),
            k[0].Bars[0][n] != null)
                this.mx = Math.round(k[0].Bars[0][n].i * k[0].PxPointX + u.padBarCandle);
            else if (o = k[0].Bars[0][0].d,
            n >= i) {
                if (n > o)
                    h = k[0].Bars[0][0].i,
                    c = fh(n - o),
                    this.mx = Math.round((h + c) * k[0].PxPointX + u.padBarCandle);
                else
                    for (e = n - 5; e <= o; e++)
                        if (k[0].Bars[0][e] != null) {
                            this.mx = Math.round(k[0].Bars[0][e].i * k[0].PxPointX + u.padBarCandle);
                            break
                        }
            } else
                d.Xperiod < 0 ? Math.floor((i - n + 515) / 1e4) >= 1 ? (l = Math.floor((i - n + 515) / 1e4),
                s = (n - i + l * 9485) / -d.Xperiod) : s = (n - i) * -d.Xperiod : s = fh(n - i),
                this.mx = Math.round(s * k[0].PxPointX + u.padBarCandle)
        }
        function fh(n) {
            if (d.Xperiod < 0)
                n = n * (-1 / d.Xperiod);
            else
                switch (d.Xperiod) {
                case 7:
                    n = n / 7;
                    break;
                case 30:
                    n = n / 30;
                    break;
                case 91:
                    n = n / 91;
                    break;
                case 365:
                    n = n / 365;
                    break;
                default:
                    n = n * 5 / 7
                }
            return n < 1 && n > 0 ? n = 1 : n > -1 && n < 0 && (n = -1),
            n
        }
        function ct(n, t) {
            if (!h())
                return !1;
            var r = k[0].lines, u = [], f = k.length, i;
            if (f > 1)
                for (i = 1; i < f; i++)
                    k[i].lines != null && k[i].lines.length != 0 && (u[i - 1] = k[i].lines);
            w.chartPeriod < 0 || t ? r.length != 0 ? sessionStorage.setItem(n, JSON.stringify(r)) : sessionStorage.removeItem(n) : r.length != 0 ? localStorage.setItem(n, JSON.stringify(r)) : localStorage.removeItem(n);
            u.length != 0 ? sessionStorage.setItem(it("indic_" + n), JSON.stringify(u)) : sessionStorage.removeItem(it("indic_" + n));
            VGP.isPro && SynchronizeDrawings(pt, n)
        }
        function fe(n) {
            sessionStorage.removeItem(it("indic_" + n))
        }
        function di(n) {
            if (h()) {
                var i, r, t;
                if (i = w.chartPeriod < 0 ? JSON.parse(sessionStorage.getItem(n)) : JSON.parse(localStorage.getItem(n)),
                r = JSON.parse(sessionStorage.getItem(it("indic_" + n))),
                r != null)
                    for (t = 0; t < r.length; t++)
                        k[t + 1] && (k[t + 1].lines = r[t]);
                i != null && i != "" && i != "[]" ? k[0].lines = i : (w.chartPeriod >= 0 && localStorage.removeItem(n),
                k[0].lines = [])
            }
        }
        function ai(n) {
            var t, r, u, i;
            switch (n) {
            case "topinfo":
                t = document.createElement("div");
                t.id = it("eod_topinfo-");
                t.setAttribute("class", "eod_topinfo");
                t.style.left = w.paddingLeft + 2 + "px";
                t.style.width = w.innerWidth - 10 + "px";
                t.style.color = w.set.txtColor;
                w.set.fontSize != 12 && (t.style.fontSize = w.set.fontSize + "px");
                r = document.createElement("span");
                t.appendChild(r);
                u = document.createElement("span");
                t.appendChild(u);
                i = document.createElement("span");
                i.setAttribute("class", "fr");
                t.appendChild(i);
                tt.doc.appendChild(t);
                break;
            case "overlay":
                t = document.createElement("canvas");
                t.id = it("overlay-");
                t.setAttribute("height", w.heightGraph);
                t.setAttribute("width", w.widthGraph);
                tt.doc.appendChild(t);
                break;
            case "trace":
                t = document.createElement("canvas");
                t.id = it("trace-");
                t.style.left = w.paddingLeft + "px";
                t.style.top = w.paddingTop + "px";
                t.setAttribute("height", k[0].HeightPx);
                t.setAttribute("width", w.innerWidth);
                t.setAttribute("width", w.innerWidth);
                t.setAttribute("class", "traceCvs");
                tt.doc.appendChild(t);
                break;
            case "mainci":
                t = document.createElement("div");
                t.id = it("eod_mainchartinfos-");
                t.setAttribute("class", "eod_mainchartinfos");
                t.style.left = w.paddingLeft + 2 + "px";
                t.style.top = w.paddingTop + 4 + "px";
                t.style.color = w.set.txtColor;
                k[0].Height == 0 && (t.style.display = "none");
                w.set.fontSize != 12 && (t.style.fontSize = w.set.fontSize + "px");
                tt.doc.appendChild(t);
                break;
            case "rodgraph":
                tt.doc.innerHTML = '<canvas id="rodgraph-' + pt + '" style="background-color:' + w.set.bkcolor + '" width="' + w.widthGraph + '" height="' + w.heightGraph + '" ><\/canvas>'
            }
        }
        function br() {
            oi.clearRect(0, 0, w.widthGraph, w.heightGraph);
            oi.font = w.set.fontSize + "px Arial"
        }
        function ee(n) {
            n == null && (n = nt.maxX - (d.QuoteTab.length - 1));
            var t;
            if (d.Xperiod < 0)
                t = -d.Xperiod;
            else
                switch (d.Xperiod) {
                case 7:
                    t = 7;
                    break;
                case 30:
                    t = 30;
                    break;
                case 91:
                    t = 91;
                    break;
                case 365:
                    t = 365;
                    break;
                default:
                    t = 7 / 5
                }
            return Math.round(t * n) + d.QuoteTab[d.QuoteTab.length - 1].d
        }
        function sl(n) {
            for (var i = k.length, t = 1; t < i; t++)
                if (n >= k[t].RealY - 4 && n <= k[t].RealY + 1)
                    return t;
            return null
        }
        function kr(n, t) {
            if (n > w.widthGraph - w.paddingRight || n < w.paddingLeft)
                return null;
            for (var r = k.length, i = 0; i < r; i++)
                if (t >= k[i].RealY && t <= k[i].RealY + k[i].HeightPx)
                    return i;
            return null
        }
        function ir(t) {
            var u, i, r;
            if (ai("rodgraph"),
            u = n.gi(it("rodgraph-")),
            oi = u.getContext("2d"),
            br(),
            VGP.chartSimple) {
                t != null ? ph(t) : oh(w, tt.doc, k);
                return
            }
            for (ai("topinfo"),
            t != null ? ph(t) : oh(w, tt.doc, k),
            ai("overlay"),
            ai("trace"),
            r = 1; r < k.length; r++)
                i = document.createElement("canvas"),
                i.width = w.innerWidth,
                i.height = k[r].HeightPx,
                i.style.top = k[r].RealY + "px",
                i.style.left = w.paddingLeft + "px",
                i.id = "t" + k[r].id,
                i.setAttribute("class", "traceCvs"),
                tt.doc.appendChild(i);
            ai("mainci");
            d != null && n.qstxt(it("#eod_topinfo-") + " span", d.Name)
        }
        function uf(n) {
            VGP.drawings[w.symbol] == 0 && w.chartPeriod >= 0 && !VGP.noCommand && !VGP.noAutoReadTrace ? (VGP.drawings[w.symbol] = 1,
            ih(!0, !1, n)) : ff(n)
        }
        function ff(t, i) {
            var u, s, e, o, f, r;
            if (w.mainChart.type == "season") {
                vh();
                return
            }
            if (w.histoLength == null && (w.histoLength = 365),
            w.chartPeriod == null && (w.chartPeriod = w.histoLength > 20 ? 0 : -1),
            typeof stopTimers == "function" && stopTimers(),
            VGP.noCommand || (u = n.gi(it("trace-")),
            s = u.getContext("2d"),
            s.clearRect(0, 0, u.width, u.height),
            di(w.symbol)),
            e = w.dataSource,
            e) {
                if (o = n.gigt(e),
                o == "")
                    return;
                f = JSON.parse(o);
                f != null && (d = c(f),
                oe(f, t));
                return
            }
            r = new XMLHttpRequest;
            r.open("GET", VGP.urlWS + "GetTicksEOD?symbol=" + w.symbol + "&length=" + w.histoLength + "&period=" + w.chartPeriod + "&guid=" + n.gigt("guid"), !0);
            r.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            r.onload = function() {
                var s, e, u, h, a, l, o, f;
                if (r.status >= 200 && r.status < 400)
                    if (s = JSON.parse(r.responseText),
                    s != null && s != "")
                        if (d = c(s),
                        e = w.mainChart.indicators,
                        w.isCompare) {
                            for (l = e.length,
                            o = "",
                            u = 0; u < l; u++)
                                e[u].type == "compare" && (o += e[u].symbol + ";");
                            o != "" && (o = o.substring(0, o.length - 1),
                            f = new XMLHttpRequest,
                            f.open("GET", VGP.urlWS + "GetTicksList?symbols=" + o + "&length=" + w.histoLength + "&period=" + w.chartPeriod + "&guid=" + n.gigt("guid"), !0),
                            f.setRequestHeader("Content-Type", "application/json;charset=UTF-8"),
                            f.onload = function() {
                                if (f.status >= 200 && f.status < 400) {
                                    var n = JSON.parse(f.responseText);
                                    if (n != null && n != "")
                                        for (a = n.length,
                                        u = 0; u < l; u++)
                                            if (e[u].type == "compare")
                                                for (h = 0; h < a; h++)
                                                    if (n[h].SymbolId == e[u].symbol) {
                                                        e[u].datas2 = n[h];
                                                        break
                                                    }
                                    oe(s, t)
                                }
                            }
                            ,
                            f.send())
                        } else
                            oe(s, t);
                    else
                        w.chartPeriod < 0 ? tr(lang.l_msg3, 3) : tr(lang.l_msg4, 4),
                        i && (w.chartPeriod = i.chartPeriod,
                        w.histoLength = i.histoLength)
            }
            ;
            r.send()
        }
        function oe(t, i) {
            var r, u, f;
            if (nt.minX = 0,
            nt.maxX = t.QuoteTab.length - 1,
            nt.maxY = t.High,
            nt.minY = t.Low,
            w.isCompare && ef(t.High, t.Low, d.QuoteTab[0].c),
            w.histoLength != 1 || w.set.noVeilleIntra || (r = t.qv.c,
            r > nt.maxY && (nt.maxY = r),
            r < nt.minY && (nt.minY = r)),
            nt.qv = t.qv,
            nt.qd = t.qd,
            w.chartPeriod = parseInt(t.Xperiod),
            i == !1)
                if (w.mainChart.typedef.nolinearX)
                    cf(!0);
                else {
                    for (sf(t),
                    f = k.length,
                    u = 1; u < f; u++)
                        hf(k[u]);
                    ot()
                }
            else
                ft(!1, !0);
            VGP.chartSimple || (n.qstxt(it("#eod_topinfo-") + " span", t.Name),
            gr(),
            dt());
            typeof launchTimers == "function" && launchTimers(pt, w.chartPeriod, w.symbol)
        }
        function ef(n, t, i, r, u) {
            for (var v = w.mainChart.indicators.length, s = -1e3, h = 1e3, e, o, l, a, f = 0; f < v; f++)
                w.mainChart.indicators[f].type == "compare" && (l = w.mainChart.indicators[f].datas2,
                l && (a = l.QuoteTab[0].c,
                w.mainChart.indicators[f].datas2 = c(w.mainChart.indicators[f].datas2, r, u),
                e = (l.High - a) / a,
                o = (l.Low - a) / a,
                e > s && (s = e),
                o < h && (h = o)));
            e = (n - i) / i;
            o = (t - i) / i;
            e > s && (s = e);
            o < h && (h = o);
            nt.maxY = i * (1 + s);
            nt.minY = i * (1 + h)
        }
        function sf(t, i, u) {
            var s, c, ri, a, l, h, dt, ht, at, b, vi, ft, f, si, ci, ui, fi, wt, et, d, yi, gt, nr, pi, ni, ir, wi, ei, fr, ii, rt, v, ot, ki, ai, di;
            if (t != null) {
                s = {
                    Name: t.Name,
                    High: t.High,
                    Low: t.Low,
                    QuoteTab: t.QuoteTab
                };
                g.isMoving = i || !1;
                g.isTranslating = u || !1;
                nt.maxX == 0 && nt.minX == 0 && (nt.maxX = s.QuoteTab.length - 1,
                nt.minX = 0);
                s.QuoteTab = sr(t.QuoteTab);
                var ct = s.High, vt = s.Low, e, tt = s.QuoteTab.length, y = k[0];
                nt.maxY == 0 && nt.minY == 0 ? (nt.maxY = ct,
                nt.minY = vt) : (ct = nt.maxY,
                vt = nt.minY);
                ct == vt && (ct = ct * 1.01,
                vt = vt * .99);
                c = w.mainChart.typedef;
                ri = 57;
                y.HeightPx == 57 && (ri = 56);
                y.PxPointY = (y.HeightPx - ri) / (ct - vt);
                y.V0 = ct + (ri - 20) / y.PxPointY;
                var ut = y.V0, lt = y.PxPointY, o = y.ctx, p;
                if (["bar", "candle", "barcolor", "hollow", "heikin ashi"].indexOf(w.mainChart.type) != -1 ? (p = Math.floor(w.innerWidth / tt) - 3,
                p % 2 == 0 && p++,
                p > 19 ? p = 19 : p < 3 && (p = 3),
                w.padBarCandle = 2 + p) : w.padBarCandle = 0,
                a = w.paddingLeft + w.padBarCandle,
                w.mainChart.type == "perf" && (s = RODTA.computePERFORMANCE(s),
                vt = s.Low < 0 ? s.Low * 1.05 : s.Low * .95,
                ct = s.High > 0 ? s.High * 1.05 : s.High * .95,
                lt = (y.HeightPx - ri) / (ct - vt),
                y.PxPointY = lt,
                ut = ct + (ri - 20) / y.PxPointY,
                y.V0 = ut),
                w.mainChart.type == "heikin ashi" && (s = RODNL.computeHeikinAshi(s),
                !s)) {
                    bt = {};
                    tt = [];
                    y.Bars[0] = {};
                    return
                }
                l = null;
                w.set.semilog && w.mainChart.type != "perf" && !w.isCompare && (l = vl(ct, vt));
                w.logData = l;
                w.isCompare ? ur(o, y.HeightPx, a, ut, lt, !0) : w.set.semilog && w.mainChart.type != "perf" ? ur(o, y.HeightPx, a, ut, lt, !1, !0) : ur(o, y.HeightPx, a, ut, lt);
                b = tt == 1 ? w.innerWidth - 2 * w.padBarCandle : (w.innerWidth - 2 * w.padBarCandle) / (tt - 1);
                y.PxPointX = b;
                i ? rr(y) : rr(y, !0, s.QuoteTab);
                bt = {};
                ti = [];
                y.Bars[0] = {};
                vi = a - 1;
                ft = {};
                o.save();
                switch (w.mainChart.type) {
                case "perf":
                    for (o.beginPath(),
                    dt = (ut - s.QuoteTab[0].c) * lt,
                    o.moveTo(a, dt),
                    e = 0; e < tt; e++)
                        if (f = s.QuoteTab[e],
                        f != null) {
                            if (h = Math.round(e * b + a),
                            ti[h - w.paddingLeft] = {
                                d: f.d,
                                i: e
                            },
                            o.lineTo(h + .5, Math.round((ut - f.c) * lt) + .5),
                            b < 2)
                                bt[h] = f.d;
                            else
                                for (ht = -1; ht <= 1; ht++)
                                    bt[h + ht] = f.d;
                            ft[f.d] = {
                                c: f.c.toFixed(2),
                                i: e
                            };
                            d = e
                        }
                    f = s.QuoteTab[d];
                    ft[0] = {
                        c: f.c.toFixed(2),
                        i: d,
                        d: f.d
                    };
                    c.v1 || (o.strokeStyle = c.color,
                    yt(o, 1, c),
                    bi(o, c, 1),
                    o.stroke());
                    c.v2 || (o.lineTo(h, ut * lt),
                    o.lineTo(a, ut * lt),
                    wt = o.createLinearGradient(0, 0, 0, y.HeightPx),
                    wt.addColorStop(0, r(RODTL.rgb2hex(c.color2), .7)),
                    wt.addColorStop(1, r(RODTL.rgb2hex(c.color2), .1)),
                    o.fillStyle = wt,
                    o.fill());
                    break;
                case "line":
                case "line2":
                    for (o.beginPath(),
                    yi = c.source != null ? c.source : "c",
                    dt = st(gs(s.QuoteTab[0], yi), l),
                    o.moveTo(a, dt),
                    gt = [],
                    gt.push({
                        x: a,
                        y: dt
                    }),
                    e = 0; e < tt; e++)
                        if (f = s.QuoteTab[e],
                        f != null) {
                            if (h = Math.round(e * b + a),
                            ti[h - w.paddingLeft] = {
                                d: f.d,
                                i: e
                            },
                            h - vi >= 1) {
                                if (dt = st(gs(f, yi), l) + .5,
                                o.lineTo(h + .5, dt),
                                gt.push({
                                    x: h + .5,
                                    y: dt
                                }),
                                vi = h,
                                b < 2)
                                    bt[h] = f.d;
                                else
                                    for (ht = -1; ht <= 1; ht++)
                                        bt[h + ht] = f.d;
                                ft[f.d] = {
                                    o: f.o,
                                    h: f.h,
                                    l: f.l,
                                    c: f.c,
                                    i: e
                                }
                            }
                            d = e
                        }
                    if (f = s.QuoteTab[d],
                    ft[0] = {
                        o: f.o,
                        h: f.h,
                        l: f.l,
                        c: f.c,
                        i: d,
                        d: f.d
                    },
                    w.mainChart.type == "line" && (c.v2 || (o.strokeStyle = "transparent",
                    o.lineTo(h, y.HeightPx),
                    o.lineTo(a, y.HeightPx),
                    o.lineTo(a, ut),
                    o.stroke(),
                    nr = ut - ct,
                    nr != 0 && (wt = o.createLinearGradient(0, st(s.High, l), 0, y.HeightPx),
                    wt.addColorStop(0, c.color2),
                    c.color3 != null ? wt.addColorStop(1, c.color3) : wt.addColorStop(1, r(RODTL.rgb2hex(c.color2), .1)),
                    o.fillStyle = wt,
                    o.fill()))),
                    !c.v1) {
                        if (o.beginPath(),
                        pi = gt.length,
                        pi > 0)
                            for (o.moveTo(gt[0].x, gt[0].y),
                            ht = 1; ht < pi; ht++)
                                o.lineTo(gt[ht].x, gt[ht].y);
                        bi(o, c, 1);
                        yt(o, 1, c);
                        o.strokeStyle = c.color;
                        o.stroke()
                    }
                    break;
                case "bar":
                case "barcolor":
                    var kt = .5
                      , oi = 0
                      , li = Math.floor(p / 2)
                      , tr = li + 1;
                    for (b > 5 && (o.lineWidth = 2,
                    kt = 0,
                    oi = 1,
                    li += 1),
                    o.strokeStyle = c.v1 ? "transparent" : c.color,
                    o.beginPath(),
                    e = 0; e < tt; e++)
                        if (f = s.QuoteTab[e],
                        f != null) {
                            for (h = Math.round(e * b + a),
                            f.c >= f.o && (ui = st(f.o, l) + kt,
                            fi = st(f.c, l) + kt,
                            si = st(f.l, l),
                            ci = st(f.h, l),
                            ti[h - w.paddingLeft] = {
                                d: f.d,
                                i: e
                            },
                            o.moveTo(h + kt, si + oi),
                            o.lineTo(h + kt, ci - oi),
                            o.moveTo(h, ui),
                            o.lineTo(h - li, ui),
                            o.moveTo(h, fi),
                            o.lineTo(h + tr, fi)),
                            at = -p; at <= p; at++)
                                bt[h + at] = f.d;
                            d = e;
                            ft[f.d] = {
                                o: f.o,
                                h: f.h,
                                l: f.l,
                                c: f.c,
                                i: e
                            }
                        }
                    for (f = s.QuoteTab[d],
                    ft[0] = {
                        o: f.o,
                        h: f.h,
                        l: f.l,
                        c: f.c,
                        i: d,
                        d: f.d
                    },
                    o.stroke(),
                    w.mainChart.type == "barcolor" && (o.strokeStyle = c.v2 ? "transparent" : c.color2),
                    o.beginPath(),
                    e = 0; e < tt; e++)
                        f = s.QuoteTab[e],
                        f != null && f.c < f.o && (ui = st(f.o, l) + kt,
                        fi = st(f.c, l) + kt,
                        h = Math.round(e * b + a),
                        si = st(f.l, l),
                        ci = st(f.h, l),
                        ti[h - w.paddingLeft] = {
                            d: f.d,
                            i: e
                        },
                        o.moveTo(h + kt, si + oi),
                        o.lineTo(h + kt, ci - oi),
                        o.moveTo(h, ui),
                        o.lineTo(h - li, ui),
                        o.moveTo(h, fi),
                        o.lineTo(h + tr, fi));
                    o.stroke();
                    break;
                case "heikin ashi":
                case "candle":
                    for (b > 5 && b < 7 && (p = 5),
                    o.strokeStyle = c.color3,
                    o.beginPath(),
                    o.fillStyle = c.color,
                    et = Math.floor(p / 2),
                    e = 0; e < tt; e++)
                        if (f = s.QuoteTab[e],
                        f != null) {
                            for (h = Math.round(e * b + a) - et,
                            f.c >= f.o && hr(o, p, f, h, et, e, l),
                            at = 0; at <= p; at++)
                                bt[h + at] = f.d;
                            d = e;
                            ft[f.d] = {
                                o: f.o,
                                h: f.h,
                                l: f.l,
                                c: f.c,
                                i: e
                            }
                        }
                    for (f = s.QuoteTab[d],
                    ft[0] = {
                        o: f.o,
                        h: f.h,
                        l: f.l,
                        c: f.c,
                        i: d,
                        d: f.d
                    },
                    c.v1 || (o.stroke(),
                    o.fill()),
                    o.beginPath(),
                    o.fillStyle = c.color2,
                    e = 0; e < tt; e++)
                        f = s.QuoteTab[e],
                        f != null && f.c < f.o && (h = Math.round(e * b + a) - et,
                        hr(o, p, f, h, et, e, l));
                    c.v2 || (o.stroke(),
                    o.fill());
                    break;
                case "hollow":
                    for (b > 5 && b < 7 && (p = 5),
                    o.strokeStyle = c.color,
                    o.beginPath(),
                    et = Math.floor(p / 2),
                    e = 1; e < tt; e++)
                        if (f = s.QuoteTab[e],
                        f != null) {
                            for (h = Math.round(e * b + a) - et,
                            f.c >= f.o && f.c >= s.QuoteTab[e - 1].c && hr(o, p, f, h, et, e, l),
                            at = 0; at <= p; at++)
                                bt[h + at] = f.d;
                            d = e;
                            ft[f.d] = {
                                o: f.o,
                                h: f.h,
                                l: f.l,
                                c: f.c,
                                i: e
                            }
                        }
                    for (d != null && (f = s.QuoteTab[d],
                    ft[0] = {
                        o: f.o,
                        h: f.h,
                        l: f.l,
                        c: f.c,
                        i: d,
                        d: f.d
                    }),
                    c.v1 || o.stroke(),
                    o.strokeStyle = c.color2,
                    o.beginPath(),
                    e = 1; e < tt; e++)
                        f = s.QuoteTab[e],
                        f != null && (h = Math.round(e * b + a) - et,
                        f.c >= f.o && f.c < s.QuoteTab[e - 1].c && hr(o, p, f, h, et, e, l));
                    for (c.v2 || o.stroke(),
                    o.strokeStyle = c.color3,
                    o.fillStyle = c.color,
                    o.beginPath(),
                    e = 1; e < tt; e++)
                        f = s.QuoteTab[e],
                        f != null && (h = Math.round(e * b + a) - et,
                        f.c <= f.o && f.c >= s.QuoteTab[e - 1].c && hr(o, p, f, h, et, e, l));
                    for (c.v1 || (o.stroke(),
                    o.fill()),
                    o.fillStyle = c.color2,
                    o.beginPath(),
                    e = 1; e < tt; e++)
                        f = s.QuoteTab[e],
                        f != null && (h = Math.round(e * b + a) - et,
                        f.c <= f.o && f.c < s.QuoteTab[e - 1].c && hr(o, p, f, h, et, e, l));
                    c.v2 || (o.stroke(),
                    o.fill())
                }
                if (o.restore(),
                y.Bars[0] = ft,
                tt != 0 && ft[0] != null && (w.set.nohighlow || w.isCompare || (hi(o, ut, s.High, lt, "rgba(0, 128, 0, 1)", !0, l),
                hi(o, ut, s.Low, lt, "rgba(192, 0, 0, 1)", !0, l)),
                w.set.nosticky || hi(o, ut, ft[0].c, lt, null, !0, l)),
                i || u || VGP.chartSimple || (ni = "",
                w.mainChart.type != "perf" && (ni = se(w.chartPeriod < 0 ? !0 : !1),
                ni = ni >= 0 ? '<span class="quote_up2"> +' + ni.toFixed(2) + "%<\/span>" : '<span class="quote_down2"> ' + ni.toFixed(2) + "%<\/span>"),
                wi = "",
                gi(w.set.bkcolor) < 130 && (wi = " filter1"),
                ir = VGP.noCommand || VGP.noEvents ? "" : '<span class="mci-p' + wi + '"><\/span>',
                ei = '<div><span class="eod_param" data-name="' + w.mainChart.type + '">' + ir + lang.l_cours + '<\/span><span class="eod_coursval" id="coursval-' + pt + '">',
                w.set.quotesValues ? ei = w.widthGraph > 490 ? ei + "<span><b>O<\/b>: " + t.QuoteTab[t.QuoteTab.length - 1].o + "<\/span><span><b>H<\/b>: " + t.QuoteTab[t.QuoteTab.length - 1].h + "<\/span><span><b>" + lang.l_b + "<\/b>: " + t.QuoteTab[t.QuoteTab.length - 1].l + "<\/span><span><b>C<\/b>: " + t.QuoteTab[t.QuoteTab.length - 1].c + "<\/span>" + ni + "<\/span><\/div>" : ei + "<span>" + t.QuoteTab[t.QuoteTab.length - 1].c + "<\/span>" + ni + "<\/span><\/div>" : ei += "<\/span><\/div>",
                n.idhtml(it("eod_mainchartinfos-"), ei)),
                iu(k[0], !0, l),
                w.mainChart.type != "perf") {
                    for (fr = w.mainChart.indicators.length,
                    e = 0; e < fr; e++) {
                        ii = w.mainChart.indicators[e];
                        switch (ii.type) {
                        case "compare":
                            al(ii, a, e);
                            break;
                        case "evt":
                        case "actu":
                            w.chartPeriod >= 0 && (g.fiEvt.length == 0 && g.fiEvt != "no" ? cl(a, e, ii.type) : ch(a, e, ii.type));
                            break;
                        case "pivots":
                            ll(ii, e, l);
                            break;
                        default:
                            hl(ii, a, e, l)
                        }
                    }
                    if (w.searchConfig != "") {
                        ot = s.QuoteTab;
                        switch (w.searchConfig) {
                        case "gaps":
                            rt = "G";
                            v = RODCDL.computeGAP(ot);
                            break;
                        case "dojis":
                            rt = "D";
                            v = RODCDL.computeDOJI(ot, w.chartPeriod);
                            break;
                        case "keyr":
                            rt = "K";
                            v = RODCDL.computeKEYR(ot);
                            break;
                        case "englob":
                            rt = "E";
                            v = RODCDL.computeEnglobante(ot);
                            break;
                        case "marteau":
                            rt = lang.l_m;
                            v = RODCDL.computeMarteau(ot);
                            break;
                        case "pendu":
                            rt = lang.l_p;
                            v = RODCDL.computePendu(ot);
                            break;
                        case "pinces":
                            rt = lang.l_p;
                            v = RODCDL.computePinces(ot);
                            break;
                        case "marubozu":
                            rt = lang.l_m;
                            v = RODCDL.computeMarubozu(ot);
                            break;
                        case "soldiers":
                            rt = lang.l_s;
                            v = RODCDL.computeSoldiers(ot, "s");
                            break;
                        case "corbeaux":
                            rt = "C";
                            v = RODCDL.computeSoldiers(ot, "c");
                            break;
                        case "harami":
                            rt = "H";
                            v = RODCDL.computeHarami(ot);
                            break;
                        case "dragon":
                            rt = "D";
                            v = RODCDL.computeDragonFly(ot);
                            break;
                        case "shootings":
                            rt = "E";
                            v = RODCDL.computeShootingStar(ot)
                        }
                        for (ki = v.Values.length,
                        e = 0; e < ki; e++)
                            v.Values[e].v1 != 0 ? (o.beginPath(),
                            o.arc(Math.round(v.Values[e].i * b + a), st(v.Values[e].v1, l) + 15, 8, 0, 2 * Math.PI),
                            o.fillStyle = "#008000",
                            o.fill()) : v.Values[e].v2 != 0 && (o.beginPath(),
                            o.arc(Math.round(v.Values[e].i * b + a), st(v.Values[e].v2, l) - 15, 8, 0, 2 * Math.PI),
                            o.fillStyle = "#ff0000",
                            o.fill());
                        for (o.fillStyle = "#fff",
                        e = 0; e < ki; e++)
                            v.Values[e].v1 != 0 ? o.fillText(rt, Math.round(v.Values[e].i * b + a) - 4, st(v.Values[e].v1, l) + 19) : v.Values[e].v2 != 0 && o.fillText(rt, Math.round(v.Values[e].i * b + a) - 4, st(v.Values[e].v2, l) - 11)
                    }
                }
                VGP.isPro && w.widthGraph < 500 || VGP.chartSimple || w.set.noVarPeriod || i || (ai = n.qsa(it("#eod_topinfo-") + " span"),
                ai.length > 1 && (w.mainChart.type == "perf" ? ai[1].innerHTML = lang.l_varperiod + " : " + tu(s.QuoteTab, 1).c.toFixed(2) + "%" : (di = w.chartPeriod < 0 ? se(!0) : (tu(s.QuoteTab, 1).c - s.QuoteTab[0].c) * 100 / s.QuoteTab[0].c,
                ai[1].innerHTML = lang.l_varperiod + " : " + (di > 0 ? "+" : "") + di.toFixed(2) + "%")))
            }
        }
        function sr(n) {
            if (n == null)
                return n;
            for (var i = [], r = nt.minX, u = nt.maxX, t = r; t <= u; t++)
                i.push(n[t]);
            return i
        }
        function rr(n, t, i, r) {
            var u = w, y = Math.round((u.innerWidth - 2 * u.padBarCandle) / 80), v = nt.maxX - nt.minX, o, a = Math.round(v / y), h, e, l, c;
            if (a <= 0 && (a = 1),
            h = n.ctx,
            h.beginPath(),
            h.save(),
            h.strokeStyle = u.set.gridColor,
            !u.set.gridLine && h.setLineDash && h.setLineDash([3]),
            t && (oi.fillStyle = u.set.txtColor),
            l = u.heightGraph - 6,
            r)
                for (o = a; o < v; o += a)
                    i[o] != null && (e = Math.round(i[o].cu - i[0].cu + u.paddingLeft) + .5,
                    u.set.gridV && (h.moveTo(e, 0),
                    h.lineTo(e, n.HeightPx)),
                    c = i[o].d,
                    u.chartPeriod >= 0 ? u.histoLength > 365 ? oi.fillText(f(c, 4), e - 18, l) : oi.fillText(f(c, 3), e - 18, l) : u.histoLength > 2 ? oi.fillText(s(c), e - 18, l) : oi.fillText(s(c, 1), e - 18, l));
            else
                for (o = a; o < v; o += a)
                    e = Math.round(o * k[0].PxPointX + u.paddingLeft + u.padBarCandle) + .5,
                    u.set.gridV && (h.moveTo(e, 0),
                    h.lineTo(e, n.HeightPx)),
                    t && (c = i[o] == null ? ee(o + 1 - ti[ti.length - 1].i) : i[o].d,
                    u.chartPeriod >= 0 ? u.histoLength > 365 ? oi.fillText(f(c, 4), e - 18, l) : oi.fillText(f(c, 3), e - 18, l) : u.histoLength > 2 ? oi.fillText(s(c), e - 18, l) : oi.fillText(s(c, 1), e - 18, l));
            h.stroke();
            h.restore()
        }
        function ur(n, t, i, r, u, f, e) {
            var c = "", h, l, k, a, v, b, rt;
            r >= 1e7 ? (r = r / 1e6,
            u = u * 1e6,
            c = "M") : r >= 1e5 && (r = r / 1e3,
            u = u * 1e3,
            c = "K");
            e && (k = w.logData);
            n.save();
            n.beginPath();
            !w.set.gridLine && n.setLineDash && n.setLineDash([3]);
            n.strokeStyle = w.set.gridColor;
            n.font = w.set.fontSize + "px Arial";
            n.fillStyle = w.set.txtColor;
            a = t / u;
            v = 35;
            t < 120 && (v = 20);
            var g = Math.round(t / v), tt = a / (g - 1), ut = Math.ceil(Math.log10(tt) - 1), it = Math.pow(10, ut), y = Math.ceil(tt / it) * it, ft = Math.ceil((r - a) / y) * y, o, s, p;
            for (w.mainChart.typedef.nolinearX || (p = d.QuoteTab[nt.minX].c),
            b = w.widthGraph - w.paddingRight,
            rt = i - w.padBarCandle,
            h = 0; h <= g; h++) {
                if (o = ft + h * y,
                s = e ? st(o, k) : Math.round((r - o) * u),
                s <= 5)
                    break;
                w.set.gridH && (n.moveTo(rt, s + .5),
                n.lineTo(b, s + .5));
                l = f || w.mainChart.type == "perf" ? w.mainChart.type == "perf" ? RODTL.formatDecimales(o, !0) : RODTL.formatDecimales((o - p) * 100 / p, !0) : RODTL.formatDecimales(o) + c;
                w.set.yaxis ? n.fillText(l, 2, s + 2) : n.fillText(l, b + 5, s + 2)
            }
            n.stroke();
            n.restore()
        }
        function hi(n, t, i, r, u, f, e) {
            var o = w, s, a, h, v, c, l;
            i = parseFloat(i);
            f ? s = st(i, e) : (s = Math.round(t - i * r),
            s < t + 7 && (s = s - 7));
            u == null && (u = "rgba(51, 102, 255, 1)");
            n.fillStyle = RODTL.rgb2hex(u);
            n.font = o.set.fontSize + "px Arial";
            h = o.widthGraph - o.paddingRight;
            v = o.paddingRight;
            o.set.yaxis && (h = -2,
            v = o.paddingLeft - 1);
            c = o.set.fontSize - 12;
            n.fillRect(h + 2, s - 7, v, 17 + c);
            n.fillStyle = ve(u);
            f && o.isCompare && !o.mainChart.typedef.nolinearX && o.mainChart.type != "perf" ? (a = d.QuoteTab[nt.minX].c,
            i = (i - a) * 100 / a,
            n.fillText(i.toFixed(2), h + 5, s + 6 + c)) : (l = "",
            i >= 1e8 ? (i = Math.round(i / 1e6),
            l = "M") : i >= 1e5 && (i = Math.round(i / 1e3),
            l = "K"),
            n.fillText(RODTL.formatDecimales(i) + l, h + 5, s + 6 + c))
        }
        function st(n, t) {
            return t == null ? Math.round((k[0].V0 - n) * k[0].PxPointY) : k[0].HeightPx - Math.round((Math.log10(n) / Math.log10(10) - t.floor) / t.range * k[0].HeightPx)
        }
        function eh(n, t) {
            var i = k[0];
            return t == null ? (i.V0 * i.PxPointY - n) / i.PxPointY : Math.pow(10, Math.log10(10) * ((i.HeightPx - n) * t.range / i.HeightPx + t.floor))
        }
        function se(n) {
            if (n)
                return d.qv != null ? (tu(d.QuoteTab, 1).c - d.qv.c) * 100 / d.qv.c : 0;
            var t = tu(d.QuoteTab, 2).c;
            return (tu(d.QuoteTab, 1).c - t) * 100 / t
        }
        function dr(t, i, r, u, f) {
            var e, c, l;
            if (!g.isMoving && !g.isTranslating && !VGP.chartSimple) {
                var y = n.gi(it("eod_mainchartinfos-"))
                  , s = document.createElement("div")
                  , a = "";
                if (t) {
                    var v = gi(t)
                      , o = gi(w.set.bkcolor)
                      , h = t;
                    o > 200 && Math.abs(o - v) < 50 && (h = "rgba(0,0,0,1)");
                    o < 50 && Math.abs(o - v) < 50 && (h = "rgba(255,255,255,1)");
                    o < 130 && (a = " filter1");
                    s.style.color = RODTL.rgb2hex(h)
                }
                e = document.createElement("span");
                e.setAttribute("class", "eod_param");
                e.setAttribute("data-name", i + "_" + u);
                e.textContent = r;
                VGP.noCommand || VGP.noEvents || (c = document.createElement("span"),
                c.setAttribute("class", "mci-p" + a),
                e.appendChild(c));
                s.appendChild(e);
                f && (l = document.createElement("span"),
                l.id = it("val-") + u,
                s.appendChild(l));
                y.appendChild(s)
            }
        }
        function hl(t, i, r, u) {
            var f, a = {}, h = k[0], e, c, ut, v, ft, et, ot, ht, rt;
            h.Bars[r + 1] = {};
            e = "";
            c = t.source != null ? t.source : "c";
            switch (t.type) {
            case "mm":
                f = RODTA.computeMovingAverage(d.QuoteTab, t.param1, c);
                e = lang.l_mm2 + " (" + t.param1 + ")";
                break;
            case "zig zag":
                f = RODTAE.computeZigZag(d.QuoteTab, t.param1 / 100, c);
                e = "Zig Zag (" + t.param1 + ")";
                break;
            case "mmt":
                f = RODTAE.computeMovingAverageT(d.QuoteTab, t.param1, c);
                e = lang.l_mmt2 + " (" + t.param1 + ")";
                break;
            case "mmp":
                f = RODTA.computeMovingAverageP(d.QuoteTab, t.param1, c);
                e = lang.l_mmp2 + " (" + t.param1 + ")";
                break;
            case "mmh":
                f = RODTAE.computeMovingAverageHull(d.QuoteTab, t.param1, c);
                e = lang.l_mmh2 + " (" + t.param1 + ")";
                break;
            case "VWAP":
                if (w.chartPeriod >= 0)
                    return;
                f = RODTAE.computeVWAP(d.QuoteTab);
                e = "VWAP";
                break;
            case "double EMA":
                f = RODTA.computeDoubleEMA(d.QuoteTab, t.param1, c);
                e = "Double EMA (" + t.param1 + ")";
                break;
            case "triple EMA":
                f = RODTA.computeTripleEMA(d.QuoteTab, t.param1, c);
                e = "Triple EMA (" + t.param1 + ")";
                break;
            case "linearc":
                f = RODTA.computeLinearCurve(d.QuoteTab, t.param1, 1, c);
                e = lang.l_regcurve2 + " (" + t.param1 + ")";
                break;
            case "lineard":
                ut = iv(d.QuoteTab, t.param1, t, c);
                e = lang.l_regline2 + " (" + t.param1 + ", " + t.param2 + ")";
                break;
            case "supres":
                RODTAE.ComputeSupRes(d, t.param1, t, w, h, nt);
                e = "Volume profile (" + t.param1 + "%)";
                break;
            case "cmoy":
                f = RODTAE.ApplyAverageCours(d.QuoteTab, h, w, t, u, nt, c);
                e = "COURS MOYEN";
                break;
            case "cmedian":
                f = RODTAE.ApplyMedianCours(d.QuoteTab, h, w, t, u, nt, c);
                e = "COURS MEDIAN";
                break;
            case "mme":
                f = RODTA.computeMovingAverageE(d.QuoteTab, t.param1, c);
                e = lang.l_mme2 + " (" + t.param1 + ")";
                break;
            case "boll":
                t.param2 == null && (t.param2 = 2);
                f = RODTA.computeBollinger(d.QuoteTab, t.param1, t.param2, c);
                e = "BOLLINGER (" + t.param1 + ", " + t.param2 + ")";
                break;
            case "primeband":
                f = RODTAE.computePrimeNumberBands(d.QuoteTab, t.param1);
                e = "PRIME BANDS";
                break;
            case "donchian":
                f = RODTAE.computeDonchian(d.QuoteTab, t.param1);
                e = "DONCHIAN (" + t.param1 + ")";
                break;
            case "keltner":
                f = RODTAE.computeKeltner(d.QuoteTab, t.param1, t.param2, t.param3);
                e = "KELTNER (" + t.param1 + ", " + t.param2 + ", " + t.param3 + ")";
                break;
            case "evmm":
                f = RODTAE.computeEVMM(d.QuoteTab, t.param1, t.param2, c);
                e = lang.l_envmm2 + " (" + t.param1 + ", " + t.param2 + ")";
                break;
            case "alligator":
                f = RODTAE.computeAlligator(d.QuoteTab, t.param1, t.param2, t.param3);
                e = "ALLIGATOR (" + t.param1 + ", " + t.param2 + ", " + t.param3 + ")";
                break;
            case "supertrend":
                f = RODTAE.computeSupertrend(d.QuoteTab, t.param1, t.param2, "supertrend");
                e = "SUPERTREND (" + t.param1 + ")";
                break;
            case "atrs":
                f = RODTAE.computeSupertrend(d.QuoteTab, t.param1, t.param2, "atrs");
                e = "ATRS (" + t.param1 + ")";
                break;
            case "ichimoku":
                f = RODTAE.computeIchimoku(d.QuoteTab, t.param1, t.param2, w.chartPeriod);
                e = "ICHIMOKU (" + t.param1 + ", " + t.param2 + ")";
                break;
            case "sar":
                f = RODTAE.computeSAR(d.QuoteTab, t.param1, t.param2);
                e = "SAR (" + t.param1 + ")";
                break;
            case "phpb":
                f = RODTAE.computeHighLow(d.QuoteTab, t.param1, t.source);
                e = "Hauts/Bas (" + t.param1 + ")";
                break;
            case "gmma":
                f = RODTAE.computeGMMA(d.QuoteTab);
                e = "GMMA (3,5,8,10,12,15,30,35,40,45,50,60)";
                break;
            case "demark":
                f = RODTAE.computeDemarkSequential(d.QuoteTab);
                e = "DeMark"
            }
            if (dr(t.color, t.type, e, r, !0),
            t.type == "lineard") {
                el(h.ctx, ut, 0);
                return
            }
            if (t.type != "supres" && f != null) {
                if (f.Values = sr(f.Values),
                v = !1,
                g.isMoving || g.isTranslating || !w.set.indicValues || (v = !0),
                t.type == "alligator") {
                    ft = RODTAE.applyAlligator(h, f, i, t, u, r);
                    v && n.idhtml(it("val-") + r, ci(ft));
                    return
                }
                if (t.type == "gmma") {
                    RODTAE.applyGMMA(h, f, i, t, u);
                    return
                }
                if (t.type == "phpb") {
                    RODTAE.ApplyDetectIndicator(h, f, i, t, u, r);
                    return
                }
                if (t.type == "supertrend" || t.type == "atrs") {
                    et = RODTAE.ApplySupertrend(h, f, i, t, u, r);
                    v && n.idhtml(it("val-") + r, ci(et));
                    return
                }
                if (t.type == "ichimoku") {
                    ot = RODTAE.ApplyIchimoku(h, f, i, t, u, r);
                    v && n.idhtml(it("val-") + r, ci(ot));
                    return
                }
                if (t.type == "sar") {
                    ht = RODTAE.ApplySarIndicator(h, f, i, t, u, r);
                    v && n.idhtml(it("val-") + r, ci(ht));
                    return
                }
                if (t.type == "demark") {
                    RODTAE.ApplyDeMarkSeq(h, f, i, t, u, w, d, nt);
                    return
                }
                var tt = f.Values.length, s = h.ctx, ct = i - 1, y, o, l, b = h.PxPointX, p;
                if (s.strokeStyle = t.v1 ? "transparent" : t.color,
                f.Values[0] == null && (f.Values[0] = {
                    v1: d.QuoteTab[nt.minX].c,
                    d: d.QuoteTab[nt.minX].d
                }),
                f.Values[0].v2 == null) {
                    for (s.save(),
                    s.beginPath(),
                    s.moveTo(i, st(f.Values[0].v1, u) + .5),
                    bi(s, t, 1),
                    yt(s, 1, t),
                    o = 1; o < tt; o++)
                        f.Values[o] != null && (y = Math.round(o * b + i),
                        y - ct >= 1 && (s.lineTo(y + .5, st(f.Values[o].v1, u) + .5),
                        ct = y),
                        a[f.Values[o].d] = f.Values[o].v1,
                        p = o);
                    p != null && (a[0] = f.Values[p].v1);
                    h.Bars[r + 1] = a;
                    v && n.idst(it("val-") + r, ci(a[0]));
                    s.stroke();
                    s.restore();
                    return
                }
                for (s.beginPath(),
                rt = !1,
                o = tt - 1; o >= 0; o--)
                    f.Values[o] != null && (l = st(f.Values[o].v1, u),
                    rt ? (y = Math.round(o * b + i),
                    s.lineTo(y + .5, Math.round(l) + .5)) : (s.moveTo(Math.round(o * b + i) + .5, l + .5),
                    rt = !0));
                for (l = st(f.Values[0].v1, u),
                s.lineTo(w.paddingLeft + 1, l + .5),
                l = st(f.Values[0].v2, u),
                s.lineTo(w.paddingLeft + 1, l + .5),
                o = 0; o < tt; o++)
                    f.Values[o] != null && (y = Math.round(o * b + i),
                    l = st(f.Values[o].v2, u),
                    s.lineTo(y + .5, l + .5),
                    a[f.Values[o].d] = [f.Values[o].v1, f.Values[o].v2],
                    p = o);
                a[0] = [f.Values[p].v1, f.Values[p].v2];
                s.save();
                bi(s, t, 1);
                yt(s, 1, t);
                s.stroke();
                s.restore();
                t.v2 || (s.fillStyle = t.color2,
                s.fill());
                h.Bars[r + 1] = a;
                v && n.idst(it("val-") + r, ci(a[0]))
            }
        }
        function hf(n) {
            var t = n.Indicator, i = d.QuoteTab, u, r = t.source != null ? t.source : "c", o, e, s, f;
            switch (t.type) {
            case "equity":
                o = ki.trades;
                e = ki.params;
                o.length != 0 && e != null && vt(RODBT.BTcomputeEquity(i, o, e.initialAsset), n, "curve", e.initialAsset);
                break;
            case "volume":
                he(RODTA.computeVolume(i, nt), n);
                break;
            case "volumecash":
                he(RODTA.computeVolume(i, nt, !0), n);
                break;
            case "mf":
                he(RODTAD.computeMarketFacil(i, nt), n);
                break;
            case "perfi":
                vt(RODTA.computePERFORMANCE(d, !0), n, "curve", 0);
                break;
            case "rsi":
                et(RODTA.computeRSI(i, t.param1, r), n);
                break;
            case "schaff":
                et(RODTAD.computeSchaff(i, t.param1, t.param2), n);
                break;
            case "linearo":
                vt(RODTA.computeLinearCurve(i, t.param1, 2, r), n, "curve", 0);
                break;
            case "fr":
                if (w.isCompare) {
                    for (f = w.mainChart.indicators,
                    u = 0; u < f.length; u++)
                        if (f[u].type == "compare" && f[u].datas2) {
                            s = f[u].datas2.QuoteTab;
                            break
                        }
                    vt(RODTA.computeFR(i, s), n, "curve", 0)
                }
                break;
            case "atr":
                et(RODTA.computeATR(i, t.param1, "pma"), n);
                break;
            case "cci":
                et(RODTA.computeCCI(i, t.param1), n);
                break;
            case "mom":
                vt(RODTA.computeMomentum(i, t.param1, r), n, "curve", 0);
                break;
            case "vpn":
                et(RODTAD.computeVPN(i, t.param1, t.param2), n);
                break;
            case "primeosc":
                vt(RODTAD.computePrimeNumberOsc(i), n, "curve", 0);
                break;
            case "macd":
                et(RODTA.computeMACD(i, t.param1, t.param2, t.param3, "macd", r), n);
                break;
            case "dmi":
                et(RODTAD.computeDMI(i, t.param1, "dmi"), n);
                break;
            case "adx":
                et(RODTAD.computeDMI(i, t.param1, "adx"), n);
                break;
            case "macdh":
                vt(RODTA.computeMACD(i, t.param1, t.param2, t.param3, "macdh", r), n, "bar");
                break;
            case "roc":
                et(RODTA.computeROC(i, t.param1, r, !0), n);
                break;
            case "disp":
                et(RODTAD.computeDispIdx(i, t.param1, r), n);
                break;
            case "sto":
                et(RODTA.computeSTOCH(i, t.param1, t.param2, t.param3), n);
                break;
            case "rvi":
                et(RODTAD.computeRVI(i, t.param1), n);
                break;
            case "trix":
                et(RODTAD.computeTRIX(i, t.param1, r), n);
                break;
            case "pgo":
                et(RODTAD.computePGO(i, t.param1, r), n);
                break;
            case "bollw":
                et(RODTAD.computeBollingerBandwith(i, t.param1, t.param2, r), n);
                break;
            case "ultimate":
                et(RODTAD.computeUltimateOsc(i, t.param1, t.param2, t.param3), n);
                break;
            case "coppock":
                vt(RODTAD.computeCoppock(i, t.param1, t.param2, t.param3, r), n, "curve", 0);
                break;
            case "aroon":
                et(RODTAD.ComputeAroon(i, t.param1), n);
                break;
            case "nvi":
                et(RODTAD.computeNVIPVI(i, r, "nvi"), n);
                break;
            case "pvi":
                et(RODTAD.computeNVIPVI(i, r, "pvi"), n);
                break;
            case "wto":
                et(RODTAD.computeWaveTrendOsc(i, t.param1, t.param2), n);
                break;
            case "bop":
                vt(RODTAD.computeBOP(i), n, "bop");
                break;
            case "qstick":
                vt(RODTAD.computeQStick(i, t.param1), n, "bar");
                break;
            case "vortex":
                et(RODTAD.computeVortex(i, t.param1), n);
                break;
            case "ewo":
                vt(RODTAD.computeEWO(i, t.param1, t.param2, r), n, "bar");
                break;
            case "ppo":
                vt(RODTAD.computePPO(i, t.param1, t.param2, t.param3, r), n, "bar");
                break;
            case "di":
                et(RODTAD.computeDI(i, t.param1), n);
                break;
            case "mass index":
                et(RODTAD.computeMassIndex(i, t.param1), n);
                break;
            case "forceindex":
                vt(RODTAD.computeForceIndex(i, t.param1, r), n, "curve", 0);
                break;
            case "kst":
                et(RODTAD.computeKST(i, t.param1, t.param2, t.param3, t.param4, r), n);
                break;
            case "elderbull":
                vt(RODTAD.computeElderRay(i, t.param1, "bull"), n, "bar");
                break;
            case "elderbear":
                vt(RODTAD.computeElderRay(i, t.param1, "bear"), n, "bar");
                break;
            case "kvo":
                et(RODTAD.computeKVO(i), n);
                break;
            case "tsi":
                et(RODTAD.computeTSI(i, t.param1, t.param2, t.param3), n);
                break;
            case "cmo":
                et(RODTAD.computeCMO(i, t.param1), n);
                break;
            case "dpo":
                vt(RODTAD.computeDPO(i, t.param1), n, "curve", 0);
                break;
            case "asi":
                vt(RODTAD.computeASI(i), n, "curve", 0);
                break;
            case "smi":
                et(RODTAD.computeSMI(i, t.param1, t.param2, t.param3, t.param4), n);
                break;
            case "awesome":
                vt(RODTAD.computeAwesome(i, t.param1, t.param2), n, "awesome");
                break;
            case "tvi":
                vt(RODTAD.computeTVI(i, t.param1), n, "tvi");
                break;
            case "moonphase":
                w.chartPeriod >= 0 && vt(RODTAD.computeMoonPhase(i), n, "curve", 0);
                break;
            case "eom":
                vt(RODTAD.computeEaseOfMovement(i, t.param1), n, "curve", 0);
                break;
            case "cmf":
                vt(RODTAD.computeCMF(i, t.param1), n, "curve", 0);
                break;
            case "bollb":
                et(RODTAD.computeBollingerB(i, t.param1, 2, r), n);
                break;
            case "mfi":
                et(RODTAD.computeMFI(i, t.param1), n);
                break;
            case "sto rsi":
                et(RODTAD.computeStochRSI(i, t.param1, t.param2, t.param3, t.param4, r), n);
                break;
            case "ac will":
                vt(RODTAD.computeWILAC(i), n, "curve", 0);
                break;
            case "will r":
                et(RODTAD.computeWILR(i, t.param1), n);
                break;
            case "vroc":
                et(RODTAD.computeVROC(i, t.param1), n);
                break;
            case "macdzl":
                et(RODTAD.computeMACDZL(i, t.param1, t.param2, t.param3), n);
                break;
            case "obv":
                vt(RODTAD.computeOBV(i), n, "curve", 0);
                break;
            case "accDist":
                vt(RODTAD.computeAccDist(i), n, "curve", 0);
                break;
            case "std":
                et(RODTAD.computeSTD(i, t.param1, r), n);
                break;
            case "ulcer":
                et(RODTAD.computeUlcerIndex(i, t.param1, r), n);
                break;
            case "chop":
                et(RODTAD.computeCHOP(i, t.param1), n)
            }
        }
        function vt(n, t, i, r) {
            var f = t.ctx, e, d, p, o, v, g, b, rt, ut, s, ft;
            if (rr(t),
            n == null) {
                iu(t);
                return
            }
            e = t.Indicator;
            d = e.mm;
            d != null && d != 0 && (n.Values = RODTA.computeMM(n.Values, d));
            n.Values = sr(n.Values);
            var nt = n.High, et = n.Low, y = n.Values.length, u, c, l, a, h, tt = 17, it = 5;
            if (e.type == "moonphase" && (it = 0),
            t.PxPointY = (t.HeightPx - tt - it) / (nt - et),
            p = k[0].PxPointX,
            o = w.paddingLeft + w.padBarCandle,
            ur(f, t.HeightPx, o, nt + tt / t.PxPointY, t.PxPointY),
            v = o - 1,
            t.V0 = Math.round(t.PxPointY * nt) + tt,
            g = t.V0 - Math.round(r * t.PxPointY),
            t.Bars = {},
            i == "curve") {
                for (f.strokeStyle = e.v1 ? "transparent" : e.color,
                f.beginPath(),
                f.moveTo(o, g),
                u = 0; u < y; u++)
                    n.Values[u] != null && (c = Math.round(u * p + o),
                    c - v >= 1 && (f.lineTo(c, t.V0 - Math.round(n.Values[u].v1 * t.PxPointY)),
                    v = c),
                    h = u,
                    t.Bars[n.Values[u].d] = n.Values[u].v1);
                h != null && (t.Bars[0] = n.Values[h].v1);
                f.save();
                bi(f, e, 1);
                yt(f, 1, e);
                f.stroke();
                f.restore();
                f.lineTo(v, g);
                f.lineTo(o, g);
                e.v2 || (f.fillStyle = e.color2,
                f.fill())
            }
            if (i == "bar") {
                for (w.padBarCandle != 0 ? (s = Math.floor(w.innerWidth / y) - 1,
                s < 1 && (s = 1),
                o = w.paddingLeft + w.padBarCandle - Math.round(s / 2)) : (o = w.paddingLeft,
                s = 2),
                rt = e.v1 ? "transparent" : e.color,
                ut = e.v2 ? "transparent" : e.color2,
                u = 0; u < y; u++)
                    n.Values[u] != null && (c = Math.round(u * p + o),
                    b = Math.round(-n.Values[u].v1 * t.PxPointY),
                    c - v >= 1 && (f.fillStyle = b <= 0 ? rt : ut,
                    f.fillRect(c, t.V0, s, b),
                    v = c),
                    h = u,
                    t.Bars[n.Values[u].d] = n.Values[u].v1);
                h != null && (t.Bars[0] = n.Values[h].v1)
            }
            if (i == "awesome" || i == "bop" || i == "tvi") {
                for (w.padBarCandle != 0 ? (s = Math.floor(w.innerWidth / y) - 1,
                s < 1 && (s = 1),
                o = w.paddingLeft + w.padBarCandle - Math.round(s / 2)) : (o = w.paddingLeft,
                s = 2),
                h = 0,
                l = 1; l < 4; l++) {
                    if (a = "v" + l,
                    l == 3 && i != "bop")
                        break;
                    for (f.fillStyle = l == 1 ? e.v1 ? "transparent" : e.color : e[a] ? "transparent" : e["color" + l],
                    u = 0; u < y; u++)
                        n.Values[u] != null && n.Values[u][a] != null && (c = Math.round(u * p + o),
                        b = Math.round(-n.Values[u][a] * t.PxPointY),
                        f.fillRect(c, t.V0, s, b),
                        t.Bars[n.Values[u].d] = n.Values[u][a],
                        u > h && (h = u,
                        ft = a))
                }
                h != 0 && (t.Bars[0] = n.Values[h][ft])
            }
            ae(f, t, n.Values, o, p);
            w.set.nosticky || hi(f, t.V0, t.Bars[0] || "", t.PxPointY, e.color);
            iu(t)
        }
        function he(n, i) {
            var e, c, r, l, p, u, a, h, b, v, o, d;
            if (n != null) {
                e = i.ctx;
                c = n.High;
                rr(i);
                r = i.Indicator;
                l = r.mm;
                l != null && l != 0 && (n.Values = RODTA.computeMMonVolume(n.Values, l));
                n.Values = sr(n.Values);
                var g = n.Values.length, f, s = !1, y = 20;
                for (i.PxPointY = (i.HeightPx - y) / c,
                i.V0 = Math.round(i.PxPointY * c) + y,
                p = k[0].PxPointX,
                h = 0,
                u = Math.floor(w.innerWidth / g) - 2,
                u % 2 == 0 && u++,
                u > 21 ? u = 21 : u < 0 ? u = 1 : u < 2 && (u = 2),
                a = w.paddingLeft + w.padBarCandle - Math.round(u / 2),
                ur(e, i.HeightPx, a, c + y / i.PxPointY, i.PxPointY),
                i.Bars = {},
                e.fillStyle = r.v1 ? "transparent" : r.color,
                e.beginPath(),
                v = w.innerWidth + w.paddingLeft,
                (r.type == "volume" || r.type == "volumecash") && (d = 3),
                r.type == "mf" && (d = 5),
                o = 1; o < d; o++) {
                    for (e.fillStyle = o == 1 ? r.v1 ? "transparent" : r.color : r["v" + o] ? "transparent" : r["color" + o] || t(r.type)["color" + o],
                    e.beginPath(),
                    f = 0; f < g; f++)
                        n.Values[f] != null && n.Values[f]["v" + o] && (s = Math.round(f * p + a),
                        s < v && (b = s + u > v ? v - s : u,
                        s < w.paddingLeft && (b = u - (w.paddingLeft - s),
                        s = w.paddingLeft),
                        e.rect(s, i.HeightPx, b, -n.Values[f]["v" + o] * i.PxPointY)),
                        i.Bars[n.Values[f].d] = n.Values[f]["v" + o],
                        f > h && (h = f));
                    e.fill()
                }
                h != null && (i.Bars[0] = i.Bars[n.Values[h].d]);
                ae(e, i, n.Values, a, p);
                w.set.nosticky || hi(e, i.HeightPx, i.Bars[0] || "", i.PxPointY, r.color);
                iu(i)
            }
        }
        function et(n, i) {
            var u = i.ctx, v, it, a, s, f, h, c, l, p, d, g, nt, b;
            if (rr(i),
            iu(i),
            n != null) {
                var e = i.Indicator
                  , o = e.type
                  , tt = e.mm;
                tt != null && tt != 0 && (n.Values = RODTA.computeMM(n.Values, tt));
                v = 17;
                it = 5;
                (o == "rsi" || o == "ultimate") && (v = 0,
                it = 0);
                n.Values = sr(n.Values);
                var rt = n.High
                  , ut = n.Low
                  , y = n.Values.length;
                if (i.PxPointY = (i.HeightPx - v - it) / (rt - ut),
                a = k[0].PxPointX,
                s = w.paddingLeft + w.padBarCandle,
                ur(u, i.HeightPx, s, rt + v / i.PxPointY, i.PxPointY),
                c = s - 1,
                i.V0 = Math.round(i.PxPointY * rt) + v,
                i.Bars = {},
                o == "roc" || o == "rsi" || o == "di" || o == "disp" || o == "vpn" || o == "cci") {
                    u.beginPath();
                    u.strokeStyle = "#99ccff";
                    switch (o) {
                    case "roc":
                        p = 100;
                        break;
                    case "rsi":
                        p = 50;
                        break;
                    case "di":
                    case "disp":
                    case "vpn":
                    case "cci":
                        p = 0
                    }
                    u.moveTo(w.paddingLeft, i.V0 - Math.round(p * i.PxPointY) + .5);
                    u.lineTo(w.widthGraph - w.paddingRight, i.V0 - Math.round(p * i.PxPointY) + .5);
                    u.stroke()
                }
                for (o == "wto" && (u.beginPath(),
                u.strokeStyle = "rgba(255,0,0,0.7)",
                u.moveTo(w.paddingLeft, i.V0 - Math.round(53 * i.PxPointY) + .5),
                u.lineTo(w.widthGraph - w.paddingRight, i.V0 - Math.round(53 * i.PxPointY) + .5),
                u.stroke(),
                u.beginPath(),
                u.strokeStyle = "rgba(0,128,0,0.7)",
                u.moveTo(w.paddingLeft, i.V0 - Math.round(-53 * i.PxPointY) + .5),
                u.lineTo(w.widthGraph - w.paddingRight, i.V0 - Math.round(-53 * i.PxPointY) + .5),
                u.stroke()),
                u.strokeStyle = e.v1 ? "transparent" : e.color,
                u.beginPath(),
                d = 0,
                u.moveTo(s, i.V0 - Math.round(n.Values[0].v1 * i.PxPointY)),
                f = 1; f < y; f++)
                    n.Values[f] != null && n.Values[f].v1 != null && (h = Math.round(f * a + s),
                    h - c >= 1 && (u.lineTo(h, i.V0 - Math.round(n.Values[f].v1 * i.PxPointY)),
                    c = h),
                    i.Bars[n.Values[f].d] = o == "aroon" ? [{
                        t: "Up: ",
                        v: n.Values[f].v1
                    }, {
                        t: " Down: ",
                        v: n.Values[f].v2
                    }] : n.Values[f].v1,
                    l = f);
                if (l != null && (i.Bars[0] = n.Values[l].v1),
                u.save(),
                bi(u, e, 1),
                yt(u, 1, e),
                u.stroke(),
                u.restore(),
                n.Values[0].v2 != null) {
                    for (c = s - 1,
                    u.strokeStyle = e.v2 ? "transparent" : e.color2,
                    u.beginPath(),
                    u.moveTo(s, i.V0 - Math.round(n.Values[0].v2 * i.PxPointY)),
                    f = 1; f < y; f++)
                        n.Values[f] != null && (h = Math.round(f * a + s),
                        h - c >= 1 && (u.lineTo(h, i.V0 - Math.round(n.Values[f].v2 * i.PxPointY)),
                        c = h),
                        d = n.Values[f].v2);
                    u.save();
                    bi(u, e, 2);
                    yt(u, 2, e);
                    u.stroke();
                    u.restore()
                }
                if (o == "dmi") {
                    for (u.strokeStyle = e.v3 ? "transparent" : e.color3,
                    u.beginPath(),
                    u.moveTo(s, i.V0 - Math.round(n.Values[0].v3 * i.PxPointY)),
                    f = 0; f < y; f++)
                        n.Values[f] != null && (h = Math.round(f * a + s),
                        u.lineTo(h, i.V0 - Math.round(n.Values[f].v3 * i.PxPointY)));
                    for (u.save(),
                    bi(u, e, 3),
                    yt(u, 3, e),
                    u.stroke(),
                    u.restore(),
                    i.Bars = {},
                    f = 0; f < y; f++)
                        n.Values[f] != null && (i.Bars[n.Values[f].d] = [{
                            t: "DI+ : ",
                            v: n.Values[f].v1
                        }, {
                            t: " DI- : ",
                            v: n.Values[f].v2
                        }, {
                            t: " ADX : ",
                            v: n.Values[f].v3
                        }],
                        l = f);
                    l != null && (i.Bars[0] = n.Values[l].v1)
                }
                if (o == "macd" || o == "macdzl" || o == "wto") {
                    for (c = s - 1,
                    u.beginPath(),
                    u.moveTo(s, i.V0),
                    g = e.v3 ? "transparent" : e.color3 != null ? e.color3 : g = r(RODTL.rgb2hex(e.color2), .5),
                    u.strokeStyle = g,
                    i.Bars = {},
                    f = 0; f < y; f++)
                        n.Values[f] != null && (h = Math.round(f * a + s),
                        h - c >= 1 && (u.lineTo(h, i.V0 - Math.round((n.Values[f].v1 - n.Values[f].v2) * i.PxPointY)),
                        c = h),
                        l = f,
                        i.Bars[n.Values[f].d] = n.Values[f].v1 - n.Values[f].v2);
                    l != null && (i.Bars[0] = n.Values[l].v1);
                    u.stroke();
                    u.lineTo(h, i.V0);
                    u.lineTo(s, i.V0);
                    u.fillStyle = g;
                    u.fill()
                }
                ae(u, i, n.Values, s, a);
                t(e.type).sb != null && (nt = e.sh != null ? e.sh : t(e.type).sh,
                b = e.sb != null ? e.sb : t(e.type).sb,
                e.sh != 9999 && (u.beginPath(),
                e.shs == 3 && (u.lineWidth = 3),
                u.strokeStyle = "rgba(255,0,0,0.5)",
                u.moveTo(w.paddingLeft, Math.round(i.V0 - nt * i.PxPointY) + .5),
                u.lineTo(w.widthGraph - w.paddingRight, Math.round(i.V0 - nt * i.PxPointY) + .5),
                u.stroke(),
                (e.shs == null || e.shs == 1) && (u.fillStyle = "rgba(255,0,0,0.15)",
                u.fillRect(w.paddingLeft, 1, w.innerWidth, i.V0 - Math.round(nt * i.PxPointY)))),
                e.sb != 9999 && (u.beginPath(),
                u.lineWidth = e.sbs == 3 ? 3 : 1,
                u.strokeStyle = "rgba(0,128,0,0.5)",
                u.moveTo(w.paddingLeft, Math.round(i.V0 - b * i.PxPointY) + .5),
                u.lineTo(w.widthGraph - w.paddingRight, Math.round(i.V0 - b * i.PxPointY) + .5),
                u.stroke(),
                (e.sbs == null || e.sbs == 1) && (u.fillStyle = "rgba(0,128,0,0.15)",
                u.fillRect(w.paddingLeft, i.V0 - Math.round(b * i.PxPointY), w.innerWidth, i.V0 - Math.round(b * i.PxPointY)))),
                u.lineWidth = 1);
                w.set.nosticky || (d != 0 ? (hi(u, i.V0, d, i.PxPointY, e.color2),
                hi(u, i.V0, i.Bars[0] || "", i.PxPointY, e.color)) : hi(u, i.V0, i.Bars[0] || "", i.PxPointY, e.color))
            }
        }
        function gr() {
            var t = w.histoLength, i;
            t <= 20 ? t = t + " JOUR" + (t != 1 ? "S" : "") : t < 365 ? (t = Math.round(t / 30),
            t = t + " MOIS") : (t = Math.round(t / 365),
            t = t + " AN" + (t != 1 ? "S" : ""));
            i = w.chartPeriod;
            switch (i) {
            case 0:
                i = "JOUR";
                break;
            case 7:
                i = "HEBDO";
                break;
            case 30:
                i = "MENSUEL";
                break;
            case 91:
                i = "TRIMESTRIEL";
                break;
            case 365:
                i = "ANNUEL";
                break;
            default:
                i = i >= -60 ? Math.abs(i) + " MINUTE" + (i != -1 ? "S" : "") : Math.round(i / -60) + " HEURES"
            }
            n.qstxt(it("#eod_topinfo-") + " span:last-child", t + " - " + i)
        }
        function vi(n) {
            bt = {};
            k = [];
            ei();
            n || typeof stopTimers == "function" && stopTimers()
        }
        function oh() {
            var t, r, n, u, f, i, e, o, s;
            for (r = [0, .25, .2, .1666, .15, .13, .12][w.indicators.length],
            u = [1, .75, .6, .5002, .4, .35, .28][w.indicators.length],
            t = u,
            f = new yi(0,u,w.mainChart.type,it("main-"),0),
            f.Create(),
            f.DrawEncadre(),
            i = w.indicators.length,
            n = 0; n < i; n++)
                e = new yi(t,r,w.indicators[n],it("indic-") + (n + 1),w.marginInter * (n + 1)),
                e.Create(),
                e.DrawEncadre(),
                o = Math.round(t * w.usableHeight) + w.paddingTop + w.marginInter * (n + 1) + 5,
                s = pe(pt + (n + 1), w.indicators[n].type, w.paddingLeft + 5, o),
                tt.doc.appendChild(s),
                t = t + r,
                i > 1 && (n == i - 1 ? cr(n + 1, !0) : cr(n + 1, !1))
        }
        function it(n) {
            return n + pt
        }
        function ce() {
            ki = {
                params: null,
                trades: []
            }
        }
        function sh(n) {
            for (var i = kt(0), u, r, f = n.length, t = 0; t < f; t++)
                u = new wt(n[t].dateEntry,n[t].quoteEntry,null,0),
                n[t].sensOpen == "A" ? si(i.ctx, u, "#008000", "arrup", "#008000", 0) : si(i.ctx, u, "#c00000", "arrdw", "#c00000", 0),
                r = new wt(n[t].dateExit,n[t].quoteExit,null,0),
                n[t].sensClose == "S" ? n[t].sensOpen == "A" ? si(i.ctx, r, "#c00000", "arrdw", "#ff8080", 0) : si(i.ctx, r, "#008000", "arrup", "#73f072", 0) : n[t].sensClose == "TP" ? n[t].sensOpen == "A" ? si(i.ctx, r, "#3366ff", "arrdw", "#3366ff", 0) : si(i.ctx, r, "#3366ff", "arrup", "#3366ff", 0) : n[t].sensClose == "A" ? si(i.ctx, r, "#008000", "arrup", "#008000", 0) : si(i.ctx, r, "#c00000", "arrdw", "#c00000", 0)
        }
        function hh(n, i) {
            var u, f, r, s, h;
            if (u = i ? n.type : n,
            g.flagSave = !0,
            ii(),
            w.mainChart.typedef.nolinearX) {
                if (nt.maxX = 0,
                nt.minX = 0,
                d.Low == null && c(d),
                nt.minY = d.Low,
                nt.maxY = d.High,
                w.isCompare && ef(d.High, d.Low, d.QuoteTab[0].c),
                w.mainChart.type = u,
                w.mainChart.typedef = t(u),
                i && (w.mainChart = e(w.mainChart, n)),
                k.length > 1 && k.splice(0, 1),
                w.mainChart.typedef.nolinearX) {
                    ye();
                    return
                }
                for (w.histoLength != 1 || w.set.noVeilleIntra || (f = d.qv.c,
                f > nt.maxY && (nt.maxY = f),
                f < nt.minY && (nt.minY = f)),
                s = k.length,
                r = 0; r < s; r++)
                    k[r].Bars = r == 0 ? [] : {},
                    delete k[r].canvas,
                    delete k[r].ctx;
                h = o(k);
                vi(!0);
                ir(h);
                gr();
                di(w.symbol);
                ft();
                dt();
                return
            }
            w.mainChart.type = u;
            w.mainChart.typedef = t(u);
            i && (w.mainChart = e(w.mainChart, n));
            w.mainChart.typedef.nolinearX ? ye() : ft()
        }
        function le() {
            var n = new XMLHttpRequest;
            n.open("GET", VGP.urlWS + "TraceDeleteSymbol?userid=" + VGP.userID + "&symbol=" + w.symbol, !0);
            n.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            n.send()
        }
        function cl(n, t, i) {
            var u = "GetCalendar", r;
            i == "actu" && (u = "GetNewsList");
            ei();
            r = new XMLHttpRequest;
            r.open("GET", VGP.urlWS + u + "?symbol=" + w.symbol, !0);
            r.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            r.onload = function() {
                if (r.status >= 200 && r.status < 400) {
                    var u = JSON.parse(r.responseText);
                    u != null && u != "" ? (g.fiEvt = u,
                    ch(n, t, i)) : g.fiEvt = "no";
                    dt()
                }
            }
            ;
            r.send()
        }
        function ll(n, t, i) {
            var ut;
            if (dr(n.color, "pivots", lang.l_ptpivot, t),
            k[0].Bars[t + 1] = null,
            !(w.chartPeriod >= 0) && nt.qv != null && nt.qd != null) {
                var g, r, o = new Date, tt = o.getHours() * 60 + o.getMinutes(), ft = o.getFullYear().toString().substring(2, 4) + u(o.getMonth() + 1, "00") + u(o.getDate(), "00") + u(tt, "0000"), it = ft - d.QuoteTab[d.QuoteTab.length - 1].d, l = yh(), s, et = d.QuoteTab.length, a = l.length, p;
                if (a == 1)
                    p = {
                        h: nt.qv.h,
                        l: nt.qv.l,
                        c: nt.qv.c
                    };
                else {
                    var ot = l[a - 2].d0, rt = l[a - 1].d0, f, b, v = -100, y = 999999;
                    for (s = 0; s < et; s++)
                        if (f = d.QuoteTab[s],
                        f.d >= ot && f.d < rt)
                            f.h > v && (v = f.h),
                            f.l < y && (y = f.l);
                        else if (f.d == rt) {
                            b = d.QuoteTab[s - 1].c;
                            break
                        }
                    b && v != -100 && y != 999999 && (p = {
                        h: v,
                        l: y,
                        c: b
                    })
                }
                r = p || nt.qv;
                it > 240 ? r = nt.qd : it > 30 && tt > 1080 && (r = nt.qd);
                ut = l[a - 1].d0;
                g = new wt(ut,0,null,0);
                var e = k[0].ctx
                  , h = (r.h + r.l + r.c) / 3
                  , st = 2 * h - r.l
                  , ht = h + (r.h - r.l)
                  , ct = 2 * h - r.h
                  , lt = h - (r.h - r.l)
                  , c = g.mx + w.paddingLeft;
                e.save();
                n.v1 || nu(e, n.color, c, h, 1, i);
                n.v2 || (nu(e, n.color2, c, ct, 1, i),
                nu(e, n.color2, c, lt, 2, i));
                n.v3 || (nu(e, n.color3, c, st, 1, i),
                nu(e, n.color3, c, ht, 2, i));
                e.restore()
            }
        }
        function nu(n, t, i, r, u, f) {
            var o = st(r, f) + .5 * u
              , e = w;
            n.lineWidth = u;
            n.beginPath();
            n.strokeStyle = t;
            n.moveTo(i, o);
            n.lineTo(e.widthGraph - e.paddingRight, o);
            n.fillStyle = RODTL.rgb2hex(t);
            n.fillText(r.toFixed(2), e.widthGraph - e.paddingRight - 47, o - 3);
            n.stroke()
        }
        function al(t, i, r) {
            var h = {}, u = k[0], o, l, f, p, e, a, c, s, v, b, y, tt;
            if (u.Bars[r + 1] = {},
            !t.datas2) {
                dr(t.color, "compare", "NC", r, !0);
                return
            }
            if (o = t.datas2.QuoteTab,
            dr(t.color, "compare", t.datas2.Name, r, !0),
            !t.v1) {
                for (l = o.length,
                f = u.ctx,
                f.strokeStyle = t.color,
                f.save(),
                f.beginPath(),
                a = u.PxPointY * d.QuoteTab[nt.minX].c,
                c = Math.round((u.V0 - d.QuoteTab[nt.minX].c) * u.PxPointY),
                f.moveTo(i, c),
                bi(f, t, 1),
                yt(f, 1, t),
                s = 0,
                e = 0; e < l; e++)
                    o[e] != null && u.Bars[0][o[e].d] != null && (b = u.Bars[0][o[e].d].i,
                    p = Math.round(b * u.PxPointX + i),
                    s == 0 ? s = o[e].c : (v = (o[e].c - s) / s,
                    f.lineTo(p + .5, c - v * a),
                    h[o[e].d] = o[e].c,
                    y = e));
                y != null && (h[0] = o[y].c);
                u.Bars[r + 1] = h;
                g.isMoving || g.isTranslating || !w.set.indicValues || VGP.chartSimple || n.idst(it("val-") + r, ci(h[0]));
                f.stroke();
                f.restore();
                w.set.nosticky || l == 0 || (tt = u.V0 - (c - v * a) / u.PxPointY,
                hi(f, u.V0, tt, u.PxPointY, t.color, !0, null))
            }
        }
        function ch(n, t, i) {
            var o, v;
            if (g.fiEvt != "no") {
                if (g.fiEvt.length == 0) {
                    g.fiEvt = "no";
                    return
                }
                var e = [], r, c, f = k[0], y = lang.l_fievents;
                i == "actu" && (y = lang.l_actus);
                f.Bars[t + 1] = [];
                dr(null, "evt", y, t);
                var p = d.QuoteTab[nt.minX].d, l = d.QuoteTab[d.QuoteTab.length - 1].d, tt = g.fiEvt.length, h;
                for (r = 0; r < tt; r++) {
                    if (g.fiEvt[r].d > p && g.fiEvt[r].d <= l)
                        if (f.Bars[0][g.fiEvt[r].d] != null)
                            e[f.Bars[0][g.fiEvt[r].d].i] = {
                                i: r,
                                evt: g.fiEvt[r].evt
                            };
                        else
                            for (c = nt.minX; c <= nt.maxX; c++)
                                if (h = d.QuoteTab[c],
                                h != null && h.d >= g.fiEvt[r].d && f.Bars[0][h.d] != null) {
                                    e[f.Bars[0][h.d].i] = {
                                        i: r,
                                        evt: g.fiEvt[r].evt
                                    };
                                    break
                                }
                    g.fiEvt[r].d > p && g.fiEvt[r].d > l && f.Bars[0][l] != null && (o = g.fiEvt[r].d - d.QuoteTab[d.QuoteTab.length - 1].d,
                    o = w.chartPeriod != 0 ? Math.round(o / w.chartPeriod) : Math.round(o * 5 / 7),
                    v = f.Bars[0][l].i + o,
                    v <= nt.maxX - o + 2 && (e[v] = {
                        i: r,
                        evt: g.fiEvt[r].evt
                    }))
                }
                var u = f.ctx, s, a = f.HeightPx - 15, b = e.length;
                if (b != null)
                    for (r = 1; r < b; r++)
                        if (e[r] != null) {
                            s = Math.round(r * f.PxPointX + n);
                            g.fiEvt[e[r].i].px = s;
                            u.beginPath();
                            u.lineWidth = 2;
                            switch (e[r].evt) {
                            case "A":
                            case "R":
                                u.fillStyle = "#ffd5d6";
                                u.strokeStyle = "#c00000";
                                break;
                            case "D":
                                u.fillStyle = "#d5d6ff";
                                u.strokeStyle = "#000080";
                                break;
                            case "C":
                                u.fillStyle = "#c0ffc0";
                                u.strokeStyle = "#008000";
                                break;
                            case "S":
                                u.fillStyle = "#ffc0ff";
                                u.strokeStyle = "#800080"
                            }
                            u.arc(s, a, 10, 0, 2 * Math.PI);
                            u.stroke();
                            u.fill();
                            u.beginPath();
                            u.lineWidth = 1;
                            u.moveTo(s + .5, a + 10);
                            u.lineTo(s + .5, a + 15);
                            u.stroke();
                            u.fillStyle = u.strokeStyle;
                            u.fillText(e[r].evt, s - 4, a + 3)
                        }
            }
        }
        function vl(n, t) {
            var i = (n - t) / 100;
            t = t - i;
            t <= 0 && (t = (t + i) * .98);
            var r = Math.log10(t) / Math.log10(10)
              , u = Math.log10(n + 4 * i) / Math.log10(10)
              , f = u - r;
            return {
                floor: r,
                ceil: u,
                range: f
            }
        }
        function tu(n, t) {
            var i, r = n.length - t;
            for (r < 0 && (r = 0),
            i = r; i >= 0; i--)
                if (n[i] != null)
                    return n[i]
        }
        function ae(n, t, i, r, u) {
            if (i[0].vm != null) {
                var s = r - 1, e, h = i.length, o = t.V0, f;
                for ((t.Indicator.type == "volume" || t.Indicator.type == "volumecash") && (o = t.HeightPx),
                n.strokeStyle = t.Indicator.mmColor,
                n.beginPath(),
                n.moveTo(r, o - Math.round(i[0].vm * t.PxPointY)),
                f = 1; f < h; f++)
                    i[f] != null && (e = Math.round(f * u + r),
                    e - s >= 2 && (n.lineTo(e, o - Math.round(i[f].vm * t.PxPointY)),
                    s = e));
                n.stroke()
            }
        }
        function gi(n) {
            var t, i, r, u, f;
            return n.indexOf("#") != -1 ? (t = n.substring(1),
            t.length == 3 && (t = t + t)) : t = RODTL.rgb2hex(n).substring(1),
            i = parseInt(t, 16),
            r = i >> 16 & 255,
            u = i >> 8 & 255,
            f = i >> 0 & 255,
            .2126 * r + .7152 * u + .0722 * f
        }
        function ve(n) {
            var t = gi(n);
            return t > 130 ? "#000" : "#fff"
        }
        function ye() {
            var t, r, i, u, f;
            for (n.idempty(it("")),
            r = k.length,
            bt = {},
            t = 0; t < r; t++)
                k[t].Bars = t == 0 ? [] : {},
                delete k[t].canvas,
                delete k[t].ctx;
            for (ei(),
            nt.maxY = d.High,
            nt.minY = d.Low,
            ai("rodgraph", tt.doc),
            oi = n.gi(it("rodgraph-")).getContext("2d"),
            br(),
            VGP.chartSimple || (ai("topinfo", tt.doc),
            ai("mainci", tt.doc)),
            i = o(k, !0),
            k = [],
            u = new yi(0,1,w.mainChart.type,"main",0),
            u.Create(),
            f = i.length,
            t = 0; t < f; t++)
                k.push(i[t]);
            k[0].DrawEncadre();
            VGP.chartSimple || (ai("overlay", tt.doc),
            ai("trace", tt.doc),
            n.qstxt(it("#eod_topinfo-") + " span", d.Name));
            gr();
            cf(!0);
            w.mainChart.type != "season" && dt()
        }
        function lh() {
            var n = k[0]
              , t = n.ctx;
            br();
            n.DrawEncadre();
            RODNL.drawSeasonChart(g.dataSeason.QuoteTab, t, w, n, g.dataSeason.Name, oi, pt);
            VGP.isPro && tt.doc.addEventListener("mousedown", ah)
        }
        function ah() {
            tt.doc.classList.contains("eod_active") || (n.qsarclass(".eod_container", "eod_active"),
            tt.doc.classList.add("eod_active"),
            callUpdateInfosFull(w.symbol))
        }
        function vh() {
            if (typeof stopTimers == "function" && stopTimers(),
            ei(),
            g.dataSeason == null) {
                var t = new XMLHttpRequest;
                t.open("GET", VGP.urlWS + "GetTicksEOD?symbol=" + w.symbol + "&length=3650&period=30&guid=" + n.gigt("guid"), !0);
                t.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                t.onload = function() {
                    if (t.status >= 200 && t.status < 400) {
                        var n = JSON.parse(t.responseText);
                        if (n != null && n != "")
                            g.dataSeason = n,
                            d == null && (d = n),
                            lh();
                        else
                            return
                    }
                }
                ;
                t.send()
            } else
                lh()
        }
        function cf(t) {
            var f, r = w, p = r.mainChart.typedef, i = p.param1, s = "", e = k[0], o, h, rt, u, v, ft, et, y, tt;
            bt = {};
            o = "c";
            p.source != null && (o = p.source);
            switch (r.mainChart.type) {
            case "renko":
                if (i == null && (i = +((d.High - d.Low) / 20).toFixed(2)),
                s = i,
                f = RODNL.computeRENKO(d, i, o),
                !f)
                    return;
                (f.QuoteTab.length > 700 || f.QuoteTab.length < 5) && (i = +((d.High - d.Low) / 20).toFixed(2),
                f = RODNL.computeRENKO(d, i, o));
                break;
            case "line break":
                (i > 5 || i < 1 || i == null) && (i = 2);
                s = i;
                f = RODNL.computeLineBreak(d, i, o);
                break;
            case "kagi":
                i == null && (i = +((d.High - d.Low) / 30).toFixed(2));
                f = RODNL.computeKagi(d, i, o);
                s = i;
                break;
            case "season":
                vh();
                return;
            case "equivolume":
                f = d;
                break;
            case "point figure":
                i == null && (i = ((d.High - d.Low) / 50).toFixed(2));
                h = p.param2;
                h == null && (h = 3);
                f = RODNL.computePnF(d, i, h, o);
                s = i + ", " + h
            }
            if (rt = "",
            gi(w.set.bkcolor) < 130 && (rt = " filter1"),
            VGP.chartSimple || n.idhtml(it("eod_mainchartinfos-"), '<span class="eod_param" data-name="' + r.mainChart.type + '"><span class="mci-p' + rt + '"><\/span> ' + r.mainChart.type.toUpperCase() + " (" + s + ")<\/span>"),
            u = {
                Name: f.Name,
                High: f.High,
                Low: f.Low,
                QuoteTab: f.QuoteTab
            },
            u.QuoteTab != null && u.QuoteTab.length != 0) {
                nt.maxNL = u.QuoteTab.length;
                (nt.maxX == 0 && nt.minX == 0 || t) && (nt.maxX = u.QuoteTab.length - 1,
                nt.minX = 0);
                u.QuoteTab = sr(f.QuoteTab);
                var b = u.High
                  , ut = u.Low
                  , g = u.QuoteTab.length;
                nt.maxY == 0 && nt.minY == 0 ? (nt.maxY = b,
                nt.minY = ut) : (b = nt.maxY,
                ut = nt.minY);
                e.PxPointY = (e.HeightPx - 57) / (b - ut);
                e.V0 = b + 37 / e.PxPointY;
                var c = e.V0
                  , l = e.PxPointY
                  , a = e.ctx;
                g != 0 && (v = Math.floor(r.innerWidth / g) - 1,
                v % 2 == 0 && v++,
                r.padBarCandle = v,
                ft = r.paddingLeft + r.padBarCandle,
                ur(a, e.HeightPx, ft, c, l),
                et = (r.innerWidth - 2 * r.padBarCandle) / (g - 1),
                e.PxPointX = et,
                r.mainChart.type == "equivolume" ? (u = RODNL.computeEquivolume(u, r.innerWidth - 5),
                rr(e, !0, u.QuoteTab, !0)) : rr(e, !0, u.QuoteTab),
                ti = [],
                e.Bars[0] = {},
                y = {},
                tt = RODNL.drawNoLinear(r, a, l, c, u, v, ft, i, et),
                ti = tt.tickPx,
                bt = tt.bars,
                y = tt.BarsMM,
                e.Bars[0] = y,
                g != 0 && y[0] != null && r.mainChart.type != "point figure" && (r.set.nohighlow || (hi(a, c, u.High, l, "rgba(0, 128, 0, 1)", !0),
                hi(a, c, u.Low, l, "rgba(192, 0, 0, 1)", !0)),
                r.set.nosticky || hi(a, c, y[0].c, l, null, !0)))
            }
        }
        function hr(n, t, i, r, u, f, e) {
            var c = st(i.l, e), l = st(i.h, e), h = st(i.o, e), s = st(i.c, e), o;
            n.rect(r + .5, s + .5, t - 1, h - s);
            o = r + .5 + u;
            w.mainChart.typedef.v3 || (n.moveTo(o, l),
            n.lineTo(o, s),
            n.moveTo(o, h),
            n.lineTo(o, c));
            ti[Math.floor(o) - w.paddingLeft] = {
                d: i.d,
                i: f
            }
        }
        function yh() {
            for (var r = d.QuoteTab.length, i = [], t = {
                d0: d.QuoteTab[0].d,
                c: nt.qv.c
            }, n = 1; n < r; n++)
                d.QuoteTab[n].d - d.QuoteTab[n - 1].d > 480 && (t.d = d.QuoteTab[n - 1].d,
                i.push(t),
                t = {
                    d0: d.QuoteTab[n].d,
                    c: d.QuoteTab[n - 1].c
                });
            return t.d = d.QuoteTab[r - 1].d,
            i.push(t),
            i
        }
        function iu(n, t, i) {
            var h;
            if (!(w.histoLength > 20)) {
                var o, s = yh(), l = s.length, u = n.ctx, c, e, f, a;
                for (u.save(),
                h = w.set.splitColor,
                e = w.widthGraph - w.paddingRight,
                o = l - 1; o >= 0; o--)
                    a = st(s[o].c, i),
                    k[0].Bars[0][s[o].d0] != null ? (c = k[0].Bars[0][s[o].d0].i,
                    f = Math.round(c * k[0].PxPointX) + .5 + w.paddingLeft + w.padBarCandle) : f = 0,
                    k[0].Bars[0][s[o].d] != null ? (c = k[0].Bars[0][s[o].d].i,
                    e = Math.round(c * k[0].PxPointX) + .5 + w.paddingLeft + w.padBarCandle) : e = 0,
                    e < f && (e = w.widthGraph - w.paddingRight),
                    e == 0 && (e = w.paddingLeft),
                    f == 0 && (f = w.paddingLeft),
                    l == 1 && e == 0 && f == 0 && (e = w.widthGraph - w.paddingRight,
                    f = w.paddingLeft),
                    !w.set.noVeilleIntra && t && (u.strokeStyle = w.set.veilleColor,
                    u.lineWidth = w.set.veilleWidth || 1,
                    w.set.veilleStyle ? yt(u, 0) : yt(u, 3),
                    u.beginPath(),
                    u.moveTo(e, a + .5),
                    u.lineTo(f, a + .5),
                    u.stroke()),
                    w.set.splitStyle != "none" && l > 1 && (w.set.splitStyle == "band" ? o % 2 == 0 && (u.fillStyle = v(h) == 1 ? r(RODTL.rgb2hex(h), .2) : h,
                    u.fillRect(f, 0, e - f, n.HeightPx)) : f != w.paddingLeft && (u.strokeStyle = RODTL.rgb2hex(h),
                    yt(u, 2),
                    u.beginPath(),
                    u.moveTo(f, 0),
                    u.lineTo(f, n.HeightPx),
                    u.stroke()));
                u.restore()
            }
        }
        function pe(n, t, i, r) {
            var f = document.createElement("div"), e, o, u;
            for (f.setAttribute("class", "infoindic"),
            f.style.left = i + "px",
            f.style.top = r + "px",
            f.style.width = w.innerWidth - 7 + "px",
            f.id = "infoindic-" + n,
            w.set.fontSize != 12 && (f.style.fontSize = w.set.fontSize + "px"),
            u = ["closelayericon", "paramlayericon", "indicname", "indicval", "eodupdown", "zoompanel"],
            VGP.chartSimple ? u = ["indicname"] : (VGP.noCommand || VGP.noEvents) && (u = ["indicname", "indicval"]),
            e = 0; e < u.length; e++)
                o = document.createElement("span"),
                w.set.txtColor != "#606060" && (o.style.color = w.set.txtColor),
                (u[e] == "closelayericon" || u[e] == "paramlayericon") && gi(w.set.bkcolor) < 130 ? o.setAttribute("class", u[e] + " filter1") : o.setAttribute("class", u[e]),
                u[e] == "indicname" && (o.textContent = t),
                f.appendChild(o);
            return f
        }
        function ph(n) {
            var i = w, e = new yi(0,n[0].Height,i.mainChart.type,it("main-"),0), r, t, u, f, o;
            for (e.Create(),
            e.DrawEncadre(),
            r = n.length,
            t = 1; t < r; t++)
                u = new yi(n[t].Y,n[t].Height,n[t].Indicator,it("indic-") + t,i.marginInter * t),
                u.Create(),
                u.DrawEncadre(),
                o = Math.round(n[t].Y * i.usableHeight) + i.paddingTop + i.marginInter * t + 5,
                f = pe(pt + t, n[t].Indicator.type, i.paddingLeft + 5, o),
                n[t].Height == 0 && (f.style.display = "none"),
                tt.doc.appendChild(f),
                r > 2 && (t == r - 1 ? cr(t, !0) : cr(t, !1))
        }
        function ii(t) {
            var i, r;
            if (VGP.isPro && t != !0) {
                extCloseToolsWindows();
                return
            }
            af();
            typeof RODORD == "object" && RODORD.stopOrders();
            i = document.querySelector(".linemodif");
            i != null && (document.removeEventListener("keydown", nc),
            document.removeEventListener("keydown", gh),
            i.getAttribute("cid") == pt && (ni(),
            [].forEach.call(n.qsa(".traceCvs"), function(n) {
                n.removeEventListener("touchend", ar);
                n.removeEventListener("mousedown", ar)
            }),
            n.clrem(["linemodif", "resizehandler"]),
            dt(),
            r = parseInt(i.getAttribute("layer")),
            w.chartPeriod >= 0 && g.flagSave && !VGP.noAutoSaveTrace && r == 0 && we()));
            g.flagSave = !1
        }
        function we(n) {
            var t, i;
            if (!h())
                return !1;
            if (t = localStorage.getItem(w.symbol),
            t == "[]" || t == null)
                return le(),
                delete VGP.drawings[w.symbol],
                !1;
            if (n)
                return t;
            i = new XMLHttpRequest;
            i.open("POST", VGP.urlWS + "TraceSaveSymbol", !0);
            i.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            i.send(JSON.stringify({
                userid: VGP.userID,
                symbol: w.symbol,
                content: t
            }))
        }
        function wh() {
            var f = w.heightGraph - w.paddingBottom - w.paddingTop, i = k.length, r, e, t, s, h, o, c, u;
            for (i > 1 && (f = f - w.marginInter * (i - 1)),
            w.usableHeight = f,
            s = [0, .25, .2, .1666, .15, .13, .12],
            h = [1, .75, .6, .5002, .4, .35, .28],
            e = s[i - 1],
            o = h[i - 1],
            r = o,
            k[0].Resize(0, o, 0),
            t = 1; t < i; t++)
                c = Math.round(r * w.usableHeight) + w.paddingTop + w.marginInter * t + 5,
                k[t].Resize(r, e, t * w.marginInter),
                n.idcss(it("infoindic-") + t, "top", c + "px"),
                r = r + e,
                i > 2 && (t == i - 1 ? cr(t, !0) : cr(t, !1)),
                u = n.gi(it("tindic-") + t),
                u.height = k[t].HeightPx,
                u.style.top = k[t].RealY + "px";
            u = n.gi(it("trace-"));
            u.height = k[0].HeightPx
        }
        function cr(t, i) {
            if (!VGP.noCommand) {
                var u, r = "";
                gi(w.set.bkcolor) < 130 && (r = " filter1");
                u = i ? '<span class="eodmoveup' + r + '"/><\/span>' : t > 1 ? '<span class="eodmoveup' + r + '" /><\/span><span class="eodmovedown' + r + '" /><\/span>' : '<span class="eodmovedown' + r + '" /><\/span>';
                n.qshtml(it("#infoindic-") + t + " .eodupdown", u)
            }
        }
        function bh(t) {
            var r, u, f, e, o, s, i;
            g.MemoryLayers == null && (r = k.length,
            u = new yi(0,0,t,it("indic-") + r),
            u.Create(),
            f = n.gi(it("overlay-")),
            f.parentNode.insertBefore(u.canvas, f),
            e = pe(pt + r, t.type, w.paddingLeft + 5, k[r].RealY + 5),
            r > 1 && !VGP.noCommand && (o = e.querySelector(".eodupdown"),
            o != null && (s = document.createElement("span"),
            s.setAttribute("class", "eodmoveup"),
            o.appendChild(s))),
            tt.doc.appendChild(e),
            i = document.createElement("canvas"),
            i.width = w.innerWidth,
            i.style.left = w.paddingLeft + "px",
            i.id = "t" + u.id,
            i.setAttribute("class", "traceCvs"),
            tt.doc.appendChild(i),
            wh(),
            ft())
        }
        function lr(t) {
            var u, r, i, f;
            for (g.MemoryLayers != null && ke(),
            n.idrem(it("indic-") + t),
            n.idrem(it("infoindic-") + t),
            n.idrem(it("tindic-") + t),
            u = [],
            u[0] = k[0],
            r = 1,
            f = k.length,
            i = 1; i < f; i++)
                i != t && (u[r] = k[i],
                n.gi(it("indic-") + i).setAttribute("id", it("indic-") + r),
                n.gi(it("infoindic-") + i).setAttribute("id", it("infoindic-") + r),
                n.gi(it("tindic-") + i).setAttribute("id", it("tindic-") + r),
                n.qsaempty(it("#infoindic-") + r + " .eodupdown"),
                r++);
            k = u;
            wh();
            ct(w.symbol);
            ft()
        }
        function ut(n, t, i, r, u, f, e, o, s, h, c, l, a, v) {
            this.x0 = t;
            this.y0 = i;
            this.x1 = r;
            this.y1 = u;
            this.color = f;
            this.type = c;
            this.width = s != null ? s : 1;
            this.style = h != null ? h : 1;
            v != null && (this.fontSize = v);
            l != null && (this.h = l);
            a != null && (this.color2 = a);
            var y = k[n];
            w.set.semilog && w.logData != null && i != 0 && u != 2e4 ? (this.RealY0 = st(i, w.logData) + y.RealY,
            this.RealY1 = st(u, w.logData) + y.RealY) : n == 0 ? (this.RealY0 = Math.round((y.V0 - i) * y.PxPointY) + y.RealY,
            this.RealY1 = Math.round((y.V0 - u) * y.PxPointY) + y.RealY) : (this.RealY0 = y.V0 - Math.round(i * y.PxPointY) + y.RealY,
            this.RealY1 = y.V0 - Math.round(u * y.PxPointY) + y.RealY);
            t == 0 && r == 0 ? (this.RealX0 = 0,
            this.RealX1 = w.widthGraph - w.paddingRight) : r == 0 ? (this.RealX1 = w.widthGraph - w.paddingRight,
            this.RealX0 = e) : (this.RealX0 = e,
            this.RealX1 = o)
        }
        function yi(n, t, i, r, u) {
            this.Y = n;
            this.RealY = Math.round(n * w.usableHeight) + w.paddingTop + u;
            this.Height = t;
            this.HeightPx = Math.round(t * w.usableHeight);
            this.PxPointY = 0;
            this.PxPointX = 0;
            this.V0 = 0;
            this.id = r;
            this.Indicator = i;
            this.Bars = []
        }
        function ei() {
            tt.doc != null && (tt.doc.removeEventListener("mousewheel", au),
            tt.doc.removeEventListener("DOMMouseScroll", au),
            tt.doc.removeEventListener("mouseleave", th),
            tt.doc.removeEventListener("touchmove", su),
            tt.doc.removeEventListener("mousemove", su),
            tt.doc.removeEventListener("mouseup", cu),
            tt.doc.removeEventListener("mousedown", hu),
            tt.doc.removeEventListener("touchstart", hu),
            tt.doc.removeEventListener("touchend", cu),
            tt.doc.removeEventListener("mousedown", ah));
            ni();
            [].forEach.call(n.qsa(".traceCvs"), function(n) {
                n.removeEventListener("touchend", ar);
                n.removeEventListener("mousedown", ar)
            });
            g.eventsActive = !1
        }
        function yl(t) {
            n.gi("param1Automatic").addEventListener("change", function() {
                this.checked && (w.mainChart.typedef["param" + t] = null,
                ft(!1, !0),
                n.gi("mperiod" + t).value = "")
            })
        }
        function kh(i, r, u) {
            var l, a, o, f, vt, c, s, yt, pt, h, ft, et, ot, b, st, d, wt, g, nt, ct, kt, rt, dt, gt, at, ut;
            if (n.qsa(".params_zone").length == 0) {
                if (ei(),
                a = document.createElement("div"),
                a.id = it("uParams-"),
                a.setAttribute("class", "uParams"),
                a.style.height = "100%",
                a.innerHTML = '<div style="top:' + w.paddingTop + "px;left:" + w.paddingLeft + 'px" class="params_zone"><div class="params_zone_in clearfix"><img class="closeparams" /><\/div><div class="params_content"><\/div><\/div>',
                tt.doc.appendChild(a),
                u != null && (r = k[u].Indicator.type),
                o = t(r),
                u != null ? k[u].Indicator = e(o, k[u].Indicator) : i != null ? w.mainChart.indicators[i] = e(o, w.mainChart.indicators[i]) : w.mainChart.typedef = e(o, w.mainChart.typedef),
                o.params.p != null)
                    for (vt = o.params.p.length,
                    f = 0; f < vt; f++) {
                        if (c = 10,
                        c = u != null ? k[u].Indicator["param" + (f + 1)] : i != null ? w.mainChart.indicators[i]["param" + (f + 1)] : w.mainChart.typedef["param" + (f + 1)],
                        c == null && (c = ""),
                        s = document.createElement("div"),
                        s.setAttribute("class", "clearfix pad5"),
                        l = '<div class="eod_pname">' + o.params.p[f] + '<\/div><input value="' + c + '" class="eod_inp" onkeypress="return isNumberLetterKey(event)" id="mperiod' + (f + 1) + '" type="text" />',
                        yt = ["renko", "line break", "kagi", "point figure"],
                        yt.indexOf(r) < 0) {
                            var v = 2
                              , y = 100
                              , p = 1;
                            switch (r) {
                            case "zig zag":
                                v = .1;
                                y = 20;
                                p = .1;
                                break;
                            case "tvi":
                                v = 0;
                                y = 3;
                                p = .1;
                                break;
                            case "sar":
                                v = .02;
                                y = .06;
                                p = .01;
                                break;
                            case "vpn":
                                f + 1 == 2 && (v = .1,
                                y = .5,
                                p = .1);
                                break;
                            case "boll":
                            case "atrs":
                            case "lineard":
                            case "evmm":
                                f + 1 == 2 && (v = .1,
                                y = 10,
                                p = .1)
                            }
                            s.innerHTML = l + '<div class="eod_slider"><div id="slider' + (f + 1) + '" class="sliderout" min="' + v + '" max="' + y + '" step="' + p + '" value="' + c + '"><\/div><\/div>';
                            n.qs(".params_content").appendChild(s);
                            kl(f + 1, i, u)
                        } else
                            r == "point figure" && f == 1 ? (s.innerHTML = l + "<\/div>",
                            n.qs(".params_content").appendChild(s)) : (s.innerHTML = l + '<input id="param1Automatic" type="checkbox"><span>' + lang.l_automatic + "<\/span>",
                            n.qs(".params_content").appendChild(s),
                            c == "" && (n.gi("param1Automatic").checked = !0),
                            yl(f + 1));
                        pl(f + 1, i, r, u)
                    }
                if (o.params.c != null) {
                    for (pt = o.params.c.length,
                    h = "",
                    f = 0; f < pt; f++) {
                        if (ft = "",
                        st = !1,
                        b = u != null ? k[u].Indicator : i != null ? w.mainChart.indicators[i] : w.mainChart.typedef,
                        b && (b["v" + (f + 1)] && (st = !0),
                        et = b["s" + (f + 1)] || 1,
                        ot = b["w" + (f + 1)] || 1),
                        o.params.w != null) {
                            switch (o.params.w[f]) {
                            case "sw":
                                h = '<div id="w' + (f + 1) + '" class="widthSelect w' + ot + '"><\/div><div id="s' + (f + 1) + '" class="styleSelect s' + et + '"><\/div>';
                                break;
                            case "s":
                                h = '<div id="s' + (f + 1) + '" class="styleSelect s' + et + '">';
                                break;
                            case "w":
                                h = '<div id="w' + (f + 1) + '" class="widthSelect w' + ot + '">';
                                break;
                            case "o":
                                h = '<div id="o' + (f + 1) + '" class="opSelect">'
                            }
                            h = h + "<\/div>"
                        }
                        st || (ft = 'checked="true"');
                        l = '<input class="eod_cbv" id="v' + (f + 1) + '" type="checkbox" ' + ft + ' /><div class="eod_cname">' + o.params.c[f] + '<\/div><input id="color' + (f + 1) + '" type="text" />' + h;
                        d = document.createElement("div");
                        d.setAttribute("class", "clearfix pad5");
                        d.innerHTML = l;
                        n.qs(".params_content").appendChild(d);
                        g = f + 1 == 1 ? "color" : "color" + (f + 1);
                        wt = u != null ? RODTL.rgb2hex(k[u].Indicator[g]) : i != null ? RODTL.rgb2hex(w.mainChart.indicators[i][g]) : RODTL.rgb2hex(w.mainChart.typedef[g]);
                        bl(f + 1, i, u, wt, o.type)
                    }
                    wl(i, r, u)
                }
                if (u != null) {
                    if (t(k[u].Indicator.type).sb != null) {
                        var bt = '<option value="1">' + lang.l_zone + '<\/option><option value="2">' + lang.l_traitfi + '<\/option><option value="3">' + lang.l_traitep + "<\/option>"
                          , ni = '<input id="cbSeuilH" checked="checked" type="checkbox" /><div class="eod_cname">' + lang.l_upperb + '<\/div><input id="valSeuilH" type="text" onkeypress="return isNumberLetterKey(event)" /><select id="stylSeuilH">' + bt + "<\/select>"
                          , ti = '<input id="cbSeuilB" checked="checked" type="checkbox" /><div class="eod_cname">' + lang.l_lowerb + '<\/div><input id="valSeuilB" type="text" onkeypress="return isNumberLetterKey(event)" /><select id="stylSeuilB">' + bt + "<\/select>"
                          , ht = document.createElement("div");
                        ht.setAttribute("class", "clearfix pad5");
                        ht.innerHTML = ni;
                        nt = document.createElement("div");
                        nt.setAttribute("class", "clearfix pad5");
                        nt.innerHTML = ti;
                        ct = n.qs(".params_content");
                        ct.appendChild(ht);
                        ct.appendChild(nt);
                        k[u].Indicator.sh == null ? n.gi("valSeuilH").value = t(k[u].Indicator.type).sh : k[u].Indicator.sh == 9999 ? (n.gi("cbSeuilH").checked = !1,
                        n.gi("valSeuilH").disabled = !0,
                        n.gi("stylSeuilH").disabled = !0) : (n.gi("valSeuilH").value = k[u].Indicator.sh,
                        k[u].Indicator.shs != null && (n.gi("stylSeuilH").value = k[u].Indicator.shs));
                        k[u].Indicator.sb == null ? n.gi("valSeuilB").value = t(k[u].Indicator.type).sb : k[u].Indicator.sb == 9999 ? (n.gi("cbSeuilB").checked = !1,
                        n.gi("valSeuilB").disabled = !0,
                        n.gi("stylSeuilB").disabled = !0) : (n.gi("valSeuilB").value = k[u].Indicator.sb,
                        k[u].Indicator.sbs != null && (n.gi("stylSeuilB").value = k[u].Indicator.sbs));
                        n.gi("cbSeuilH").addEventListener("change", function() {
                            var r = n.gi("valSeuilH"), f = n.gi("stylSeuilH"), i;
                            this.checked ? (i = t(k[u].Indicator.type).sh,
                            i == 9999 && (i = 90),
                            k[u].Indicator.sh = i,
                            r.disabled = !1,
                            r.value = i,
                            f.disabled = !1) : (k[u].Indicator.sh = 9999,
                            r.disabled = !0,
                            f.disabled = !0);
                            lt(u)
                        });
                        n.gi("cbSeuilB").addEventListener("change", function() {
                            var r = n.gi("valSeuilB"), f = n.gi("stylSeuilB"), i;
                            this.checked ? (i = t(k[u].Indicator.type).sb,
                            i == 9999 && (i = 10),
                            k[u].Indicator.sb = i,
                            r.disabled = !1,
                            r.value = i,
                            f.disabled = !1) : (k[u].Indicator.sb = 9999,
                            r.disabled = !0,
                            f.disabled = !0);
                            lt(u)
                        });
                        n.gi("stylSeuilH").addEventListener("change", function() {
                            k[u].Indicator.shs = this.value;
                            lt(u)
                        });
                        n.gi("stylSeuilB").addEventListener("change", function() {
                            k[u].Indicator.sbs = this.value;
                            lt(u)
                        });
                        n.gi("valSeuilH").addEventListener("keyup", function() {
                            k[u].Indicator.sh = parseInt(this.value.replace(",", "."));
                            lt(u)
                        });
                        n.gi("valSeuilB").addEventListener("keyup", function() {
                            k[u].Indicator.sb = parseInt(this.value.replace(",", "."));
                            lt(u)
                        })
                    }
                    kt = ["macd", "macdzl", "wto", "dmi", "adx", "macdh", "sto", "aroon", "qstick", "ewo", "ppo", "moonphase", "awesome", "vortex", "kst", "kvo", "bop", "tsi", "smi", "sto rsi", "equity", "forceindex", "tvi", "rvi", "mf"];
                    kt.indexOf(k[u].Indicator.type) < 0 && (rt = document.createElement("div"),
                    rt.setAttribute("class", "clearfix pad5"),
                    rt.innerHTML = '<input id="cbMM" type="checkbox" /><div class="eod_cname">' + lang.l_moymob + '<\/div><input id="colorMM" type="text" name="colorMM" value="#fe0000" /><input id="valMM" value="5" type="text" onkeypress="return isIntNumberKey(event)" />',
                    n.qs(".params_content").appendChild(rt),
                    dt = new ColorPicker({
                        wrapperEl: "#colorMM",
                        value: "#fe0000",
                        onChange: function(n) {
                            k[u].Indicator.mmColor = n;
                            lt(u)
                        }
                    }),
                    k[u].Indicator.mm != null && (n.gi("cbMM").checked = !0,
                    n.gi("valMM").value = k[u].Indicator.mm,
                    dt.change(k[u].Indicator.mmColor)),
                    n.gi("cbMM").addEventListener("change", function() {
                        var t = n.gi("valMM"), i;
                        if (this.checked) {
                            if (t.disabled = !1,
                            i = parseInt(t.value),
                            isNaN(i))
                                return;
                            k[u].Indicator.mm = i;
                            k[u].Indicator.mmColor = n.gi("colorMM").value
                        } else
                            delete k[u].Indicator.mm,
                            delete k[u].Indicator.mmColor,
                            t.disabled = !0;
                        lt(u)
                    }),
                    n.gi("valMM").addEventListener("keyup", function() {
                        var n = parseInt(this.value);
                        isNaN(n) || (k[u].Indicator.mm = n,
                        lt(u))
                    }))
                }
                gt = ["phpb", "line", "line2", "renko", "kagi", "line break", "mm", "mme", "mmp", "mmh", "cmoy", "cmedian", "double EMA", "triple EMA", "trix", "bollw", "bollb", "boll", "lineard", "linearc", "linearo", "roc", "kst", "coppock", "zig zag", "mmt", "evmm", "rsi", "mom", "pvi", "nvi", "macd", "macdh", "std", "sto rsi", "point figure", "ulcer"];
                gt.indexOf(o.type) >= 0 && (at = document.createElement("div"),
                at.innerHTML = o.type == "phpb" ? lang.l_datasource2 : lang.l_datasource,
                n.qs(".params_content").appendChild(at),
                o.source != null && n.qs("#datasource option[value='" + o.source + "']").setAttribute("selected", "selected"),
                n.gi("datasource").addEventListener("change", function() {
                    fr(u, "source", this.value, i);
                    u == null ? lt(0) : lt(u)
                }));
                (u != null || i != null) && (ut = document.createElement("div"),
                ut.setAttribute("class", "mtb10"),
                ut.innerHTML = '<span class="lnkmsg suppressMainIndic">' + lang.l_suppindic + "<\/span>",
                n.qs(".params_content").appendChild(ut));
                n.qs(".params_zone").style.display = "block";
                dl(i, u)
            }
        }
        function pl(t, i, r, u) {
            n.qs(".params_zone #mperiod" + t).addEventListener("keyup", function() {
                var n = this.value.trim().replace(",", ".");
                if (n = parseFloat(n),
                !isNaN(n) && n != 0) {
                    switch (t) {
                    case 1:
                        r != "sar" && r != "zig zag" && r != "renko" && r != "kagi" && r != "point figure" && r != "tvi" && (n = parseInt(n));
                        break;
                    case 2:
                        r != "boll" && r != "evmm" && r != "lineard" && r != "atrs" && (n = parseInt(n));
                        break;
                    default:
                        n = parseInt(n)
                    }
                    fr(u, "param" + t, n, i);
                    u == null ? lt(0, !0) : lt(u)
                }
            })
        }
        function lf(n) {
            for (var i = "<ul>", t = 1; t < 5; t++)
                i = i + '<li class="' + n + t + '"><\/li>';
            return i + "<\/ul>"
        }
        function fr(n, t, i, r) {
            n == null ? r == null ? w.mainChart.typedef[t] = i : w.mainChart.indicators[r][t] = i : k[n].Indicator[t] = i
        }
        function wl(t, i, u) {
            function f(i) {
                if (i.preventDefault(),
                this.innerHTML != "") {
                    this.innerHTML = "";
                    return
                }
                n.qsarem(".widthSelect ul");
                n.qsarem(".styleSelect ul");
                var f = this.id
                  , o = parseInt(f.slice(-1))
                  , r = document.createElement("div");
                r.setAttribute("class", "opContent");
                r.innerHTML = '<div class="sliderout" id="sliderO" min="0" max="100" step="1">';
                this.appendChild(r);
                e(u, o, t)
            }
            function e(n, t, i) {
                var u = t == 1 ? "color" : "color" + t;
                new Slider({
                    wrapperEl: "#sliderO",
                    value: 50,
                    onSlide: function(t) {
                        t = t / 100;
                        var f;
                        f = n != null ? k[n].Indicator[u] : i != null ? w.mainChart.indicators[i][u] : w.mainChart.typedef[u];
                        fr(n, u, r(RODTL.rgb2hex(f), t), i);
                        n == null ? lt(0) : lt(n)
                    }
                })
            }
            function o(i) {
                if (i.preventDefault(),
                i.target.nodeName == "LI") {
                    var r = parseInt(i.target.className.slice(-1));
                    fr(u, this.id, r, t);
                    this.innerHTML = "";
                    u == null ? lt(0) : lt(u);
                    n.gi(this.id).setAttribute("class", "widthSelect w" + r);
                    return
                }
                if (this.innerHTML != "") {
                    this.innerHTML = "";
                    return
                }
                n.qsarem(".styleSelect ul");
                n.qsarem(".widthSelect ul");
                this.innerHTML = lf("w")
            }
            function s(i) {
                if (i.preventDefault(),
                i.target.nodeName == "LI") {
                    var r = parseInt(i.target.className.slice(-1));
                    fr(u, this.id, r, t);
                    this.innerHTML = "";
                    u == null ? lt(0) : lt(u);
                    n.gi(this.id).setAttribute("class", "styleSelect s" + r);
                    return
                }
                if (this.innerHTML != "") {
                    this.innerHTML = "";
                    return
                }
                n.qsarem(".styleSelect ul");
                n.qsarem(".widthSelect ul");
                this.innerHTML = lf("s")
            }
            [].forEach.call(n.qsa(".opSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, f)
                })
            });
            [].forEach.call(n.qsa(".widthSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, o)
                })
            });
            [].forEach.call(n.qsa(".styleSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, s)
                })
            });
            [].forEach.call(n.qsa(".eod_cbv"), function(n) {
                n.addEventListener("change", function() {
                    var n = this.id
                      , i = this.checked;
                    u == null ? (t == null ? i ? delete w.mainChart.typedef[n] : w.mainChart.typedef[n] = !0 : i ? delete w.mainChart.indicators[t][n] : w.mainChart.indicators[t][n] = !0,
                    lt(0)) : (i ? delete k[u].Indicator[n] : k[u].Indicator[n] = !0,
                    lt(u))
                })
            })
        }
        function bl(n, i, u, f, e) {
            var o = t(e);
            new ColorPicker({
                wrapperEl: "#color" + n,
                value: f,
                onChange: function(t) {
                    var e = n == 1 ? "color" : "color" + n
                      , f = v(o[e]);
                    f == null && (f = 1);
                    t = r(t, f);
                    fr(u, e, t, i);
                    u == null ? lt(0) : lt(u)
                }
            })
        }
        function kl(t, i, r) {
            var u = n.gi("mperiod" + t);
            new Slider({
                wrapperEl: "#slider" + t,
                onSlide: function(n) {
                    Math.round(n) - n != 0 && (n = n.toFixed(2));
                    u.value = n;
                    fr(r, "param" + t, +n, i);
                    r == null ? lt(0, !0) : lt(r)
                }
            })
        }
        function af() {
            n.gi(it("uParams-")) != null && (n.idrem(it("uParams-")),
            dt())
        }
        function dl(t, i) {
            function r(n) {
                n.preventDefault();
                n.stopPropagation();
                af()
            }
            function u(n) {
                n.target.className == "uParams" && af()
            }
            function f(n) {
                n.preventDefault();
                i == null ? (be(t),
                ft()) : lr(i);
                af()
            }
            ui.forEach(function(t) {
                var i = n.qs(".closeparams");
                i && i.addEventListener(t, r)
            });
            ui.forEach(function(t) {
                n.gi(it("uParams-")).addEventListener(t, u)
            });
            ui.forEach(function(t) {
                var i = n.qs(".suppressMainIndic");
                i && i.addEventListener(t, f)
            })
        }
        function be(n) {
            var i = w.mainChart.indicators[n].type, t, u, r;
            if (w.mainChart.indicators.splice(n, 1),
            k[0].Bars.splice(parseInt(n) + 1, 1),
            i == "compare") {
                for (u = w.mainChart.indicators.length,
                r = 0,
                t = 0; t < u; t++)
                    w.mainChart.indicators[t].type == "compare" && r++;
                if (r == 0)
                    for (w.isCompare = !1,
                    t = 1; t < k.length; t++)
                        k[t].Indicator.type == "fr" && lr(t)
            }
            (i == "evt" || i == "actu") && (g.fiEvt = [])
        }
        function gl(n) {
            if (g.MemoryLayers == null) {
                for (g.MemoryLayers = o(k),
                i = 0; i < k.length; i++)
                    k[i].Height = 0,
                    k[i].HeightPx = 0,
                    k[i].RealY = 0;
                k[n].Height = 1;
                k[n].Y = 0;
                k[n].RealY = 21;
                var t = o(k);
                vi(!0);
                ir(t);
                di(w.symbol);
                ft();
                dt()
            } else
                ke()
        }
        function ke() {
            vi(!0);
            ir(g.MemoryLayers);
            di(w.symbol);
            g.MemoryLayers = null;
            ft();
            dt()
        }
        function dh(n, t) {
            var i = parseInt(t.parentNode.parentNode.id.slice(-1)), f = k[i], u, r, e, s;
            if (f.Height != 1) {
                for (n == "up" ? (u = k[i - 1].Y,
                k[i] = k[i - 1],
                k[i - 1] = f,
                k[i - 1].Y = u,
                k[i].Y = u + k[i - 1].Height) : (u = k[i].Y,
                k[i] = k[i + 1],
                k[i + 1] = f,
                k[i].Y = u,
                k[i + 1].Y = u + k[i].Height),
                ct(w.symbol),
                e = k.length,
                r = 0; r < e; r++)
                    k[r].Bars = r == 0 ? [] : {},
                    delete k[r].canvas,
                    delete k[r].ctx;
                s = o(k);
                vi(!0);
                ir(s);
                di(w.symbol);
                ft();
                dt()
            }
        }
        function fi(n, t, i) {
            return n >= 0 && n <= w.innerWidth + 8 && t >= k[i].RealY - 10 && t < k[i].HeightPx + k[i].RealY ? !0 : !1
        }
        function gt(n, t, i, r) {
            for (var u = document.createElement("div"), e = i.length, f = 0; f < e; f++)
                u.setAttribute(i[f].n, i[f].v);
            r && (u.id = r);
            u.setAttribute("class", "resizehandler");
            u.style.left = n + "px";
            u.style.top = t + "px";
            tt.doc.appendChild(u)
        }
        function ri(n, t) {
            var ot, u, f, c, l, a, v, nt, it, y, rt, ut, p, ft, g, et, e, o, s, i, h, r, st, ht, ct, lt, d, b, wt;
            if (ii(),
            s = w,
            at(),
            i = k[t].lines[n],
            h = document.createElement("div"),
            h.setAttribute("cid", pt),
            h.setAttribute("onmousedown", "mydragg.startMoving(this,'trace-" + pt + "',event);"),
            h.setAttribute("onmouseup", "mydragg.stopMoving('trace-" + pt + "');"),
            h.setAttribute("class", "linemodif"),
            h.setAttribute("name", n),
            h.setAttribute("layer", t),
            h.style.left = s.paddingLeft + 4 + "px",
            h.style.top = s.paddingTop + 4 + "px",
            r = '<div class="spg delLine" title="' + lang.l_supprimer + '"><\/div><input id="color1" type="text" name="color1" value="#000000" />',
            st = ["t", "rf", "r", "m", "fa", "ef", "c", "arrdw", "arrup", "arrrt", "arrlt", "p", "wf"],
            st.indexOf(i.type) >= 0 && (ot = i.color2 != null ? i.color2 : "#ffffff",
            r = r + '<span class="eod_sp10">&nbsp;<\/span><input id="color2" type="text" name="color2" value="' + ot + '" />'),
            i.type != "a" && (r = r + '<div title="Epaisseur du tracé" class="widthSelect w' + i.width + '"><\/div>',
            ht = ["rf", "m", "t", "fa", "arrup", "arrdw", "arrrt", "arrlt", "sm1", "sm2", "sm3"],
            ht.indexOf(i.type) < 0 && (r = r + '<div title="Style du tracé" class="styleSelect s' + i.style + '"><\/div>')),
            (i.type == "v" || i.type == "sr" || i.type == "h") && (r = r + '<div title="Taille du texte" class="fontSelect">' + (i.fontSize && i.fontSize != 0 ? i.fontSize : 12) + "<\/div>",
            r = r + '<div class="fontSizeZone"><input type="checkbox" class="showtext" ' + (i.fontSize != 0 ? "checked" : "") + "> Légende<\/div>"),
            ct = ["mv", "mh", "rf", "ef", "af", "cf", "wf", "ff", "an", "m", "ewi", "ewc", "ga"],
            ct.indexOf(i.type) >= 0 && (r = r + '<div title="Taille du texte" class="fontSelect">' + (i.fontSize != 0 && i.fontSize != null ? i.fontSize : 12) + "<\/div>"),
            i.type == "sr" && (VGP.isSms && (r = r + '<div class="spg eod_alert" title="' + lang.l_createalert + '"><\/div>'),
            r = r + '<input class="textSR" onkeypress="return isNumberKey(event)" id="srTxt" type="text" value="' + i.y0.toFixed(2) + '" /><input class="btnSR" id="srBtn" type="button" value="ok" />'),
            i.type == "a" && (r = r + '<div class="fontSelect">' + (i.fontSize != null ? i.fontSize : 12) + '<\/div><input autocomplete="off" id="annotationTxt" type="text"/>'),
            lt = ["fa", "cf", "ewi", "ewc", "wf"],
            lt.indexOf(i.type) < 0 && (r = r + '<div class="spg eod_copy" title="' + lang.l_dupliquer + '"><\/div>'),
            h.innerHTML = r,
            tt.doc.appendChild(h),
            d = k[t].RealY,
            i.type == "fa") {
                e = -9;
                o = s.paddingLeft - 9;
                u = i.RealX0 + o;
                f = i.RealY0 + e;
                c = i.h.B.mx + o;
                l = i.h.B.my + e + d;
                v = i.h.C.mx + o;
                a = i.h.C.my + e + d;
                fi(u, f, t) && gt(u, f, [{
                    n: "name",
                    v: n
                }, {
                    n: "pt",
                    v: "A"
                }], "handlerfaA");
                fi(c, l, t) && gt(c, l, [{
                    n: "name",
                    v: n
                }, {
                    n: "pt",
                    v: "B"
                }], "handlerfaB");
                fi(v, a, t) && gt(v, a, [{
                    n: "name",
                    v: n
                }, {
                    n: "pt",
                    v: "C"
                }], "handlerfaC");
                er();
                return
            }
            if (i.type == "ewi" || i.type == "ewc") {
                for (b = 0; b < i.h.length; b++)
                    u = i.h[b].mx + s.paddingLeft - 8,
                    f = i.h[b].my - 8 + d,
                    fi(u, f, t) && gt(u, f, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: b
                    }], "handlerEW" + b);
                er();
                return
            }
            if (i.type == "t" || i.type == "wf") {
                if (e = -8,
                o = s.paddingLeft - 8,
                u = i.RealX0 + o,
                f = i.RealY0 + e,
                c = i.RealX1 + o,
                l = i.RealY1 + e,
                v = i.h.C.mx + o,
                a = i.h.C.my + d + e,
                i.type == "wf")
                    fi(u, f, t) && gt(u, f, [{
                        n: "name",
                        v: n
                    }], "handler2oblic"),
                    fi(c, l, t) && gt(c, l, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: "B"
                    }], "handlerWFB"),
                    fi(v, a, t) && gt(v, a, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: "C"
                    }], "handlerWFC");
                else {
                    fi(u, f, t) && gt(u, f, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: "A"
                    }], "handlerTA");
                    fi(c, l, t) && gt(c, l, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: "B"
                    }], "handlerTB");
                    fi(v, a, t) && gt(v, a, [{
                        n: "name",
                        v: n
                    }, {
                        n: "pt",
                        v: "C"
                    }], "handlerTC");
                    var bt = Math.max(u, c, v)
                      , vt = Math.min(u, c, v)
                      , kt = Math.max(f, l, a)
                      , yt = Math.min(f, l, a);
                    y = vt + (bt - vt) / 2;
                    p = yt + (kt - yt) / 2;
                    fi(y, p, t) && gt(y, p, [{
                        n: "name",
                        v: n
                    }], "handler2oblic")
                }
                er();
                return
            }
            if (i.type == "ef" && gt(i.RealX1 + i.h + s.paddingLeft - 6, i.RealY1 - 8, [{
                n: "name",
                v: n
            }], "handlerEF"),
            i.type == "v") {
                gt(i.RealX0 + s.paddingLeft - 10, Math.round(k[t].HeightPx / 2) + d, [{
                    n: "name",
                    v: n
                }], "handlerV");
                er();
                return
            }
            if (i.type == "sr") {
                gt(i.RealX0 + s.paddingLeft - 15, i.RealY0 - 9, [{
                    n: "name",
                    v: n
                }], "handlerSR");
                er();
                return
            }
            if (i.type == "c") {
                ft = i.RealX0 + s.paddingLeft - 6;
                g = i.RealY0 - 10;
                et = i.RealX1 + s.paddingLeft - 9;
                fi(ft, g, t) && gt(ft, g, [{
                    n: "name",
                    v: n
                }], "handler2oblic");
                fi(et, g, t) && gt(et, g, [{
                    n: "name",
                    v: n
                }], "handlerEllipse");
                er();
                return
            }
            i.x0 == 0 && i.x1 == 0 ? gt(Math.round(s.innerWidth / 2), i.RealY0 - 9, [{
                n: "name",
                v: n
            }], "handlerH") : (e = -9,
            o = s.paddingLeft - 9,
            nt = i.RealX0 + o,
            rt = i.RealY0 + e,
            it = i.RealX1 + o,
            ut = i.RealY1 + e,
            wt = ["a", "arrup", "arrdw", "arrrt", "arrlt", "sm1", "sm2", "sm3"],
            wt.indexOf(i.type) < 0 && (i.type != "an" && fi(nt, rt, t) && gt(nt, rt, [{
                n: "name",
                v: n
            }], "handler0oblic"),
            fi(it, ut, t) && gt(it, ut, [{
                n: "name",
                v: n
            }], "handler1oblic")),
            i.type == "p" ? (y = Math.round(i.RealX0 + (i.RealX1 - i.RealX0) / 2) + o,
            p = Math.round(i.RealY1 + (i.RealY0 - i.RealY1) / 2) + e + Math.round(i.h * k[t].PxPointY),
            fi(y, p, t) && gt(y, p, [{
                n: "name",
                v: n
            }], "handlerPara")) : (y = Math.round(i.RealX0 + (i.RealX1 - i.RealX0) / 2) + o,
            p = Math.round(i.RealY1 + (i.RealY0 - i.RealY1) / 2) + e,
            fi(y, p, t) && gt(y, p, [{
                n: "name",
                v: n
            }], "handler2oblic")));
            er()
        }
        function gh(n) {
            n.target.id != "srTxt" && n.target.id != "annotationTxt" && (n.keyCode == 46 || n.keyCode == 8) && (n.preventDefault(),
            de())
        }
        function nc(n) {
            if (n.target.id != "srTxt" && n.target.id != "annotationTxt")
                switch (n.keyCode) {
                case 38:
                    n.preventDefault();
                    vf(0, -1);
                    break;
                case 40:
                    n.preventDefault();
                    vf(0, 1);
                    break;
                case 37:
                    n.preventDefault();
                    var t = Math.floor(k[0].PxPointX) + 1;
                    vf(-t, 0);
                    break;
                case 39:
                    n.preventDefault();
                    vf(1, 0);
                    break;
                case 46:
                case 8:
                    n.preventDefault();
                    de()
                }
        }
        function de() {
            var t = n.qsga(".linemodif", "name")
              , i = n.qsga(".linemodif", "layer");
            k[i].lines.splice(t, 1);
            ot();
            ct(w.symbol);
            g.flagSave = !0;
            ii()
        }
        function vf(t, i) {
            var f = n.qsga(".linemodif", "name"), r = n.qsga(".linemodif", "layer"), u = o(k[r].lines[f]), e, s;
            (i != 0 || u.type != "h") && (t != 0 || u.type != "v") && (e = kt(r),
            k[r].lines.splice(f, 1),
            ot(),
            s = fc(e.ctx, u, t, i, r),
            sc(u, s, r))
        }
        function er() {
            function c(n, i) {
                i == 1 ? t.color = n : t.color2 = n;
                ot();
                ct(w.symbol)
            }
            function v(r) {
                var u, f;
                (r.preventDefault(),
                u = parseFloat(n.gi("srTxt").value.replace(",", ".")),
                u == 0 || isNaN(u)) || (t.y0 = u,
                t.y1 = u,
                f = w.set.semilog && w.logData != null ? st(u, w.logData) : k[i].V0 * k[i].PxPointY - u * k[i].PxPointY,
                t.RealY0 = f,
                t.RealY1 = f,
                n.gi("handlerSR").style.top = f + w.paddingTop - 6 + "px",
                ot(),
                ct(w.symbol))
            }
            function y(n) {
                n.preventDefault();
                var i = d.Name + ";" + w.symbol + ";" + t.y0.toFixed(3);
                sessionStorage.setItem("vartemp", i);
                g.flagSave = !0;
                ii();
                loadPopupHelp("graph_setalert8")
            }
            function p(n) {
                var r, u;
                n.preventDefault();
                r = o(t);
                t.type == "v" ? (u = new ht(r.RealX0 + 20,0,i),
                r.x0 = u.x,
                r.x1 = u.x) : (r.y0 = r.y0 + 20 / k[i].PxPointY,
                r.y1 = r.y1 + 20 / k[i].PxPointY);
                k[i].lines.push(r);
                ii();
                ot();
                ct(w.symbol);
                ri(k[i].lines.length - 1, i)
            }
            function b() {
                var i = n.gi("annotationTxt").value.trim();
                if (i == "")
                    return !1;
                t.h = a(i);
                ot();
                ct(w.symbol);
                g.flagSave = !0;
                ii()
            }
            function nt(i) {
                if (i.preventDefault(),
                i.target.nodeName == "LI") {
                    var r = parseInt(i.target.className.slice(-1));
                    t.width = r;
                    ot();
                    ct(w.symbol);
                    this.setAttribute("class", "widthSelect w" + r);
                    this.innerHTML = "";
                    return
                }
                if (this.innerHTML != "") {
                    this.innerHTML = "";
                    return
                }
                n.qsarem(".styleSelect ul");
                n.qsarem(".widthSelect ul");
                this.innerHTML = lf("w")
            }
            function tt(i) {
                if (i.preventDefault(),
                i.target.nodeName == "LI") {
                    var r = parseInt(i.target.className.slice(-1));
                    t.style = r;
                    ot();
                    ct(w.symbol);
                    this.setAttribute("class", "styleSelect s" + r);
                    this.innerHTML = "";
                    return
                }
                if (this.innerHTML != "") {
                    this.innerHTML = "";
                    return
                }
                n.qsarem(".styleSelect ul");
                n.qsarem(".widthSelect ul");
                this.innerHTML = lf("s")
            }
            function rt(i) {
                var s, f, e, o, r, u;
                if (i.preventDefault(),
                s = this.innerHTML,
                i.target.nodeName == "LI") {
                    f = parseInt(i.target.getAttribute("data-name"));
                    t.fontSize = f;
                    ot();
                    ct(w.symbol);
                    this.innerHTML = f;
                    e = n.qs(".showtext");
                    e && (e.checked = !0);
                    return
                }
                if (this.innerHTML.length > 2) {
                    this.innerHTML = s;
                    return
                }
                for (n.qsarem(".styleSelect ul"),
                n.qsarem(".fontSelect ul"),
                o = [0, 11, 12, 14, 16, 20, 24, 28, 32, 48],
                r = "<ul>",
                u = 1; u < 10; u++)
                    r = r + '<li data-name="' + o[u] + '">' + o[u] + "<\/li>";
                r = r + "<\/ul>";
                this.innerHTML = r
            }
            function ut(n) {
                n.preventDefault();
                de()
            }
            function ft(r) {
                var l = r.target.id, f, u = o(t);
                switch (l) {
                case "handlerfaA":
                case "handlerfaB":
                case "handlerfaC":
                    f = r.target.getAttribute("pt");
                    na(u, f, i);
                    break;
                case "handlerEW0":
                case "handlerEW1":
                case "handlerEW2":
                case "handlerEW3":
                case "handlerEW4":
                case "handlerEW5":
                    f = r.target.getAttribute("pt");
                    ia(u, f, i);
                    break;
                case "handlerTA":
                case "handlerTB":
                case "handlerTC":
                case "handlerWFB":
                case "handlerWFC":
                    f = r.target.getAttribute("pt");
                    ta(u, f, i);
                    break;
                case "handlerEF":
                    la(u, i);
                    break;
                case "handlerV":
                case "handlerSR":
                case "handlerH":
                    oa(u, i);
                    break;
                case "handlerEllipse":
                    wa(u, i);
                    break;
                case "handlerPara":
                    va(u, i);
                    break;
                case "handler0oblic":
                case "handler1oblic":
                    var e = t.RealX1
                      , h = t.RealY1 - k[i].RealY
                      , c = t.x1;
                    l == "handler1oblic" && (e = t.RealX0,
                    h = t.RealY0 - k[i].RealY,
                    c = t.x0);
                    t.type == "p" ? ya(t.color, e, h, c, t.width, t.style, t.h, t.color2, i) : t.type == "rf" || t.type == "r" || t.type == "m" ? ha(t, t.type, r.target.id, i) : aa(u, e, h, c, i);
                    break;
                case "handler2oblic":
                    var a = RODTL.pointerEventToXY(r)
                      , v = kt(i)
                      , y = parseInt(a.y - v.offset.top)
                      , p = parseInt(a.x - v.offset.left);
                    sa(u, p, y, i)
                }
                n.clhide("resizehandler");
                k[i].lines.splice(s, 1)
            }
            var s = n.qsga(".linemodif", "name"), i = n.qsga(".linemodif", "layer"), t = k[i].lines[s], h, r, l, u, f, e;
            for (new ColorPicker({
                wrapperEl: "#color1",
                value: t.color,
                onChange: function(n) {
                    c(n, 1)
                }
            }),
            n.gi("color2") != null && (h = new ColorPicker({
                wrapperEl: "#color2",
                onChange: function(n) {
                    c(n, 2)
                }
            }),
            t.color2 != null && h.change(t.color2)),
            ei(),
            r = n.gi(it("overlay-")),
            l = r.getContext("2d"),
            l.clearRect(0, 0, r.width, r.height),
            t.type == "sr" && ui.forEach(function(t) {
                n.gi("srBtn").addEventListener(t, v)
            }),
            ui.forEach(function(t) {
                var i = n.qs(".eod_alert");
                i && i.addEventListener(t, y)
            }),
            ui.forEach(function(t) {
                var i = n.qs(".eod_copy");
                i && i.addEventListener(t, p)
            }),
            t.type == "a" && (n.gi("annotationTxt").value = unescape(t.h),
            n.gi("annotationTxt").addEventListener("keyup", function(n) {
                if (n.keyCode == 13)
                    return b(),
                    !1;
                t.h = a(this.value);
                ot()
            })),
            [].forEach.call(n.qsa(".widthSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, nt)
                })
            }),
            [].forEach.call(n.qsa(".styleSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, tt)
                })
            }),
            [].forEach.call(n.qsa(".fontSelect"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, rt)
                })
            }),
            [].forEach.call(n.qsa(".delLine"), function(n) {
                ui.forEach(function(t) {
                    n.addEventListener(t, ut)
                })
            }),
            f = n.qs(".showtext"),
            f && f.addEventListener("change", function(i) {
                i.preventDefault();
                t.fontSize = this.checked ? n.qs(".fontSelect").textContent : 0;
                ot();
                ct(w.symbol)
            }),
            e = n.qsa(".resizehandler"),
            u = 0; u < e.length; u++)
                ["touchstart", "mousedown"].forEach(function(n) {
                    e[u].addEventListener(n, ft)
                });
            n.gi("handler2oblic") != null || t.type == "sr" || t.type == "v" || t.type == "h" ? document.addEventListener("keydown", nc) : document.addEventListener("keydown", gh);
            [].forEach.call(n.qsa(".traceCvs"), function(n) {
                n.addEventListener("touchend", ar);
                n.addEventListener("mousedown", ar)
            })
        }
        function ar(n) {
            g.flagSave = !0;
            n.preventDefault();
            ii()
        }
        function ht(n, t, i) {
            var u, e = k[i], f;
            for (this.mx = n,
            this.my = t,
            this.y = w.set.semilog && w.logData != null && i == 0 ? Math.round(eh(t, w.logData) * 1e4) / 1e4 : i == 0 ? Math.round((e.V0 - this.my / e.PxPointY) * 1e4) / 1e4 : Math.round((e.V0 - this.my) / e.PxPointY * 1e4) / 1e4,
            f = ti.length,
            u = n; u < f; u++)
                if (n <= u && ti[u] != null) {
                    this.x = ti[u].d;
                    this.mx = u;
                    break
                }
            if (n > f - 1) {
                var o = f - 1
                  , s = n - o
                  , r = Math.round(s / k[0].PxPointX)
                  , h = Math.round(r * k[0].PxPointX) + o;
                if (d.Xperiod < 0)
                    r = -r * d.Xperiod;
                else
                    switch (d.Xperiod) {
                    case 7:
                        r = r * 7;
                        break;
                    case 30:
                        r = r * 30;
                        break;
                    case 91:
                        r = r * 91;
                        break;
                    case 365:
                        r = r * 365;
                        break;
                    default:
                        r = r * (7 / 5)
                    }
                this.mx = h;
                this.x = ti[f - 1].d + Math.round(r)
            }
        }
        function rt(n, t) {
            g.evtList.push({
                ev: n,
                f: t
            })
        }
        function ni() {
            for (var t = g.evtList.length, n = 0; n < t; n++)
                tt.doc.removeEventListener(g.evtList[n].ev, g.evtList[n].f);
            g.evtList = []
        }
        function na(n, t, i) {
            at("c");
            var r = k[i].RealY;
            b = {
                c: kt(i),
                A: {
                    mx: n.RealX0,
                    my: n.RealY0 - r,
                    x: n.x0,
                    y: n.y0
                },
                B: n.h.B,
                C: n.h.C,
                D: null,
                line: n,
                pt: t,
                layerid: i
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, ge)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, no)
            });
            rt("mouseup", ge);
            rt("mousemove", no);
            rt("touchend", ge);
            rt("touchmove", no)
        }
        function ge(n) {
            n.preventDefault();
            k[b.layerid].lines.push(new ut(b.layerid,b.A.x,b.A.y,b.D.x,b.D.y,b.line.color,b.A.mx,b.D.mx,b.line.width,null,"fa",{
                B: b.B,
                C: b.C
            },b.line.color2));
            ct(w.symbol);
            ni();
            ri(k[b.layerid].lines.length - 1, b.layerid)
        }
        function no(n) {
            var i;
            n.preventDefault();
            var u = RODTL.pointerEventToXY(n), e = parseInt(u.x - b.c.offset.left), f = parseInt(u.y - b.c.offset.top), t = b.line, r;
            if (nr(f, b.layerid)) {
                i = new ht(e,f,b.layerid);
                ot();
                switch (b.pt) {
                case "A":
                    r = yr(b.c.ctx, i, b.B, b.C, t.color, t.color2, t.width);
                    b.A = i;
                    break;
                case "B":
                    r = yr(b.c.ctx, b.A, i, b.C, t.color, t.color2, t.width);
                    b.B = i;
                    break;
                case "C":
                    r = yr(b.c.ctx, b.A, b.B, i, t.color, t.color2, t.width);
                    b.C = i
                }
                b.D = new ht(r.Dx,r.Dy,b.layerid)
            }
        }
        function nr(n, t) {
            return n < 0 || n > k[t].HeightPx ? !1 : !0
        }
        function ta(n, t, i) {
            var r = k[i].RealY;
            at("c");
            n.type == "t" || n.type == "wf" && t == "B" ? b = {
                line: n,
                pt: t,
                c: kt(i),
                A: {
                    mx: n.RealX0,
                    my: n.RealY0 - r,
                    x: n.x0,
                    y: n.y0
                },
                B: {
                    mx: n.RealX1,
                    my: n.RealY1 - r,
                    x: n.x1,
                    y: n.y1
                },
                C: {
                    mx: n.h.C.mx,
                    my: n.h.C.my,
                    x: n.h.C.x,
                    y: n.h.C.y
                },
                layerid: i
            } : n.type == "wf" && t == "C" && (b = {
                line: n,
                pt: t,
                c: kt(i),
                A: {
                    mx: n.RealX0,
                    my: n.RealY0 - r,
                    x: n.x0,
                    y: n.y0
                },
                C: {
                    mx: n.RealX1,
                    my: n.RealY1 - r,
                    x: n.x1,
                    y: n.y1
                },
                B: {
                    mx: n.h.C.mx,
                    my: n.h.C.my,
                    x: n.h.C.x,
                    y: n.h.C.y
                },
                layerid: i
            });
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, to)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, io)
            });
            rt("mouseup", to);
            rt("mousemove", io);
            rt("touchend", to);
            rt("touchmove", io)
        }
        function to(n) {
            n.preventDefault();
            k[b.layerid].lines.push(new ut(b.layerid,b.A.x,b.A.y,b.B.x,b.B.y,b.line.color,b.A.mx,b.B.mx,b.line.width,null,b.line.type,{
                C: b.C
            },b.line.color2,b.line.fontSize));
            ct(w.symbol);
            ni();
            ri(k[b.layerid].lines.length - 1, b.layerid)
        }
        function io(n) {
            var t, i;
            n.preventDefault();
            var r = RODTL.pointerEventToXY(n)
              , f = parseInt(r.x - b.c.offset.left)
              , u = parseInt(r.y - b.c.offset.top);
            if (nr(u, b.layerid)) {
                if (t = new ht(f,u,b.layerid),
                ot(),
                b.line.type == "wf")
                    b.B = t;
                else
                    switch (b.pt) {
                    case "A":
                        b.A = t;
                        break;
                    case "B":
                        b.B = t;
                        break;
                    case "C":
                        b.C = t
                    }
                b.line.type == "t" ? yu(b.c.ctx, b.A, b.B, b.C, b.line.color, b.line.color2, b.line.width) : b.line.type == "wf" && (i = ru(b.c.ctx, b.A, b.B, b.C, b.line.color, b.line.color2, b.line.width, b.line.fontSize),
                b.C = new ht(i.mx,i.my,b.layerid))
            }
        }
        function ia(n, t, i) {
            at("c");
            b = {
                line: n,
                pt: t,
                c: kt(i),
                layerid: i
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, ro)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, uo)
            });
            rt("mouseup", ro);
            rt("mousemove", uo);
            rt("touchend", ro);
            rt("touchmove", uo)
        }
        function ro(n) {
            n.preventDefault();
            var t = b.line;
            k[b.layerid].lines.push(new ut(b.layerid,null,null,null,null,t.color,null,null,t.width,t.style,t.type,t.h,null,t.fontSize));
            ct(w.symbol);
            ni();
            ri(k[b.layerid].lines.length - 1, b.layerid)
        }
        function uo(n) {
            var r;
            n.preventDefault();
            var t = RODTL.pointerEventToXY(n)
              , u = parseInt(t.x - b.c.offset.left)
              , i = parseInt(t.y - b.c.offset.top);
            nr(i, 0) && (r = new ht(u,i,b.layerid),
            ot(),
            b.pt = parseInt(b.pt),
            b.line.h[b.pt] = r,
            ie(b.c.ctx, b.line.h, b.line.color, b.line.width, b.line.style, b.line.fontSize))
        }
        function fo(n, t) {
            at("c");
            b = {
                tabPoints: [],
                color: pi(),
                nbPoints: t,
                type: n
            };
            ["touchstart", "click"].forEach(function(n) {
                tt.doc.addEventListener(n, eo)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, oo)
            });
            rt("click", eo);
            rt("mousemove", oo);
            rt("touchstart", eo);
            rt("touchmove", oo)
        }
        function eo(n) {
            var t, r;
            n.preventDefault();
            b.layerid == null && (b.layerid = wi(n),
            b.c = kt(b.layerid));
            var u = RODTL.pointerEventToXY(n)
              , f = parseInt(u.x - b.c.offset.left)
              , i = parseInt(u.y - b.c.offset.top);
            if (nr(i, b.layerid)) {
                if (b.tabPoints.length < b.nbPoints - 1) {
                    b.tabPoints.push(new ht(f,i,b.layerid));
                    return
                }
                b.tabPoints.push(new ht(f,i,b.layerid));
                ot();
                t = k[b.layerid].lines;
                switch (b.type) {
                case "t":
                    yu(b.c.ctx, b.tabPoints[0], b.tabPoints[1], b.tabPoints[2], b.color);
                    t.push(new ut(b.layerid,b.tabPoints[0].x,b.tabPoints[0].y,b.tabPoints[1].x,b.tabPoints[1].y,b.color,b.tabPoints[0].mx,b.tabPoints[1].mx,null,null,b.type,{
                        C: b.tabPoints[2]
                    }));
                    break;
                case "ewi":
                case "ewc":
                    ie(b.c.ctx, b.tabPoints, b.color);
                    t.push(new ut(b.layerid,null,null,null,null,b.color,null,null,null,null,b.type,b.tabPoints));
                    break;
                case "wf":
                    r = ru(b.c.ctx, b.tabPoints[0], b.tabPoints[1], b.tabPoints[2], b.color, null, 1);
                    b.tabPoints[2] = new ht(r.mx,r.my,b.layerid);
                    t.push(new ut(b.layerid,b.tabPoints[0].x,b.tabPoints[0].y,b.tabPoints[1].x,b.tabPoints[1].y,b.color,b.tabPoints[0].mx,b.tabPoints[1].mx,null,null,b.type,{
                        C: b.tabPoints[2]
                    }))
                }
                ct(w.symbol);
                ni();
                ri(t.length - 1, b.layerid)
            }
        }
        function oo(n) {
            var t, f, s, r;
            if (n.preventDefault(),
            t = b.tabPoints,
            t.length != 0) {
                var i = b.c.ctx
                  , o = RODTL.pointerEventToXY(n)
                  , e = parseInt(o.x - b.c.offset.left)
                  , u = parseInt(o.y - b.c.offset.top);
                if (nr(u, b.layerid)) {
                    ot();
                    f = [];
                    switch (b.type) {
                    case "ewi":
                        f = ["1", "2", "3", "4", "5"];
                        break;
                    case "ewc":
                        f = ["a", "b", "c"]
                    }
                    if (b.type != "wf") {
                        for (i.lineWidth = 1,
                        i.strokeStyle = b.color,
                        i.beginPath(),
                        i.moveTo(t[0].mx, t[0].my),
                        r = 1; r < t.length; r++)
                            i.lineTo(t[r].mx, t[r].my),
                            b.type != "t" && (s = t[r].my < t[r - 1].my ? -7 : 16,
                            i.fillText(f[r - 1], t[r].mx - 4, t[r].my + s));
                        i.lineTo(e, u);
                        i.stroke()
                    } else
                        t[1] == null ? (i.beginPath(),
                        i.moveTo(t[0].mx, t[0].my),
                        i.lineTo(e, u),
                        i.strokeStyle = b.color,
                        i.stroke()) : t[2] == null && ru(i, t[0], t[1], {
                            mx: e,
                            my: u
                        }, b.color, null, 1);
                    return
                }
            }
        }
        function ru(n, t, i, u, f, e, o, s) {
            var h, w;
            n.lineWidth = o;
            n.strokeStyle = f;
            n.beginPath();
            n.moveTo(t.mx, t.my);
            n.lineTo(i.mx, i.my);
            var l = Math.atan2(t.my - i.my, i.mx - t.mx)
              , c = Math.atan2(t.my - u.my, u.mx - t.mx)
              , a = !1
              , y = !1
              , p = !1;
            Math.abs(l - c) > Math.PI && (a = !0,
            y = !0);
            l < c && (a = !0,
            p = !0);
            y && p && (a = !1);
            h = Math.sqrt(Math.pow(Math.abs(t.my - i.my), 2) + Math.pow(Math.abs(t.mx - i.mx), 2));
            n.arc(t.mx, t.my, h * 1.618, -l, -c, a);
            n.closePath();
            e != null && (n.fillStyle = r(e, .15),
            n.fill());
            n.stroke();
            n.beginPath();
            n.arc(t.mx, t.my, h, -l, -c, a);
            n.moveTo(t.mx, t.my);
            n.arc(t.mx, t.my, h * .786, -l, -c, a);
            n.moveTo(t.mx, t.my);
            n.arc(t.mx, t.my, h * .618, -l, -c, a);
            n.moveTo(t.mx, t.my);
            n.arc(t.mx, t.my, h * .5, -l, -c, a);
            n.moveTo(t.mx, t.my);
            n.arc(t.mx, t.my, h * .236, -l, -c, a);
            n.stroke();
            w = (l + c) / 2;
            n.fillStyle = f;
            n.font = (s != null ? s : 12) + "px Arial";
            n.save();
            n.translate(t.mx, t.my);
            var b = Math.PI / 2 - w
              , k = 93 * Math.PI / 180
              , v = -3;
            return b > k ? (b = -w - Math.PI / 2,
            v = 11) : h = -h,
            (y && !p || y && p) && (h = -h),
            n.rotate(b),
            n.fillText("1.618", -12, h * 1.618 + v),
            n.fillText("1", -3, h + v),
            n.fillText("0.786", -12, h * .786 + v),
            n.fillText("0.618", -12, h * .618 + v),
            n.fillText("0.5", -7, h * .5 + v),
            n.fillText("0.236", -12, h * .236 + v),
            n.restore(),
            {
                mx: Math.round(t.mx + Math.cos(c) * Math.abs(h)),
                my: Math.round(t.my - Math.sin(c) * Math.abs(h))
            }
        }
        function ra() {
            at("c");
            b = {
                color: pi(),
                color2: "#4040ff"
            };
            ["touchstart", "click"].forEach(function(n) {
                tt.doc.addEventListener(n, so)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, ho)
            });
            rt("click", so);
            rt("mousemove", ho);
            rt("touchstart", so);
            rt("touchmove", ho)
        }
        function so(n) {
            var r, i, t;
            if (n.preventDefault(),
            r = RODTL.pointerEventToXY(n),
            b.c == null && (b.layerid = wi(n),
            b.c = kt(b.layerid)),
            i = parseInt(r.x - b.c.offset.left),
            t = parseInt(r.y - b.c.offset.top),
            nr(t, b.layerid)) {
                if (b.A == null) {
                    b.A = new ht(i,t,b.layerid);
                    return
                }
                if (b.B == null) {
                    b.B = new ht(i,t,b.layerid);
                    return
                }
                b.C == null && (b.C = new ht(i,t,b.layerid),
                b.D = new ht(b.D.Dx,b.D.Dy,b.layerid),
                k[b.layerid].lines.push(new ut(b.layerid,b.A.x,b.A.y,b.D.x,b.D.y,b.color,b.A.mx,b.D.mx,null,null,"fa",{
                    B: b.B,
                    C: b.C
                },b.color2)),
                ct(w.symbol),
                ni(),
                ri(k[b.layerid].lines.length - 1, b.layerid))
            }
        }
        function ho(n) {
            if (n.preventDefault(),
            b.A != null) {
                var t = b.c.ctx
                  , r = RODTL.pointerEventToXY(n)
                  , u = parseInt(r.x - b.c.offset.left)
                  , i = parseInt(r.y - b.c.offset.top);
                if (nr(i, b.layerid)) {
                    if (b.B == null) {
                        ot();
                        t.lineWidth = 1;
                        t.strokeStyle = pi();
                        t.beginPath();
                        t.moveTo(b.A.mx, b.A.my);
                        t.lineTo(u, i);
                        t.stroke();
                        return
                    }
                    b.C == null && (ot(),
                    b.D = yr(t, b.A, b.B, {
                        mx: u,
                        my: i
                    }, b.color, b.color2))
                }
            }
        }
        function ua() {
            b = {
                idLine: 999
            };
            var t = n.gi(it("overlay-"));
            b.c = {
                offset: RODTL.offset(t),
                ctx: t.getContext("2d")
            };
            ["touchstart", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, co)
            });
            tt.doc.addEventListener("mousemove", tc);
            rt("mousemove", tc);
            rt("mousedown", co);
            rt("touchstart", co)
        }
        function tc(n) {
            var t = RODTL.pointerEventToXY(n)
              , i = parseInt(t.x - b.c.offset.left + w.paddingLeft)
              , r = parseInt(t.y - b.c.offset.top);
            b.idLine = df(i, r, kr(i, r))
        }
        function co(n) {
            n.preventDefault();
            b.layerid = wi(n);
            b.idLine != 999 ? (k[b.layerid].lines.splice(b.idLine, 1),
            ot(),
            ct(w.symbol)) : ic()
        }
        function ic() {
            ni();
            dt()
        }
        function fa(n) {
            at("c");
            b = {
                t: n
            };
            ["touchstart", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, lo)
            });
            rt("mousedown", lo);
            rt("touchstart", lo)
        }
        function lo(t) {
            var r, i;
            if (t.preventDefault(),
            n.qs(".linemodif") == null) {
                b.layerid = wi(t);
                b.c = kt(b.layerid);
                var f = b.c.ctx
                  , u = b.t
                  , e = RODTL.pointerEventToXY(t)
                  , s = parseInt(e.x - b.c.offset.left)
                  , o = parseInt(e.y - b.c.offset.top);
                if (nr(o, b.layerid)) {
                    r = new ht(s,o,b.layerid);
                    switch (u) {
                    case "arrup":
                        i = "#008000";
                        si(f, r, i, u, i, 1);
                        break;
                    case "arrdw":
                        i = "#c00000";
                        si(f, r, i, u, i, 1);
                        break;
                    case "arrrt":
                    case "arrlt":
                        i = "#3366ff";
                        si(f, r, i, u, i, 1);
                        break;
                    case "sm1":
                        i = "#008000";
                        pr(f, r, i, u, 1);
                        break;
                    case "sm2":
                        i = "#c00000";
                        pr(f, r, i, u, 1);
                        break;
                    case "sm3":
                        i = "#ffa600";
                        pr(f, r, i, u, 1)
                    }
                    k[b.layerid].lines.push(new ut(b.layerid,r.x,r.y,r.x,r.y,i,r.mx,r.mx,1,null,u,null,i));
                    ct(w.symbol);
                    ni();
                    ri(k[b.layerid].lines.length - 1, b.layerid)
                }
            }
        }
        function ea() {
            at("c");
            ["touchstart", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, ao)
            });
            rt("touchstart", ao);
            rt("mousedown", ao)
        }
        function ao(t) {
            function s(n) {
                n.preventDefault();
                rc(b.c.ctx, f, u, b.color, r)
            }
            var r;
            if (t.preventDefault(),
            n.qs(".linemodif") == null) {
                b = {
                    color: pi()
                };
                r = wi(t);
                b.c = kt(r);
                var e = RODTL.pointerEventToXY(t)
                  , u = parseInt(e.y - b.c.offset.top)
                  , f = parseInt(e.x - b.c.offset.left)
                  , o = k[r].lines.length
                  , i = document.createElement("div");
                i.setAttribute("cid", pt);
                i.setAttribute("onmousedown", "mydragg.startMoving(this,'" + b.c.ctx.canvas.id + "',event);");
                i.setAttribute("onmouseup", "mydragg.stopMoving('" + b.c.ctx.canvas.id + "');");
                i.setAttribute("class", "linemodif");
                i.setAttribute("name", o);
                i.setAttribute("layer", r);
                i.style.left = w.paddingLeft + 4 + "px";
                i.style.top = w.paddingTop + 4 + "px";
                i.innerHTML = '<input id="annotationTxt" type="text" autocomplete="off"/><input id="annotationBtn" class="btnSR" type="button" value="ok" />';
                tt.doc.appendChild(i);
                n.gi("annotationTxt").focus();
                ei();
                n.gi("annotationTxt").addEventListener("keyup", function(n) {
                    n.preventDefault();
                    var t = n.which ? n.which : n.keyCode;
                    t == 13 ? (ot(),
                    rc(b.c.ctx, f, u, b.color, r)) : (ot(),
                    re(b.c.ctx, new ht(f,u,r), "12", b.color, this.value))
                });
                ui.forEach(function(t) {
                    n.gi("annotationBtn").addEventListener(t, s)
                })
            }
        }
        function rc(t, i, r, u, f) {
            var o, e, s;
            if (i != null || r != null) {
                if (o = n.gi("annotationTxt").value.trim(),
                o == "")
                    return n.clrem(["linemodif"]),
                    dt(),
                    !1;
                e = new ht(i,r,f);
                s = re(t, e, "12", u, o);
                k[f].lines.push(new ut(f,e.x,e.y,e.x,e.y,u,e.mx,s,null,null,"a",a(o),null,"12"));
                ct(w.symbol);
                n.clrem(["linemodif"]);
                ri(k[f].lines.length - 1, f)
            }
        }
        function pi() {
            return w.set.traceColor == null ? ve(w.set.bkcolor) : w.set.traceColor
        }
        function oa(n, t) {
            b = {
                c: kt(t),
                pt: null,
                line: n,
                layerid: t
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, vo)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, yo)
            });
            rt("touchend", vo);
            rt("mouseup", vo);
            rt("mousemove", yo);
            rt("touchmove", yo)
        }
        function vo(n) {
            n.preventDefault();
            var t = b.line;
            b.pt == null && (b.pt = uc(t.type, n, b.c.offset, b.c.ctx, t.color, t.style, t.width, t.fontSize, b.layerid));
            ka(t.type, t.color, b.pt, t.style, t.width, t.fontSize, b.layerid)
        }
        function yo(n) {
            n.preventDefault();
            var t = b.line;
            b.pt = uc(t.type, n, b.c.offset, b.c.ctx, t.color, t.style, t.width, t.fontSize, b.layerid)
        }
        function sa(n, t, i, r) {
            b = {
                c: kt(r),
                pt: null,
                line: n,
                x0: t,
                y0: i,
                layerid: r
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, wo)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, po)
            });
            rt("touchend", wo);
            rt("mouseup", wo);
            rt("mousemove", po);
            rt("touchmove", po)
        }
        function po(n) {
            n.preventDefault();
            ot();
            var t = RODTL.pointerEventToXY(n)
              , i = parseInt(t.x - b.c.offset.left) - b.x0
              , r = parseInt(t.y - b.c.offset.top) - b.y0;
            b.pt = fc(b.c.ctx, b.line, i, r, b.layerid)
        }
        function wo(n) {
            n.preventDefault();
            b.pt != null && sc(b.line, b.pt, b.layerid)
        }
        function ha(n, t, i, r) {
            var u = i == "handler0oblic" ? {
                x: n.x1,
                y: n.y1,
                mx: n.RealX1,
                my: n.RealY1 - k[r].RealY
            } : {
                x: n.x0,
                y: n.y0,
                mx: n.RealX0,
                my: n.RealY0 - k[r].RealY
            };
            b = {
                c: kt(r),
                line: n,
                type: t,
                ptb: u,
                target: i,
                layerid: r
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, bo)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, ko)
            });
            rt("touchend", bo);
            rt("mouseup", bo);
            rt("mousemove", ko);
            rt("touchmove", ko)
        }
        function bo(n) {
            (n.preventDefault(),
            b.pte != null) && hc(b.line.color, b.line.color2, b.type, b.pte, b.target, b.ptb, b.line.width, b.line.style, b.line.fontSize, b.layerid)
        }
        function ko(n) {
            n.preventDefault();
            b.pte = ec(n, b.c.offset, b.c.ctx, b.line.color, b.line.color2, b.type, b.target, b.ptb, b.line.width, b.line.style, b.line.fontSize, b.layerid)
        }
        function ca(n) {
            at("c");
            b = {
                type: n,
                color: pi()
            };
            ["touchstart", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, go)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, ns)
            });
            rt("touchstart", go);
            rt("mousedown", go);
            rt("mousemove", ns);
            rt("touchmove", ns)
        }
        function go(n) {
            n.preventDefault();
            b.ptb == null && (b.layerid = wi(n),
            b.c = kt(b.layerid),
            b.ptb = vs(n, b.c.offset, b.layerid));
            b.pte != null && hc(b.color, null, b.type, b.pte, null, b.ptb, null, null, null, b.layerid)
        }
        function ns(n) {
            n.preventDefault();
            b.ptb != null && (b.pte = ec(n, b.c.offset, b.c.ctx, b.color, null, b.type, null, b.ptb, null, null, null, b.layerid))
        }
        function la(n, t) {
            at("c");
            b = {
                c: kt(t),
                line: n,
                ptb: {
                    mx: n.RealX0,
                    my: n.RealY0,
                    x: n.x0,
                    y: n.y0
                },
                pte: {
                    mx: n.RealX1,
                    my: n.RealY1,
                    x: n.x1,
                    y: n.y1
                },
                x1: Math.max(n.RealX1, n.RealX0),
                layerid: t
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, ts)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, is)
            });
            rt("touchend", ts);
            rt("mouseup", ts);
            rt("mousemove", is);
            rt("touchmove", is)
        }
        function ts(n) {
            n.preventDefault();
            var t = b.line;
            oc(t.color, b.pte, t.width, t.style, t.type, t.color2, b.move, b.ptb, null, t.fontSize, b.layerid)
        }
        function is(n) {
            var i, r, t;
            (n.preventDefault(),
            i = RODTL.pointerEventToXY(n),
            r = parseInt(i.x - b.c.offset.left),
            b.move = r - b.x1,
            b.move < 100) || (ot(),
            t = b.line,
            or(b.c.ctx, t.type, t.color, t.style, t.width, b.move, b.ptb, b.pte, t.color2))
        }
        function aa(n, t, i, r, u) {
            var f = new ht(t,i,u);
            f.mx = t;
            f.x = r;
            b = {
                ptb: f,
                pte: null,
                line: n,
                c: kt(u),
                layerid: u
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, rs)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, us)
            });
            rt("touchend", rs);
            rt("mouseup", rs);
            rt("mousemove", us);
            rt("touchmove", us)
        }
        function rs(n) {
            n.preventDefault();
            var t = b.line;
            b.pte != null && oc(t.color, b.pte, t.width, t.style, t.type, t.color2, t.h, b.ptb, t.fontSize, b.layerid)
        }
        function us(n) {
            n.preventDefault();
            var t = b.line;
            t.type == "f" && t.x1 < t.x0 ? t.h = -1 : t.type == "f" && t.x1 >= t.x0 && (t.h = 1);
            b.pte = ys(n, b.c.offset, b.c.ctx, t.color, t.width, t.style, t.h, t.type, t.color2, b.ptb, t.fontSize, b.layerid)
        }
        function va(n, t) {
            ni();
            b = {
                c: kt(t),
                line: n,
                layerid: t
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, es)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, fs)
            });
            rt("touchend", es);
            rt("mouseup", es);
            rt("mousemove", fs);
            rt("touchmove", fs)
        }
        function fs(n) {
            n.preventDefault();
            var t = b.line
              , r = RODTL.pointerEventToXY(n)
              , u = parseInt(r.y - b.c.offset.top + (t.RealY1 - t.RealY0) / 2)
              , i = k[b.layerid].RealY;
            b.rh = t.RealY1 - u - i;
            ot();
            or(b.c.ctx, "p", t.color, t.style, t.width, -b.rh, {
                mx: t.RealX0,
                my: t.RealY0 - i
            }, {
                mx: t.RealX1,
                my: t.RealY1 - i
            }, t.color2)
        }
        function es(n) {
            n.preventDefault();
            var t = b.line
              , i = b.rh / k[b.layerid].PxPointY
              , r = t.y0
              , u = t.y1;
            i > 0 && (r = r + i,
            u = u + i);
            k[b.layerid].lines.push(new ut(b.layerid,t.x0,r,t.x1,u,t.color,t.RealX0,t.RealX1,t.width,t.style,"p",Math.abs(i),t.color2));
            ct(w.symbol);
            ni();
            ri(k[b.layerid].lines.length - 1, b.layerid)
        }
        function ya(n, t, i, r, u, f, e, o, s) {
            var h = new ht(t,i,s);
            h.mx = t;
            h.x = r;
            b = {
                c: kt(s),
                ptb: h,
                style: f,
                height: e * k[s].PxPointY,
                color2: o,
                width: u,
                color: n,
                layerid: s
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, os)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, ss)
            });
            rt("touchend", os);
            rt("mouseup", os);
            rt("mousemove", ss);
            rt("touchmove", ss)
        }
        function os(n) {
            var t, i, r;
            (n.preventDefault(),
            t = b.pte,
            i = b.ptb,
            t != null) && (r = b.height / k[b.layerid].PxPointY,
            t.mx < i.mx ? k[b.layerid].lines.push(new ut(b.layerid,t.x,t.y,i.x,i.y,b.color,t.mx,i.mx,b.width,b.style,"p",r,b.color2)) : k[b.layerid].lines.push(new ut(b.layerid,i.x,i.y,t.x,t.y,b.color,i.mx,t.mx,b.width,b.style,"p",r,b.color2)),
            ct(w.symbol),
            ni(),
            ri(k[b.layerid].lines.length - 1, b.layerid))
        }
        function ss(n) {
            n.preventDefault();
            b.pte = ys(n, b.c.offset, b.c.ctx, b.color, b.width, b.style, b.height, "p", b.color2, b.ptb, null, b.layerid)
        }
        function pa() {
            at("c");
            b = {
                color: pi(),
                step1: !1
            };
            ["touchstart", "touchend", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, yf)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, hs)
            });
            rt("touchend", yf);
            rt("touchstart", yf);
            rt("mousedown", yf);
            rt("mousemove", hs);
            rt("touchmove", hs)
        }
        function yf(n) {
            if (n.preventDefault(),
            b.ptb == null) {
                b.layerid = wi(n);
                b.c = kt(b.layerid);
                b.ptb = vs(n, b.c.offset, b.layerid);
                return
            }
            if (b.pte != null && b.rh == null) {
                b.step1 = !0;
                return
            }
            var i = b.ptb.y
              , t = b.rh / k[b.layerid].PxPointY;
            t > 0 && (i = i + t,
            b.pte.y = b.pte.y + t);
            t = Math.abs(t);
            b.pte.mx < b.ptb.mx ? k[b.layerid].lines.push(new ut(b.layerid,b.pte.x,b.pte.y,b.ptb.x,i,b.color,b.pte.mx,b.ptb.mx,1,null,"p",t)) : k[b.layerid].lines.push(new ut(b.layerid,b.ptb.x,i,b.pte.x,b.pte.y,b.color,b.ptb.mx,b.pte.mx,1,null,"p",t));
            ct(w.symbol);
            ni();
            ri(k[b.layerid].lines.length - 1, b.layerid)
        }
        function hs(n) {
            if (n.preventDefault(),
            b.ptb != null) {
                if (b.ptb != null && !b.step1) {
                    b.pte = ys(n, b.c.offset, b.c.ctx, null, null, null, null, "p", null, b.ptb, null, b.layerid);
                    return
                }
                var t = b.c.ctx
                  , i = RODTL.pointerEventToXY(n)
                  , r = parseInt(i.y - b.c.offset.top);
                b.rh = b.pte.my - r;
                ot();
                t.strokeStyle = b.color;
                t.lineWidth = 1;
                t.beginPath();
                t.moveTo(b.ptb.mx, b.ptb.my);
                t.lineTo(b.pte.mx, b.pte.my);
                t.moveTo(b.ptb.mx, b.ptb.my - b.rh);
                t.lineTo(b.pte.mx, b.pte.my - b.rh);
                t.stroke()
            }
        }
        function wa(n, t) {
            b = {
                line: n,
                ptb: {
                    mx: n.RealX0,
                    my: n.RealY0 - k[t].RealY,
                    x: n.x0,
                    y: n.y0
                },
                pte: null,
                c: kt(t),
                layerid: t
            };
            ["touchend", "mouseup"].forEach(function(n) {
                tt.doc.addEventListener(n, ls)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, cs)
            });
            rt("touchend", ls);
            rt("mouseup", ls);
            rt("mousemove", cs);
            rt("touchmove", cs)
        }
        function cs(n) {
            n.preventDefault();
            ot();
            var t = b.line
              , r = RODTL.pointerEventToXY(n)
              , i = parseInt(r.y - b.c.offset.top)
              , u = parseInt(r.x - b.c.offset.left);
            i = uu(i, b.layerid);
            b.pte = new ht(u,i,b.layerid);
            gu(b.c.ctx, t.color, t.style, t.width, b.ptb, b.pte, t.color2)
        }
        function ls(n) {
            n.preventDefault();
            var t = b.line;
            b.pte != null && (k[b.layerid].lines.push(new ut(b.layerid,b.ptb.x,b.ptb.y,b.pte.x,b.pte.y,t.color,b.ptb.mx,b.pte.mx,t.width,t.style,"c",null,t.color2)),
            ct(w.symbol),
            ni(),
            ri(k[b.layerid].lines.length - 1, b.layerid))
        }
        function wi(t) {
            var i = RODTL.offset(n.gi(it("rodgraph-")))
              , r = RODTL.pointerEventToXY(t)
              , u = parseInt(r.x - i.left)
              , f = parseInt(r.y - i.top);
            return kr(u, f)
        }
        function ba(n) {
            at("c");
            b = {
                type: n,
                color: pi()
            };
            ["touchstart", "touchend", "mousedown"].forEach(function(n) {
                tt.doc.addEventListener(n, pf)
            });
            ["touchmove", "mousemove"].forEach(function(n) {
                tt.doc.addEventListener(n, as)
            });
            rt("touchend", pf);
            rt("touchstart", pf);
            rt("mousedown", pf);
            rt("mousemove", as);
            rt("touchmove", as)
        }
        function as(n) {
            var t, o;
            if (n.preventDefault(),
            t = b.ptb,
            t != null) {
                var u = b.type
                  , i = b.color
                  , r = b.c.ctx;
                ot();
                var e = RODTL.pointerEventToXY(n)
                  , f = parseInt(e.y - b.c.offset.top)
                  , s = parseInt(e.x - b.c.offset.left);
                f = uu(f, b.layerid);
                b.pte = new ht(s,f,b.layerid);
                u == "mv" && (b.pte.mx = t.mx,
                b.pte.x = t.x);
                u == "mh" && (b.pte.my = t.my,
                b.pte.y = t.y);
                switch (u) {
                case "an":
                    o = Math.atan2(t.my - b.pte.my, b.pte.mx - t.mx);
                    ku(r, i, null, null, t, b.pte, o);
                    break;
                case "af":
                    du(r, i, null, null, t, b.pte);
                    break;
                case "c":
                    gu(r, i, null, null, t, b.pte);
                    break;
                case "gg":
                    bu(r, i, null, null, t, b.pte);
                    break;
                case "ga":
                    wu(r, i, null, null, t, b.pte);
                    break;
                case "cf":
                    vu(r, i, null, null, t, b.pte, b.layerid);
                    break;
                case "ff":
                    pu(r, i, null, null, t, b.pte);
                    break;
                case "o":
                case "f":
                case "ef":
                case "mv":
                case "mh":
                    or(r, u, i, null, null, null, t, b.pte);
                    break;
                case "v":
                    tf(r, b.pte, null, null, i);
                    break;
                case "h":
                    wr(r, b.pte, null, null, i, null, "h");
                    break;
                case "sr":
                    nf(r, b.pte, null, null, i);
                    break;
                case "mg":
                    wr(r, b.pte, null, null, i, null, "mg")
                }
            }
        }
        function pf(n) {
            var t = b.pte, i = b.ptb, r = b.type, u, f;
            if (i == null) {
                b.layerid = wi(n);
                b.c = kt(b.layerid);
                b.ptb = vs(n, b.c.offset, b.layerid);
                return
            }
            if (u = k[b.layerid].lines,
            t == null) {
                ni();
                dt();
                return
            }
            f = null;
            r == "ef" && (f = 250);
            r == "an" && (f = Math.atan2(i.my - t.my, t.mx - i.mx));
            switch (r) {
            case "o":
            case "f":
            case "ef":
                t.mx < i.mx ? u.push(new ut(b.layerid,t.x,t.y,i.x,i.y,b.color,t.mx,i.mx,null,null,r,r == "f" ? -1 : f)) : u.push(new ut(b.layerid,i.x,i.y,t.x,t.y,b.color,i.mx,t.mx,null,null,r,r == "f" ? 1 : f));
                break;
            case "v":
                u.push(new ut(b.layerid,t.x,0,t.x,2e4,b.color,t.mx,t.mx,null,null,r));
                break;
            case "sr":
                u.push(new ut(b.layerid,t.x,t.y,0,t.y,b.color,t.mx,null,null,null,r));
                break;
            case "h":
            case "mg":
                u.push(new ut(b.layerid,0,t.y,0,t.y,b.color,null,null,null,null,r));
                break;
            default:
                u.push(new ut(b.layerid,i.x,i.y,t.x,t.y,b.color,i.mx,t.mx,null,null,r,f))
            }
            ct(w.symbol);
            ni();
            ri(u.length - 1, b.layerid)
        }
        function uu(n, t) {
            return n < 0 && (n = 0),
            n > k[t].HeightPx && (n = k[t].HeightPx),
            n
        }
        function vs(n, t, i) {
            var r = RODTL.pointerEventToXY(n);
            return new ht(parseInt(r.x - t.left),parseInt(r.y - t.top),i)
        }
        function uc(n, t, i, r, u, f, e, o, s) {
            var h;
            ot();
            var l = RODTL.pointerEventToXY(t)
              , c = parseInt(l.y - i.top)
              , a = parseInt(l.x - i.left);
            c = uu(c, s);
            h = new ht(a,c,s);
            switch (n) {
            case "sr":
                nf(r, h, f, e, u, o);
                break;
            case "v":
                tf(r, h, f, e, u, o);
                break;
            default:
                wr(r, h, f, e, u, o, n)
            }
            return h
        }
        function fc(n, t, i, r, u) {
            var f = new ht(t.RealX0 + i,t.RealY0 + r - k[u].RealY,u)
              , e = new ht(t.RealX1 + i,t.RealY1 + r - k[u].RealY,u)
              , o = null;
            switch (t.type) {
            case "t":
                o = new ht(t.h.C.mx + i,t.h.C.my + r,u);
                yu(n, f, e, o, t.color, t.color2, t.width);
                break;
            case "wf":
                o = new ht(t.h.C.mx + i,t.h.C.my + r,u);
                ru(n, f, e, o, t.color, t.color2, t.width, t.fontSize);
                break;
            case "a":
                re(n, f, t.fontSize, t.color, unescape(t.h));
                break;
            case "r":
                rf(n, t.color, t.color2, f, e, t.type, null, t.width, t.style);
                break;
            case "m":
                rf(n, t.color, t.color2, f, e, t.type, t.h, t.width, t.style, t.fontSize);
                break;
            case "rf":
                ue(n, t.color, t.color2, f, e, t.width, t.fontSize);
                break;
            case "c":
                gu(n, t.color, t.style, t.width, f, e, t.color2);
                break;
            case "an":
                ku(n, t.color, t.style, t.width, f, e, t.h, t.fontSize);
                break;
            case "af":
                du(n, t.color, t.style, t.width, f, e, t.fontSize);
                break;
            case "cf":
                vu(n, t.color, t.style, t.width, f, e, u, t.fontSize);
                break;
            case "gg":
                bu(n, t.color, t.style, t.width, f, e);
                break;
            case "ga":
                wu(n, t.color, t.style, t.width, f, e, t.fontSize);
                break;
            case "ff":
                pu(n, t.color, t.style, t.width, f, e, t.fontSize);
                break;
            case "sr":
                nf(n, f, t.style, t.width, t.color, t.fontSize);
                break;
            case "v":
                tf(n, f, t.style, t.width, t.color, t.fontSize);
                break;
            case "h":
            case "mg":
                wr(n, f, t.style, t.width, t.color, 12, t.type);
                break;
            case "arrup":
            case "arrdw":
            case "arrrt":
            case "arrlt":
                si(n, f, t.color, t.type, t.color2, t.width);
                break;
            case "sm1":
            case "sm2":
            case "sm3":
                pr(n, f, t.color, t.type, t.width);
                break;
            default:
                or(n, t.type, t.color, t.style, t.width, t.h, f, e, t.color2, t.fontSize)
            }
            return {
                ptb: f,
                pte: e,
                C: o
            }
        }
        function ys(n, t, i, r, u, f, e, o, s, h, c, l) {
            var a, p;
            ot();
            var y = RODTL.pointerEventToXY(n)
              , w = parseInt(y.x - t.left)
              , v = parseInt(y.y - t.top);
            v = uu(v, l);
            a = new ht(w,v,l);
            o == "mv" && (a.mx = h.mx,
            a.x = h.x);
            o == "mh" && (a.my = h.my,
            a.y = h.y);
            switch (o) {
            case "an":
                p = Math.atan2(h.my - a.my, a.mx - h.mx);
                a.mx = ku(i, r, f, u, h, a, p, c);
                break;
            case "af":
                du(i, r, f, u, h, a, c);
                break;
            case "gg":
                bu(i, r, f, u, h, a);
                break;
            case "ga":
                wu(i, r, f, u, h, a, c);
                break;
            case "ff":
                pu(i, r, f, u, h, a, c);
                break;
            case "cf":
                vu(i, r, f, u, h, a, l, c);
                break;
            default:
                or(i, o, r, f, u, e, h, a, s, c)
            }
            return a
        }
        function ec(n, t, i, r, u, f, e, o, s, h, c, l) {
            var a, p;
            ot();
            var y = RODTL.pointerEventToXY(n)
              , w = parseInt(y.x - t.left)
              , v = parseInt(y.y - t.top);
            return v = uu(v, l),
            a = new ht(w,v,l),
            f == "rf" && ue(i, r, u, o, a, s, c, e == "handler0oblic" ? !0 : !1),
            (f == "r" || f == "m") && (p = o.my > a.my ? 1 : 0,
            rf(i, r, u, o, a, f, p, s, h, c)),
            a
        }
        function ka(n, t, i, r, u, f, e) {
            var o = k[e].lines;
            switch (n) {
            case "sr":
                o.push(new ut(e,i.x,i.y,0,i.y,t,i.mx,null,u,r,n,null,null,f));
                break;
            case "v":
                o.push(new ut(e,i.x,0,i.x,2e4,t,i.mx,i.mx,u,r,n,null,null,f));
                break;
            default:
                o.push(new ut(e,0,i.y,0,i.y,t,null,null,u,r,n,null,null,f))
            }
            ct(w.symbol);
            ni();
            ri(o.length - 1, e)
        }
        function oc(n, t, i, r, u, f, e, o, s, h) {
            n == null && (n = pi());
            u == "ef" && e == null && (e = 250);
            var c = k[h].lines;
            switch (u) {
            case "an":
                e = Math.atan2(o.my - t.my, t.mx - o.mx);
                c.push(new ut(h,o.x,o.y,t.x,t.y,n,o.mx,t.mx,i,r,u,e,null,s));
                break;
            case "af":
            case "cf":
                c.push(new ut(h,o.x,o.y,t.x,t.y,n,o.mx,t.mx,i,r,u,null,null,s));
                break;
            default:
                t.mx < o.mx ? c.push(new ut(h,t.x,t.y,o.x,o.y,n,t.mx,o.mx,i,r,u,u == "f" ? -1 : e,f,s)) : c.push(new ut(h,o.x,o.y,t.x,t.y,n,o.mx,t.mx,i,r,u,u == "f" ? 1 : e,f,s))
            }
            ct(w.symbol);
            ni();
            ri(c.length - 1, h)
        }
        function sc(n, t, i) {
            n.color == null && (n.color = pi());
            var f = k[i].lines
              , r = t.ptb
              , e = t.pte
              , c = t.C
              , o = r.y
              , u = r.x
              , s = e.y
              , h = e.x;
            switch (n.type) {
            case "t":
            case "wf":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,null,n.type,{
                    C: c
                },n.color2,n.fontSize));
                break;
            case "a":
                f.push(new ut(i,u,o,u,o,n.color,r.mx,e.mx,n.width,null,n.type,n.h,null,n.fontSize));
                break;
            case "r":
            case "rf":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style,n.type,null,n.color2,n.fontSize));
                break;
            case "ef":
            case "m":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style,n.type,n.h,n.color2,n.fontSize));
                break;
            case "c":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style,n.type,null,n.color2));
                break;
            case "an":
            case "f":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style,n.type,n.h,null,n.fontSize));
                break;
            case "mv":
            case "mh":
            case "af":
            case "gg":
            case "ga":
            case "ff":
            case "cf":
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style,n.type,null,null,n.fontSize));
                break;
            case "sr":
                f.push(new ut(i,u,r.y,0,r.y,n.color,r.mx,null,n.width,n.style,n.type,null,null,n.fontSize));
                break;
            case "v":
                f.push(new ut(i,u,0,t.x,2e4,n.color,r.mx,r.mx,n.width,n.style,n.type,null,null,n.fontSize));
                break;
            case "h":
                f.push(new ut(i,0,r.y,0,r.y,n.color,null,null,n.width,n.style,"h",null,null,n.fontSize));
                break;
            case "arrup":
            case "arrdw":
            case "arrrt":
            case "arrlt":
                f.push(new ut(i,u,r.y,u,r.y,n.color,r.mx,r.mx,n.width,null,n.type,null,n.color2));
                break;
            case "sm1":
            case "sm2":
            case "sm3":
                f.push(new ut(i,u,r.y,u,r.y,n.color,r.mx,r.mx,n.width,null,n.type,null,null));
                break;
            default:
                f.push(new ut(i,u,o,h,s,n.color,r.mx,e.mx,n.width,n.style))
            }
            ct(w.symbol);
            ni();
            ri(f.length - 1, i)
        }
        function hc(n, t, i, r, u, f, e, o, s, h) {
            var c = f.y
              , l = r.y
              , v = Math.min(f.x, r.x)
              , y = Math.max(f.x, r.x)
              , p = Math.min(f.mx, r.mx)
              , b = Math.max(f.mx, r.mx)
              , a = k[h].lines
              , d = 0;
            f.my > r.my && (d = 1);
            switch (i) {
            case "r":
            case "m":
                a.push(new ut(h,v,Math.max(c, l),y,Math.min(c, l),n,p,b,e,o,i,i == "r" ? null : d,t,s));
                break;
            case "rf":
                u == "handler0oblic" ? a.push(new ut(h,v,l,y,c,n,p,b,e,null,i,null,t,s)) : a.push(new ut(h,v,c,y,l,n,p,b,e,null,i,null,t,s))
            }
            ct(w.symbol);
            ni();
            ri(a.length - 1, h)
        }
        function kt(t) {
            var r, i;
            return r = t == 0 ? it("trace-") : it("tindic-") + t,
            i = n.gi(r),
            {
                offset: RODTL.offset(i),
                ctx: i.getContext("2d")
            }
        }
        function bi(n, t, i) {
            var r = "w" + i;
            t[r] != null && (n.lineWidth = t[r])
        }
        function yt(n, t, i) {
            var r, u;
            if (n.setLineDash) {
                i != null ? (u = "s" + t,
                i[u] != null && (r = i[u])) : r = t;
                switch (r) {
                case 0:
                    n.setLineDash([]);
                    break;
                case 2:
                    n.setLineDash([2, 2]);
                    break;
                case 3:
                    n.setLineDash([4]);
                    break;
                case 4:
                    n.setLineDash([7, 2, 2, 2])
                }
            }
        }
        function ps(n, t, i) {
            var f = function(n, t, i) {
                return n + i * (t - n)
            }
              , r = n.RealX1 - n.RealX0
              , u = n.RealY1 - n.RealY0
              , e = ((t - n.RealX0) * r + (i - n.RealY0) * u) / (r * r + u * u)
              , o = f(n.RealX0, n.RealX1, e)
              , s = f(n.RealY0, n.RealY1, e);
            return {
                x: o,
                y: s
            }
        }
        function da(n, t, i) {
            if ((i.type == "arrrt" || i.type == "arrlt") && t >= i.RealY0 - 5 && t <= i.RealY0 + 5)
                switch (i.type) {
                case "arrrt":
                    if (n >= i.RealX0 - 16 && n <= i.RealX0)
                        return !0;
                    break;
                case "arrlt":
                    if (n <= i.RealX0 + 16 && n >= i.RealX0)
                        return !0
                }
            if (n >= i.RealX0 - 5 && n <= i.RealX0 + 5)
                switch (i.type) {
                case "arrup":
                    if (t >= i.RealY0 && t <= i.RealY0 + 16)
                        return !0;
                    break;
                case "arrdw":
                    if (t <= i.RealY0 && t >= i.RealY0 - 16)
                        return !0;
                    break;
                case "sm1":
                case "sm2":
                case "sm3":
                    if (t >= i.RealY0 - 10 && t <= i.RealY0 + 10)
                        return !0
                }
            return !1
        }
        function ga(n, t, i) {
            var r = 5, f = Math.abs(i.RealX1 - i.RealX0), e = Math.abs(i.RealY0 - i.RealY1), h = Math.pow(n - i.RealX0, 2) / Math.pow(f + r, 2), c = Math.pow(t - i.RealY0, 2) / Math.pow(e + r, 2), u = !1, o, s;
            return h + c <= 1 && (u = !0),
            o = Math.pow(n - i.RealX0, 2) / Math.pow(f - r, 2),
            s = Math.pow(t - i.RealY0, 2) / Math.pow(e - r, 2),
            o + s <= 1 && (u = !1),
            u
        }
        function nv(n, t, i, r) {
            for (var o, s, h, c, a = i.h.length, f, e, l = k[r].RealY, u = 1; u < a; u++)
                if (f = i.h[u - 1],
                e = i.h[u],
                n > Math.min(f.mx, e.mx) && n < Math.max(f.mx, e.mx) && (o = ps({
                    RealX0: f.mx,
                    RealY0: f.my + l,
                    RealX1: e.mx,
                    RealY1: e.my + l
                }, n, t),
                s = n - o.x,
                h = t - o.y,
                c = Math.abs(Math.sqrt(s * s + h * h)),
                c < 4))
                    return !0;
            return !1
        }
        function tv(n, t, i, r) {
            var h = k[r].RealY, f = [{
                RealX0: i.RealX0,
                RealY0: i.RealY0,
                RealX1: i.RealX1,
                RealY1: i.RealY1
            }, {
                RealX0: i.RealX0,
                RealY0: i.RealY0,
                RealX1: i.h.C.mx,
                RealY1: i.h.C.my + h
            }], u, e, o, s, c, l;
            for (i.type == "t" && f.push({
                RealX0: i.RealX1,
                RealY0: i.RealY1,
                RealX1: i.h.C.mx,
                RealY1: i.h.C.my + h
            }),
            l = f.length,
            u = 0; u < l; u++)
                if (n > Math.min(f[u].RealX0, f[u].RealX1) - 3 && n < Math.max(f[u].RealX0, f[u].RealX1) + 3 && (e = ps(f[u], n, t),
                o = n - e.x,
                s = t - e.y,
                c = Math.abs(Math.sqrt(o * o + s * s)),
                c < 5))
                    return !0;
            return !1
        }
        function iv(n, t, i, r) {
            var s = n.length, u;
            if (s <= t)
                return null;
            var c = 0, f = 0, e = 0, l = 0, a = 0, o;
            for (u = 1; u <= t; u++)
                o = gs(n[s - u], r),
                c += u * o,
                f += u,
                e += o,
                l += u * u,
                a += o * o;
            var h = (c * t - f * e) / (t * l - f * f)
              , v = (e - h * f) / t
              , y = v + h * t
              , p = v + h
              , w = Math.pow((t * a - e * e) / (t * (t - 1)), .5)
              , b = new wt(n[s - t].d,y,d.QuoteTab[nt.minX].d,0)
              , k = new wt(n[s - 1].d,p,d.QuoteTab[nt.minX].d,0);
            return {
                p0: b,
                p1: k,
                et: w,
                id: i
            }
        }
        var oi, ws, ui = ["click"], ki = {
            trades: []
        }, pt = p.callID, tt, vr;
        this.doc = n.gi(pt);
        tt = this;
        ("ontouchstart"in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0) && (ui = ["touchend", "click"]);
        p.symbol == null && (p.symbol = "PX1p");
        var bs = window.getComputedStyle(tt.doc)
          , cc = {
            widthGraph: parseInt(bs.width),
            heightGraph: parseInt(bs.height),
            paddingTop: 20,
            paddingLeft: 14,
            paddingBottom: 21,
            paddingRight: 49,
            histoLength: 365,
            chartPeriod: 0,
            padBarCandle: 0,
            searchConfig: "",
            mainChart: {
                type: "line",
                indicators: []
            },
            indicators: [],
            set: l(),
            cursor: "r",
            money: "€",
            installDir: "/abcchart/"
        }
          , w = e(cc, p);
        VGP.isMobile && (w.cursor = "b");
        vr = w.set.fontSize - 12;
        w.paddingBottom += vr;
        w.paddingTop += vr;
        w.paddingRight += vr * 4;
        w.paddingLeft += vr * 4;
        var k = [], nt = {
            maxY: 0,
            minY: 0,
            maxX: null,
            minX: 0
        }, d, ti = [], bt = {}, b = {}, g = {
            initViewBegin: 0,
            initViewEnd: 0,
            initMaxY: 0,
            initMinY: 0,
            lineNumber: 999,
            evtList: [],
            cursorState: !1,
            moveZoomX: 0,
            moveZoomY: 0,
            moveLayer: !1,
            activeLayer: null,
            dataSeason: null,
            flagSave: !1,
            fiEvt: [],
            tmp1: null,
            tmp2: null
        };
        this.testPerf = function(n) {
            for (var t = new Date; n--; )
                ft();
            return new Date - t
        }
        ;
        this.hideShowTrace = function() {
            w.hideTrace = w.hideTrace ? !1 : !0;
            wf();
            ft()
        }
        ;
        this.duree_menu = function(n, t) {
            if (n != "" && (n = parseInt(n),
            t = t != null ? parseInt(t) : w.chartPeriod,
            n != w.histoLength || t != w.chartPeriod)) {
                var i = {
                    chartPeriod: w.chartPeriod,
                    histoLength: w.histoLength
                };
                g.flagSave = !0;
                ii();
                t < 0 && n > 20 && (t = 0);
                t >= 0 && n <= 20 && (t = -1);
                w.chartPeriod = t;
                w.histoLength = n;
                ff(!0, i)
            }
        }
        ;
        this.period_menu = function(n, t) {
            (n = parseInt(n),
            n != w.chartPeriod) && (t = t != null ? parseInt(t) : w.histoLength,
            t != w.histoLength || n != w.chartPeriod) && (g.flagSave = !0,
            ii(),
            n < 0 && t > 20 && (t = 1),
            n >= 0 && t <= 20 && (t = 365),
            w.chartPeriod = n,
            w.histoLength = t,
            ff(!0))
        }
        ;
        this.settings_changeFont = function(n) {
            var t = n - w.set.fontSize;
            t != 0 && (w.paddingBottom += t,
            w.paddingTop += t,
            w.paddingRight += t * 4,
            w.paddingLeft += t * 4,
            w.set.fontSize = n,
            this.set_screenSize())
        }
        ;
        this.style_menu_template = function(n) {
            d != null && ds(n, function() {
                hh(n, !0)
            })
        }
        ;
        this.style_menu = function(n) {
            d != null && n != w.mainChart.type && ds(n, function() {
                hh(n)
            })
        }
        ;
        this.indic1_menu = function(n) {
            if (d != null && w.mainChart.type != "perf" && !w.mainChart.typedef.nolinearX && n != null) {
                var i, r = w.mainChart.indicators.length;
                if (n == "sar" || n == "ichimoku" || n == "pivots")
                    for (i = 0; i < r; i++)
                        if (w.mainChart.indicators[i].type == n)
                            return;
                if (n == "evt" || n == "actu")
                    for (i = 0; i < r; i++)
                        (w.mainChart.indicators[i].type == "evt" || w.mainChart.indicators[i].type == "actu") && be(i);
                if ((n == "pivots" || n == "VWAP") && w.chartPeriod >= 0) {
                    tr("Cet indicateur n'est disponible qu'en vision intraday");
                    return
                }
                (n == "evt" || n == "actu") && w.chartPeriod < 0 || (w.mainChart.indicators.push(t(n)),
                ac(n, function() {
                    lt(0)
                }))
            }
        }
        ;
        this.indics_menu = function(n) {
            if (d != null && !w.mainChart.typedef.nolinearX && n != null) {
                if (!w.isCompare && n == "fr") {
                    tr("La Force Relative ne peut être appliquée que quand 2 valeurs sont comparées");
                    return
                }
                if (k.length == 5 && !VGP.isPro) {
                    tr(lang.l_msg1, 1);
                    return
                }
                if (k.length == 7 && VGP.isPro) {
                    tr(lang.l_msg2, 2);
                    return
                }
                vc(n, function() {
                    bh(t(n))
                })
            }
        }
        ;
        this.BTlaunch = function(i, r) {
            var o, u, f, s, e;
            if (!(["season", "line break", "kagi", "renko", "equivolume", "point figure"].indexOf(k[0].Indicator) >= 0)) {
                if (o = RODBT.BTlaunched(i, r, w.chartPeriod, d),
                u = o.t,
                u == "syntaxerror") {
                    n.idst("bterror", "Erreur de syntaxe sur le code");
                    return
                }
                if (ki.params = o.s,
                u == null || u.length == 0)
                    ce(),
                    ft();
                else {
                    for (ki.trades = u,
                    sh(u),
                    s = 0,
                    e = k.length,
                    f = 1; f < e; f++)
                        k[f].Indicator.type == "equity" && (s = f);
                    s == 0 ? (e != 5 || VGP.isPro ? e == 7 && VGP.isPro && lr(k.length - 1) : lr(e - 1),
                    bh(t("equity"))) : ft()
                }
            }
        }
        ;
        this.loadDefautChart = function(i) {
            var r, f, u;
            for (n.idempty(pt),
            vi(),
            fe(w.symbol),
            i.indicators || (i.indicators = []),
            f = i.indicators.length,
            u = [],
            r = 0; r < f; r++)
                typeof i.indicators[r] == "object" ? u.push(e(t(i.indicators[r].type), i.indicators[r])) : u.push(t(i.indicators[r]));
            i.indicators = u;
            bf(i);
            kf(function() {
                uf(!1)
            })
        }
        ;
        this.loadTemplateJSON = function(t, i) {
            var r, e;
            n.idempty(pt);
            vi();
            g.fiEvt = [];
            r = JSON.parse(t);
            delete r.logData;
            nh(r);
            var o = [], u, f = JSON.parse(i), s = f.length;
            if (s > 1) {
                for (u = 1; u < s; u++)
                    o.push(f[u].Indicator);
                r.indicators = o
            } else
                r.indicators = [];
            for (w != null && w.symbol != null && (r.symbol = w.symbol),
            fe(r.symbol),
            bf(r, f),
            e = n.qsa(".indicname, .indicval"),
            u = 0; u < e.length; u++)
                e[u].removeAttribute("style");
            kf(function() {
                uf(!1)
            })
        }
        ;
        this.loadTemplate = function(t) {
            var i;
            g.flagSave = !0;
            ii();
            n.idempty(pt);
            vi();
            g.fiEvt = [];
            i = JSON.parse(t.Parametres);
            delete i.logData;
            nh(i);
            i.set = e(l(), i.set);
            var r, o = [], u, f = JSON.parse(t.Layers), s = f.length;
            if (s > 1) {
                for (u = 1; u < s; u++)
                    o.push(f[u].Indicator);
                i.indicators = o
            } else
                i.indicators = [];
            w != null && w.symbol != null && (i.symbol = w.symbol);
            fe(i.symbol);
            delete w.indicators;
            delete w.mainChart;
            bf(i, f);
            switch (w.mainChart.type) {
            case "heikin ashi":
                r = "heikin";
                break;
            case "line break":
                r = "linebreak";
                break;
            case "point figure":
                r = "pnf";
                break;
            default:
                r = w.mainChart.type
            }
            kf(function() {
                return uf(!1),
                w.hideTrace && wf(),
                r
            })
        }
        ;
        this.change_symbol = function(n, t) {
            ce();
            g.fiEvt = [];
            g.dataSeason = null;
            for (var i = 0; i < k.length; i++)
                k[i].lines = [];
            w.symbol = n;
            t && (w.money = t);
            uf(!0)
        }
        ;
        this.set_screenSize = function() {
            var i, r, t, u;
            if (g.flagSave = !0,
            ii(),
            tt.doc = n.gi(pt),
            i = window.getComputedStyle(tt.doc),
            w.widthGraph = parseInt(i.width),
            w.heightGraph = parseInt(i.height),
            w.innerWidth = w.widthGraph - w.paddingLeft - w.paddingRight,
            w.usableHeight = w.heightGraph - w.paddingTop - w.paddingBottom - w.indicators.length * w.marginInter,
            r = k.length,
            w.mainChart.typedef.nolinearX) {
                r > 1 && k.splice(0, 1);
                ye();
                return
            }
            for (t = 0; t < r; t++)
                k[t].Bars = t == 0 ? [] : {},
                delete k[t].canvas,
                delete k[t].ctx;
            (u = o(k),
            vi(!0),
            ir(u),
            di(w.symbol),
            d != null) && (ft(),
            VGP.chartSimple || (dt(),
            gr()),
            w.hideTrace && wf())
        }
        ;
        this.saveTemplate = function(n) {
            var t, r, f, u, i, e;
            if (d != null) {
                for (g.MemoryLayers != null && ke(),
                r = o(w),
                f = ["widthGraph", "heightGraph", "paddingTop", "paddingLeft", "paddingBottom", "paddingRight", "indicators", "usableHeight", "marginInter", "innerWidth", "symbol", "padBarCandle", "cursor", "logData", "hideTrace", "compare", "isIntraday", "callID", "money", "installDir"],
                t = 0; t < f.length; t++)
                    delete r[f[t]];
                for (delete r.mainChart.typedef.params,
                r = yc(r),
                t = 0; t < r.mainChart.indicators.length; t++)
                    delete r.mainChart.indicators[t].params,
                    delete r.mainChart.indicators[t].datas2;
                for (u = k.length,
                t = 0; t < u; t++)
                    k[t].Bars = t == 0 ? [] : {},
                    k[t].Indicator.type == "equity" && (lr(t),
                    u = u - 1);
                for (t = 0; t < u; t++)
                    delete k[t].canvas,
                    delete k[t].ctx;
                for (i = o(k),
                t = 0; t < i.length; t++)
                    delete i[t].Bars,
                    delete i[t].RealY,
                    delete i[t].PxPointX,
                    delete i[t].PxPointY,
                    delete i[t].V0,
                    delete i[t].id,
                    delete i[t].HeightPx,
                    delete i[t].Indicator.params,
                    delete i[t].lines;
                return e = o(k),
                w.mainChart.typedef.nolinearX && (i.splice(1),
                r.mainChart.indicators = [],
                e.splice(1)),
                vi(!0),
                ir(e),
                di(w.symbol),
                ft(),
                gr(),
                dt(),
                n == null ? {
                    l: JSON.stringify(i),
                    p: JSON.stringify(r)
                } : {
                    l: JSON.stringify(i),
                    p: JSON.stringify(r)
                }
            }
        }
        ;
        this.SynchronizeLines = function() {
            di(w.symbol);
            d && ot()
        }
        ;
        this.get_symbol = function() {
            return w.symbol
        }
        ;
        this.delete_chart = function() {
            n.idempty(pt);
            vi()
        }
        ;
        this.get_id = function() {
            return pt
        }
        ;
        this.get_name = function() {
            return d == null ? "" : d.Name
        }
        ;
        this.get_chartType = function() {
            return w.mainChart.type
        }
        ;
        this.get_parametres = function() {
            return w
        }
        ;
        this.settings_setdefaut = function() {
            d != null && (w.set = l(),
            w.paddingLeft = 10,
            w.paddingRight = 45,
            w.paddingTop = 20,
            w.paddingBottom = 20,
            this.set_screenSize())
        }
        ;
        this.settings_setAxis = function(t) {
            var i = (w.set.fontSize - 12) * 4;
            t == "left" ? (w.set.yaxis = !0,
            w.paddingLeft = 49 + i,
            w.paddingRight = 14 + i) : (w.set.yaxis = !1,
            w.paddingLeft = 14 + i,
            w.paddingRight = 49 + i);
            n.idcss(it("eod_mainchartinfos-"), "left", w.paddingLeft + 2 + "px");
            n.clcss("infoindic", "left", w.paddingLeft + 5 + "px");
            [].forEach.call(n.qsa(".traceCvs"), function(n) {
                n.style.left = w.paddingLeft + "px"
            });
            ft()
        }
        ;
        this.settings_setAxisLog = function(n) {
            n ? w.set.semilog = !0 : (w.set.semilog = !1,
            delete w.logData);
            ft()
        }
        ;
        this.settings_setSticky = function(n) {
            w.set.nosticky = n;
            ft()
        }
        ;
        this.settings_setHLSticky = function(n) {
            w.set.nohighlow = n;
            ft()
        }
        ;
        this.stop_events = function() {
            ei()
        }
        ;
        this.set_events = function() {
            dt()
        }
        ;
        this.settings_setNoVeilleIntra = function(n) {
            if (w.set.noVeilleIntra = n,
            w.histoLength <= 20) {
                if (nt.minX = 0,
                nt.maxX = d.QuoteTab.length - 1,
                nt.maxY = d.High,
                nt.minY = d.Low,
                !w.set.noVeilleIntra) {
                    var t = d.qv.c;
                    t > nt.maxY && (nt.maxY = t);
                    t < nt.minY && (nt.minY = t)
                }
                ft()
            }
        }
        ;
        this.settings_setVeilleStyle = function(n) {
            w.set.veilleStyle = n;
            ft()
        }
        ;
        this.settings_setVeilleColor = function(n) {
            w.set.veilleColor = n;
            ft()
        }
        ;
        this.settings_setTraceColor = function(n) {
            d != null && (w.set.traceColor = n)
        }
        ;
        this.settings_getTraceColor = function() {
            return pi()
        }
        ;
        this.settings_setGridlineShow = function(n) {
            w.set.gridLine = n;
            ft()
        }
        ;
        this.settings_setGridlineH = function(n) {
            w.set.gridH = n;
            ft()
        }
        ;
        this.settings_setGridlineV = function(n) {
            w.set.gridV = n;
            ft()
        }
        ;
        this.settings_setSplitdayStyle = function(n) {
            w.set.splitStyle = n;
            ft()
        }
        ;
        this.settings_setSplitdayColor = function(n) {
            w.set.splitColor = r(n, 1);
            ft()
        }
        ;
        this.settings_setGridColor = function(n) {
            d != null && (w.set.gridColor = n,
            ft())
        }
        ;
        this.settings_setCadreColor = function(n) {
            d != null && (w.set.cadreColor = n,
            ft())
        }
        ;
        this.settings_setReticuleColor = function(t) {
            if (d != null) {
                w.set.reticColor = t;
                var i = n.gi(it("overlay-")).getContext("2d");
                i.strokeStyle = w.set.reticColor
            }
        }
        ;
        this.settings_setIndicValues = function(t) {
            w.set.indicValues = t;
            t || n.qsaempty(it("#") + " .indicval")
        }
        ;
        this.settings_setQuotesValues = function(t) {
            w.set.quotesValues = t;
            t || n.qsaempty(".eod_coursval")
        }
        ;
        this.settings_setEncadreShow = function(n) {
            w.set.isEncadre = n;
            ft()
        }
        ;
        this.settings_setBackColor = function(t) {
            if (d != null) {
                w.set.bkcolor = t;
                n.idcss(it("rodgraph-"), "background-color", t);
                var r = [".closelayericon", ".paramlayericon", ".eodmoveup", ".eodmovedown", ".mci-p"], i, u = r.length;
                if (gi(t) < 130)
                    for (i = 0; i < u; i++)
                        n.qsaaclass(r[i], "filter1");
                else
                    for (i = 0; i < u; i++)
                        n.qsarclass(r[i], "filter1");
                ft()
            }
        }
        ;
        this.settings_setTextColor = function(t) {
            d != null && (n.clcss("indicname", "color", t),
            n.clcss("indicval", "color", t),
            n.idcss(it("eod_mainchartinfos-"), "color", t),
            n.idcss(it("eod_topinfo-"), "color", t),
            w.set.txtColor = t,
            ft())
        }
        ;
        this.updateQuoteEODrefresh = function(n) {
            var t = d.QuoteTab[d.QuoteTab.length - 1]
              , i = t.d;
            w.chartPeriod == 0 ? (t = n,
            t.d = i,
            d.QuoteTab[d.QuoteTab.length - 1] = t) : (n.h > t.h && (t.h = n.h),
            n.l < t.l && (t.l = n.l),
            t.c = n.c,
            t.v = n.v);
            ft()
        }
        ;
        this.updateQuoteIntraRefresh = function(n) {
            var f = d.QuoteTab.length - 1
              , e = d.QuoteTab[f].d
              , o = 0
              , i = n.qt;
            if (i == null)
                return !1;
            for (var r = nt.maxY, u = nt.minY, s = i.length, t = s - 1; t >= 0; t--)
                i[t].d >= e && (i[t].d == e ? d.QuoteTab[f] = i[t] : (d.QuoteTab.push(i[t]),
                o++),
                i[t].h > r && (r = i[t].h),
                i[t].l < u && (u = i[t].l),
                i[t].h > d.High && (d.High = i[t].h),
                i[t].l < d.Low && (d.Low = i[t].l));
            nt.maxY = r;
            nt.minY = u;
            nt.maxX = nt.maxX + o;
            ft()
        }
        ;
        this.stopGomme = function() {
            ic()
        }
        ;
        this.stopMZoom = function() {
            ks()
        }
        ;
        this.zoom = function(n) {
            g.flagSave = !0;
            ii();
            n ? gf(3) : ne(3)
        }
        ;
        this.order_level = function(n) {
            if (w.mainChart.type == "perf") {
                tr("Le passage d'ordre n'est pas disponible en mode 'performance'");
                return
            }
            ii();
            RodRequire([w.installDir + "RODORD.min.js"], function() {
                ei();
                RODORD.initOrder(n, tt.doc, ui, k[0], w, pt, nt, tt)
            })
        }
        ;
        this.tools_menu = function(n) {
            if (d != null)
                switch (n) {
                case "g":
                    ei();
                    ua();
                    break;
                case "r":
                    ei();
                    w.cursor = "r";
                    dt();
                    break;
                case "m":
                    ei();
                    w.cursor = "m";
                    dt();
                    break;
                case "z":
                    ei();
                    lc();
                    break;
                case "b":
                    ei();
                    w.cursor = "b";
                    dt();
                    break;
                case "t":
                    ei();
                    w.cursor = "t";
                    dt()
                }
        }
        ;
        this.addSearch = function(n) {
            d == null || w.mainChart.typedef.nolinearX || n == null || (w.searchConfig = n,
            g.flagSave = !0,
            ii(),
            RodRequire([w.installDir + "RODCDL4.min.js"], function() {
                ft()
            }))
        }
        ;
        this.removeSearch = function() {
            d != null && (w.searchConfig = "",
            ft())
        }
        ;
        this.closeToolsParams = function() {
            g.flagSave = !0;
            ii()
        }
        ;
        this.CloseTools = function(n) {
            n || (g.flagSave = !0);
            ii(!0)
        }
        ;
        this.saveTrace = function() {
            we()
        }
        ;
        this.saveTraceFull = function() {
            var t = we(!0)
              , n = this.saveTemplate();
            return {
                Traces: t,
                Parametres: n.p,
                Layers: n.l,
                Symbol: w.symbol
            }
        }
        ;
        this.readTraceFull = function(n) {
            n != null && (n.Symbol != null && (w.symbol = n.Symbol),
            n.Traces != null && (k[0].lines = JSON.parse(n.Traces),
            ct(w.symbol),
            VGP.drawings[w.symbol] = 1),
            this.loadTemplate(n))
        }
        ;
        this.readTrace = function() {
            ih(!1, !0, !1)
        }
        ;
        this.screenCapture = function(t) {
            var f, r, v, s, i, o, h, l, y, a, u, e, c;
            if (d != null) {
                if (g.flagSave = !0,
                ii(),
                f = document.createElement("canvas"),
                f.id = "canvasflatten",
                f.width = w.widthGraph,
                f.height = w.heightGraph,
                tt.doc.parentNode.insertBefore(f, tt.doc.nextSibling),
                r = f.getContext("2d"),
                r.fillStyle = w.set.bkcolor,
                r.fillRect(0, 0, f.width, f.height),
                r.font = "12px Arial",
                v = n.gi(it("rodgraph-")),
                r.drawImage(v, 0, 0),
                g.MemoryLayers == null && r.drawImage(k[0].canvas, 0, w.paddingTop),
                !w.mainChart.typedef.nolinearX)
                    for (w.mainChart.type != "perf" && (s = n.gi(it("trace-")),
                    g.MemoryLayers == null && r.drawImage(s, w.paddingLeft, w.paddingTop)),
                    i = 1; i < k.length; i++)
                        k[i].Height != 0 && (r.drawImage(k[i].canvas, 0, k[i].RealY),
                        s = n.gi(it("tindic-") + i),
                        r.drawImage(s, w.paddingLeft, k[i].RealY),
                        r.fillStyle = k[i].Indicator.color,
                        o = k[i].Indicator.type.toUpperCase(),
                        k[i].Indicator.param1 != null && (o += " (" + k[i].Indicator.param1,
                        k[i].Indicator.param2 != null && (o += ", " + k[i].Indicator.param2,
                        k[i].Indicator.param3 != null && (o += ", " + k[i].Indicator.param3)),
                        o += ")"),
                        r.fillText(o, w.paddingLeft + 5, k[i].RealY + 13));
                if (r.fillStyle = "#808080",
                t = t != null ? " - " + t : "",
                r.fillText(d.Name.toUpperCase() + t, w.paddingLeft, 13),
                h = "",
                l = document.querySelector("#" + pt + " .eod_topinfo span:last-child"),
                l != null && (h = l.textContent),
                y = r.measureText(h).width,
                r.fillText(h, w.widthGraph - w.paddingRight - y, 13),
                !w.mainChart.typedef.nolinearX)
                    for (a = w.paddingLeft + 5,
                    i = 0; i < w.mainChart.indicators.length; i++)
                        u = w.mainChart.indicators[i],
                        (u.type != "evt" || u.type != "actu") && (r.fillStyle = u.color,
                        e = "",
                        u.param1 != null && (e += " (" + u.param1,
                        u.param2 != null && (e += ", " + u.param2),
                        e += ")"),
                        u.type == "compare" ? u.datas2 && (e = u.datas2.Name) : e = u.type.toUpperCase() + e,
                        r.fillText(e, a, w.paddingTop + 12),
                        a += r.measureText(e).width + 15);
                return c = f.toDataURL("image/png"),
                c = c.replace("data:image/png;base64,", ""),
                n.idrem("canvasflatten"),
                c
            }
        }
        ;
        this.daysToDate = function(n, t) {
            return w.histoLength <= 20 ? s(n) : f(n, t)
        }
        ;
        this.BTdelete = function() {
            ce()
        }
        ;
        this.BTgetTrades = function() {
            return ki.trades
        }
        ;
        this.BTgetParams = function() {
            return ki.params
        }
        ;
        this.trace_menu = function(n) {
            if (d != null && !w.mainChart.typedef.nolinearX) {
                ei();
                switch (n) {
                case "ewi":
                    fo(n, 6);
                    break;
                case "ewc":
                    fo(n, 4);
                    break;
                case "t":
                case "wf":
                    fo(n, 3);
                    break;
                case "a":
                    ea();
                    break;
                case "fa":
                    ra();
                    break;
                case "arrup":
                case "arrdw":
                case "arrrt":
                case "arrlt":
                case "sm1":
                case "sm2":
                case "sm3":
                    fa(n);
                    break;
                case "p":
                    pa();
                    break;
                case "rf":
                case "r":
                case "m":
                    ca(n);
                    break;
                case "e":
                    for (var t = 0; t < k.length; t++)
                        k[t].lines = [];
                    h() && (w.chartPeriod < 0 ? sessionStorage.removeItem(w.symbol) : (localStorage.removeItem(w.symbol),
                    (VGP.isPro || !VGP.noAutoSaveTrace) && (le(),
                    delete VGP.drawings[w.symbol])),
                    sessionStorage.removeItem(it("indic_" + w.symbol)));
                    ot();
                    dt();
                    VGP.isPro && SynchronizeDrawings(pt, w.symbol);
                    break;
                default:
                    ba(n)
                }
            }
        }
        ;
        this.compare = function(i) {
            var f, e, u, o, r;
            if (d != null && !w.mainChart.typedef.nolinearX && w.mainChart.type != "perf") {
                for (e = w.mainChart.indicators.length,
                u = 0,
                f = 0; f < e; f++)
                    w.mainChart.indicators[f].type == "compare" && (u++,
                    o = f);
                if (VGP.nbCompare) {
                    if (u >= VGP.nbCompare) {
                        DisplayAlert("Vous avez atteint le maximum de valeurs en comparaison");
                        return
                    }
                } else
                    u >= 1 && (be(o),
                    u = 0);
                r = new XMLHttpRequest;
                r.open("GET", VGP.urlWS + "GetTicksEOD?symbol=" + i + "&length=" + w.histoLength + "&period=" + w.chartPeriod + "&guid=" + n.gigt("guid"), !0);
                r.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                r.onload = function() {
                    var f, n;
                    if (r.status >= 200 && r.status < 400)
                        if (f = JSON.parse(r.responseText),
                        f != null && f != "") {
                            n = t("compare");
                            switch (u) {
                            case 1:
                                n.color = "rgba(0,128,0,1)";
                                break;
                            case 2:
                                n.color = "rgba(0,95,192,1)";
                                break;
                            case 3:
                                n.color = "rgba(127,0,255,1)"
                            }
                            n.datas2 = f;
                            n.symbol = i;
                            w.mainChart.indicators.push(n);
                            w.isCompare = !0;
                            ef(d.High, d.Low, d.QuoteTab[0].c);
                            lt(0)
                        } else
                            return
                }
                ;
                r.send()
            }
        }
        ;
        yi.prototype.Create = function() {
            this.canvas = document.createElement("canvas");
            this.canvas.width = w.widthGraph;
            this.canvas.height = this.HeightPx;
            this.canvas.style.top = this.RealY + "px";
            this.canvas.id = this.id;
            this.lines = [];
            tt.doc.appendChild(this.canvas);
            this.ctx = this.canvas.getContext("2d");
            k.push(this)
        }
        ;
        yi.prototype.Resize = function(n, t, i) {
            this.Y = n;
            this.RealY = Math.round(n * w.usableHeight) + w.paddingTop + i;
            this.Height = t;
            this.HeightPx = Math.round(t * w.usableHeight);
            this.canvas.style.top = this.RealY + "px";
            this.canvas.height = this.HeightPx
        }
        ;
        yi.prototype.Move = function(n, t, i) {
            this.RealY = n;
            this.HeightPx = this.HeightPx + t;
            this.Y = (this.RealY - w.paddingTop - w.marginInter * i) / w.usableHeight;
            this.Height = this.HeightPx / w.usableHeight;
            this.canvas.style.top = this.RealY + "px";
            this.canvas.height = this.HeightPx
        }
        ;
        yi.prototype.DrawEncadre = function() {
            this.ctx.clearRect(0, 0, w.widthGraph, this.HeightPx);
            w.set.isEncadre && (this.ctx.strokeStyle = w.set.cadreColor,
            this.ctx.strokeRect(w.paddingLeft + .5, .5, w.innerWidth, this.HeightPx - 1))
        }
    };
    window.RODGraph = p
}();
mydragg = function() {
    return {
        move: function(n, t, i) {
            n.style.left = t + "px";
            n.style.top = i + "px"
        },
        startMoving: function(n, t, i) {
            var h, c;
            if (i.target.className != "linemodif")
                return !1;
            i = i || window.event;
            var l = i.clientX
              , a = i.clientY
              , r = n.style.top
              , u = n.style.left
              , f = n.clientWidth
              , e = n.clientHeight
              , o = document.getElementById(t).clientWidth
              , s = document.getElementById(t).clientHeight;
            r = r.replace("px", "");
            u = u.replace("px", "");
            h = l - u;
            c = a - r;
            document.onmousemove = function(t) {
                t = t || window.event;
                var u = t.clientX
                  , l = t.clientY
                  , i = u - h
                  , r = l - c;
                i < 10 && (i = 10);
                r < 18 && (r = 18);
                i + f > o - 6 && (i = o - f - 6);
                r + e > s + 12 && (r = s - e + 12);
                mydragg.move(n, i, r)
            }
        },
        stopMoving: function() {
            document.onmousemove = function() {}
        }
    }
}();
RODTA = function() {
    var n = {};
    return n.computeMovingAverage = function(n, t, i) {
        for (var f = [], e = n.length, u = 0, r = 0; r < e; r++)
            r < t ? (u = u + gs(n[r], i),
            f[r] = {
                d: n[r].d,
                v1: u / (r + 1)
            }) : (u = u + gs(n[r], i) - gs(n[r - t], i),
            f[r] = {
                d: n[r].d,
                v1: u / t
            });
        return {
            Values: f
        }
    }
    ,
    n.upPrime = function(t) {
        if ((t % 1 == 0 ? t++ : t = Math.ceil(t),
        t < 2) || t == 2)
            return 2;
        t % 2 == 0 && (t = t + 1);
        for (var i = 0; i < 115; i = i + 2)
            if (n.isItPremier(t + i))
                return t + i;
        return t
    }
    ,
    n.downPrime = function(t) {
        if ((t % 1 == 0 ? t-- : t = Math.floor(t),
        t < 2) || t == 2)
            return 2;
        t % 2 == 0 && (t = t - 1);
        for (var i = 0; i < 115; i = i + 2)
            if (n.isItPremier(t - i))
                return t - i;
        return t
    }
    ,
    n.isItPremier = function(n) {
        if (n < 2)
            return !1;
        if (n == 2)
            return !0;
        for (var i = Math.ceil(Math.sqrt(n)), t = 3; t < i; ) {
            if (n % t == 0)
                return !1;
            t = t + 2
        }
        return !0
    }
    ,
    n.computeFR = function(n, t) {
        for (var h = [], c = n.length, l = t.length, r = 0, u = -100, e, o = 0, s = 999999, f = [], i = 0; i < l; i++)
            f[t[i].d] = t[i];
        for (i = 0; i < c; i++)
            f[n[i].d] != null && (u == -100 ? (u = n[i].c,
            e = f[n[i].d].c) : (r = ((n[i].c - u) / u - (f[n[i].d].c - e) / e) * 100,
            r > o && (o = r),
            r < s && (s = r))),
            h[i] = {
                d: n[i].d,
                v1: r
            };
        return {
            High: o,
            Low: s,
            Values: h
        }
    }
    ,
    n.computeVolume = function(n, t, i) {
        var o = [], f = 0, e = 9999999999999, s = n.length, r, u;
        for (u = i ? n[0].v * n[0].c : n[0].v,
        o[0] = {
            d: n[0].d,
            v1: u
        },
        t.minX <= 0 && (u > f && (f = u),
        u < e && (e = u)),
        r = 1; r < s; r++)
            u = i ? n[r].v * n[r].c : n[r].v,
            o[r] = n[r].c - n[r - 1].c >= 0 ? {
                d: n[r].d,
                v1: u
            } : {
                d: n[r].d,
                v2: u
            },
            r >= t.minX && r <= t.maxX && (u > f && (f = u),
            u < e && (e = u));
        return {
            High: f,
            Low: e,
            Values: o
        }
    }
    ,
    n.computeDoubleEMA = function(t, i, r) {
        var u = n.computeMovingAverageE(t, i, r), o = [], h = u.Values.length, f, e, s;
        for (o[0] = {
            d: u.Values[0].d,
            v1: u.Values[0].v1
        },
        e = u.Values[0].v1,
        s = 2 / (i + 1),
        f = 1; f < h; f++)
            e = u.Values[f].v1 * s + e * (1 - s),
            o[f] = {
                d: u.Values[f].d,
                v1: 2 * u.Values[f].v1 - e
            };
        return {
            Values: o
        }
    }
    ,
    n.computeTripleEMA = function(t, i, r) {
        var u = n.computeMovingAverageE(t, i, r), s = [], c = u.Values.length, f;
        s[0] = {
            d: u.Values[0].d,
            v1: u.Values[0].v1
        };
        var e = u.Values[0].v1
          , h = u.Values[0].v1
          , o = 2 / (i + 1);
        for (f = 1; f < c; f++)
            e = u.Values[f].v1 * o + e * (1 - o),
            h = e * o + h * (1 - o),
            s[f] = {
                d: u.Values[f].d,
                v1: 3 * u.Values[f].v1 - 3 * e + h
            };
        return {
            Values: s
        }
    }
    ,
    n.computeBollinger = function(t, i, r, u) {
        for (var w = [], l = t.length, b = n.computeMovingAverage(t, i, u), a = [], e, h, s = 0, c, o, v, y, k, p, f = 0; f < l; f++)
            e = gs(t[f], u),
            f < i ? (s = s + e * e,
            a[f] = s * i / (f + 1)) : (h = gs(t[f - i], u),
            s = s + e * e - h * h,
            a[f] = s);
        for (c = [],
        o = 0,
        f = 0; f < l; f++)
            e = gs(t[f], u),
            f < i ? (o = o + e,
            v = o * i / (f + 1),
            c[f] = v * v) : (h = gs(t[f - i], u),
            o = o + e - h,
            c[f] = o * o);
        for (k = i * (i - 1),
        f = 0; f < l; f++)
            p = i * a[f] - c[f],
            y = p < 0 ? 0 : Math.pow(p / k, .5) * r,
            w[f] = {
                d: t[f].d,
                v1: b.Values[f].v1 + y,
                v2: b.Values[f].v1 - y
            };
        return {
            Values: w
        }
    }
    ,
    n.computeLinearCurve = function(n, t, i, r) {
        var e = [], p = n.length, u, f, h, c, o, a, v, l;
        if (p <= t)
            return null;
        if (i == 1)
            for (u = 0; u <= t; u++)
                e[u] = {
                    d: n[u].d,
                    v1: gs(n[u], r)
                };
        else
            for (u = 0; u <= t; u++)
                e[u] = {
                    d: n[u].d,
                    v1: 0
                };
        for (h = -100,
        c = 100,
        u = p - 1; u > t; u--) {
            var w = 0
              , s = 0
              , y = 0
              , b = 0;
            for (f = t; f >= 1; f--)
                a = gs(n[u - (t - f)], r),
                w += f * a,
                s += f,
                y += a,
                b += f * f;
            l = (w * t - s * y) / (t * b - s * s);
            v = (y - l * s) / t;
            i == 1 ? e[u] = {
                d: n[u].d,
                v1: v + l * t
            } : (o = gs(n[u], r) - (v + l * t),
            o > h && (h = o),
            o < c && (c = o),
            e[u] = {
                d: n[u].d,
                v1: o
            })
        }
        return i == 1 ? {
            Values: e
        } : {
            High: h,
            Low: c,
            Values: e
        }
    }
    ,
    n.computeCCI = function(n, t) {
        for (var y = [], h = n.length, p = 0, w = 0, u = [], o = 0, l, a, e, r, c, v, f, b, i = 0; i < h; i++)
            u[i] = (n[i].h + n[i].l + n[i].c) / 3;
        for (l = [],
        i = 0; i < h; i++)
            i < t ? (o = o + u[i],
            l[i] = o / (i + 1)) : (o = o + u[i] - u[i - t],
            l[i] = o / t);
        for (a = [],
        e = 0,
        i = 0; i < h; i++)
            r = u[i],
            i < t ? (e = e + r * r,
            a[i] = e * t / (i + 1)) : (c = u[i - t],
            e = e + r * r - c * c,
            a[i] = e);
        for (v = [],
        f = 0,
        i = 0; i < h; i++)
            r = u[i],
            i < t ? (f = f + r,
            b = f * t / (i + 1),
            v[i] = b * b) : (c = u[i - t],
            f = f + r - c,
            v[i] = f * f);
        var k = []
          , s = 0
          , d = t * (t - 1);
        for (y[0] = {
            d: n[0].d,
            v1: 0
        },
        i = 1; i < h; i++)
            r = t * a[i] - v[i],
            k[i] = r < 0 ? 0 : Math.pow(r / d, .5),
            s = (u[i] - l[i]) / (.015 * k[i]),
            y[i] = {
                d: n[i].d,
                v1: s
            },
            s > p && (p = s),
            s < w && (w = s);
        return {
            High: p,
            Low: w,
            Values: y
        }
    }
    ,
    n.computeMM = function(n, t) {
        for (var u = n.length, r = 0, i = 0; i < u; i++)
            i < t ? (r = r + n[i].v1,
            n[i].vm = r / (i + 1)) : (r = r + n[i].v1 - n[i - t].v1,
            n[i].vm = r / t);
        return n
    }
    ,
    n.computeMMonVolume = function(n, t) {
        for (var e = n.length, r = 0, u, f, i = 0; i < e; i++)
            i < t ? (r = r + (n[i].v1 || n[i].v2),
            n[i].vm = r / (i + 1)) : (u = n[i].v1 != null ? n[i].v1 : n[i].v2,
            f = n[i - t].v1 != null ? n[i - t].v1 : n[i - t].v2,
            r = r + u - f,
            n[i].vm = r / t);
        return n
    }
    ,
    n.computeMovingAverageP = function(n, t, i) {
        var e = [], h = n.length, r, u, f, s, o;
        for (e[0] = {
            d: n[0].d,
            v1: gs(n[0], i)
        },
        r = 1; r < h; r++) {
            for (f = 0,
            u = 0; u < t; u++) {
                if (r - u < 0)
                    break;
                o = gs(n[r - u], i);
                f = r < t ? f + (r - u + 1) * o : f + (t - u) * o
            }
            s = (u + 1) * u * .5;
            e[r] = {
                d: n[r].d,
                v1: f / s
            }
        }
        return {
            Values: e
        }
    }
    ,
    n.computeMovingAverageE = function(n, t, i) {
        var u = [], o = n.length, r;
        u[0] = {
            d: n[0].d,
            v1: gs(n[0], i)
        };
        var f = gs(n[0], i)
          , e = 2 / (t + 1)
          , s = 1 - e;
        for (r = 1; r < o; r++)
            f = gs(n[r], i) * e + f * s,
            u[r] = {
                d: n[r].d,
                v1: f
            };
        return {
            Values: u
        }
    }
    ,
    n.computeRSI = function(n, t, i) {
        var c;
        if (t < 2)
            return null;
        var s = [], l = n.length, u, r, f = [], e = [], h, o;
        for (f[0] = {
            h: 0,
            b: 0
        },
        e[0] = {
            mmh: 0,
            mmb: 0
        },
        s[0] = {
            d: n[0].d,
            v1: 50
        },
        c = t - 1,
        r = 1; r < l; r++)
            u = gs(n[r], i) - gs(n[r - 1], i),
            f[r] = u == 0 ? {
                h: 0,
                b: 0
            } : u > 0 ? {
                h: u,
                b: 0
            } : {
                h: 0,
                b: u * -1
            },
            h = (e[r - 1].mmh * c + f[r].h) / t,
            o = (e[r - 1].mmb * c + f[r].b) / t,
            e[r] = {
                mmh: h,
                mmb: o
            },
            s[r] = o == 0 ? {
                d: n[r].d,
                v1: 100
            } : {
                d: n[r].d,
                v1: 100 - 100 / (1 + h / o)
            };
        return {
            High: 100,
            Low: 0,
            Values: s
        }
    }
    ,
    n.computeATR = function(n, t, i) {
        var h = [], f = 0, e = 9999, c = n.length, a = 0, v = 0, y = 0, o = [], u, s, r, l;
        if (c < t + 1)
            return null;
        for (o[0] = n[0].h - n[0].l,
        h[0] = {
            d: n[0].d,
            v1: o[0]
        },
        u = 1; u < c; u++)
            a = n[u].h - n[u].l,
            v = Math.abs(n[u - 1].c - n[u].h),
            y = Math.abs(n[u - 1].c - n[u].l),
            o[u] = Math.max(a, v, y);
        if (r = 0,
        i == "ema")
            for (r = o[0],
            l = 2 / (t + 1),
            u = 1; u < c; u++)
                r = o[u] * l + r * (1 - l),
                r > f && (f = r),
                r < e && (e = r),
                h[u] = {
                    d: n[u].d,
                    v1: r
                };
        if (i == "pma")
            for (r = o[0],
            u = 1; u < c; u++)
                r = (r * (t - 1) + o[u]) / t,
                r > f && (f = r),
                r < e && (e = r),
                h[u] = {
                    d: n[u].d,
                    v1: r
                };
        if (i == "sma") {
            for (u = 1; u < t; u++) {
                for (s = 0; s <= u; s++)
                    r = r + o[s];
                r = r / s;
                r > f && (f = r);
                r < e && (e = r);
                h[u] = {
                    d: n[u].d,
                    v1: r
                };
                r = 0
            }
            for (u = t; u < c; u++) {
                for (s = 0; s < t; s++)
                    r = r + o[u - s];
                r = r / t;
                h[u] = {
                    d: n[u].d,
                    v1: r
                };
                r > f && (f = r);
                r < e && (e = r);
                r = 0
            }
        }
        return {
            High: f,
            Low: e,
            Values: h
        }
    }
    ,
    n.computeMomentum = function(n, t, i) {
        var o = [], f = 0, e = 999999, s = n.length, r, u, h;
        if (s < t + 1)
            return null;
        for (h = gs(n[0], i),
        r = 0; r < t; r++)
            u = gs(n[r], i) - h,
            o[r] = {
                d: n[r].d,
                v1: u
            },
            u > f && (f = u),
            u < e && (e = u);
        for (r = t; r < s; r++)
            u = gs(n[r], i) - gs(n[r - t], i),
            o[r] = {
                d: n[r].d,
                v1: u
            },
            u > f && (f = u),
            u < e && (e = u);
        return {
            High: f,
            Low: e,
            Values: o
        }
    }
    ,
    n.computeMACD = function(n, t, i, r, u, f) {
        var p = [], l = 0, a = 999999, s = n.length, e, v = [], y = [], o, h;
        if (t >= s || i > s || r > s)
            return null;
        v[0] = gs(n[0], f);
        y[0] = gs(n[0], f);
        o = [];
        h = [];
        o[0] = 0;
        h[0] = 0;
        var b = 2 / (t + 1), k = 2 / (i + 1), d = 2 / (r + 1), w, c;
        for (e = 1; e < s; e++)
            w = gs(n[e], f),
            v[e] = w * b + v[e - 1] * (1 - b),
            y[e] = w * k + y[e - 1] * (1 - k),
            o[e] = v[e] - y[e],
            h[e] = o[e] * d + h[e - 1] * (1 - d);
        if (u == "macd")
            for (e = 0; e < s; e++)
                p[e] = {
                    d: n[e].d,
                    v1: o[e],
                    v2: h[e]
                },
                o[e] > l && (l = o[e]),
                o[e] < a && (a = o[e]);
        else
            for (e = 0; e < s; e++)
                c = o[e] - h[e],
                p[e] = {
                    d: n[e].d,
                    v1: c
                },
                c > l && (l = c),
                c < a && (a = c);
        return {
            High: l,
            Low: a,
            Values: p
        }
    }
    ,
    n.computeROC = function(n, t, i, r) {
        var e = [], o = 0, s = 999999, f = 0, u, l = n.length, h, c = gs(n[0], i);
        if (r)
            for (e[0] = {
                d: n[0].d,
                v1: 100
            },
            u = 1; u < l; u++)
                f = u - t < 0 ? gs(n[u], i) * 100 / c : gs(n[u], i) * 100 / gs(n[u - t], i),
                f > o && (o = f),
                f < s && (s = f),
                e[u] = {
                    d: n[u].d,
                    v1: f
                };
        else
            for (e[0] = {
                d: n[0].d,
                v1: 0
            },
            u = 1; u < l; u++)
                u - t < 0 ? f = (gs(n[u], i) - c) * 100 / c : (h = gs(n[u - t], i),
                f = (gs(n[u], i) - h) * 100 / h),
                f > o && (o = f),
                f < s && (s = f),
                e[u] = {
                    d: n[u].d,
                    v1: f
                };
        return {
            High: o,
            Low: s,
            Values: e
        }
    }
    ,
    n.computeSTOCH = function(n, t, i, r) {
        var p = [], l = n.length, v = -1e4, y = 9999, h, c;
        if (l < t + 1)
            return null;
        var a = [], e = n[0].l, o = n[0].h, u, f, s = o - e;
        for (a[0] = s != 0 ? (n[0].c - e) * 100 / s : 0,
        u = 1; u < t; u++) {
            for (f = 0; f <= u; f++)
                n[f].h > o && (o = n[f].h),
                n[f].l < e && (e = n[f].l);
            s = o - e;
            a[u] = s == 0 ? 0 : (n[u].c - e) * 100 / s;
            o = -1e5;
            e = 999999
        }
        for (u = t; u < l; u++) {
            for (f = 0; f < t; f++)
                n[u - f].h > o && (o = n[u - f].h),
                n[u - f].l < e && (e = n[u - f].l);
            s = o - e;
            a[u] = s == 0 ? 0 : (n[u].c - e) * 100 / s;
            o = -1e5;
            e = 999999
        }
        for (h = [],
        u = 0; u < l; u++) {
            for (c = 0,
            f = 0; f < i; f++) {
                if (u - f < 0)
                    break;
                c = c + a[u - f]
            }
            h[u] = c / f;
            h[u] > v && (v = h[u]);
            h[u] < y && (y = h[u])
        }
        for (r == null && (r = 3),
        u = 0; u < l; u++) {
            for (c = 0,
            f = 0; f < r; f++) {
                if (u - f < 0)
                    break;
                c = c + h[u - f]
            }
            p[u] = {
                d: n[u].d,
                v1: h[u],
                v2: c / f
            }
        }
        return {
            High: v,
            Low: y,
            Values: p
        }
    }
    ,
    n.computePERFORMANCE = function(n, t) {
        var r = {
            QuoteTab: n.QuoteTab
        }
          , e = []
          , o = 0
          , s = 9999999;
        e[0] = t ? {
            d: r.QuoteTab[0].d,
            v1: 0
        } : {
            d: r.QuoteTab[0].d,
            c: 0
        };
        for (var i = 0, c = r.QuoteTab.length, h = r.QuoteTab[0].c, f, u = 1; u < c; u++)
            f = r.QuoteTab[u],
            f != null && (i = (f.c - h) * 100 / h,
            e[u] = t ? {
                d: f.d,
                v1: i
            } : {
                d: f.d,
                c: i
            },
            i > o && (o = i),
            i < s && (s = i));
        return t ? {
            High: o,
            Low: s,
            Values: e
        } : {
            Name: n.Name,
            High: o,
            Low: s,
            QuoteTab: e
        }
    }
    ,
    n
}(),
function() {
    var n = function(n) {
        if (this.wrapperEl = "#color1",
        this.value = "#ffffff",
        this.onChange = function() {}
        ,
        this.colors = ["ffaaaa", "ff5656", "ff0000", "bf0000", "7f0000", "ffffff", "ffd4aa", "ffaa56", "ff7f00", "bf5f00", "7f3f00", "e5e5e5", "ffffaa", "ffff56", "ffff00", "bfbf00", "7f7f00", "cccccc", "aaffaa", "56ff56", "00ff00", "00bf00", "008000", "999999", "aaffff", "56ffff", "00ffff", "00bfbf", "007f7f", "666666", "aad4ff", "56aaff", "007fff", "005fbf", "003f7f", "4c4c4c", "aaaaff", "5656ff", "0000ff", "0000bf", "00007f", "333333", "d4aaff", "aa56ff", "7f00ff", "5f00bf", "3f007f", "191919", "ffaaff", "ff56ff", "ff00ff", "bf00bf", "7f007f", "000000"],
        n)
            for (var t in n)
                this[t] = n[t];
        this.init()
    };
    n.prototype = {
        init: function() {
            function i(i) {
                var r, u, f, o, e;
                if (i.stopPropagation(),
                r = document.querySelector(".palette"),
                r != null) {
                    if (i.target.className == "palettein") {
                        u = window.getComputedStyle(i.target).backgroundColor;
                        n.wrapper.style.backgroundColor = u;
                        n.input.setAttribute("value", u);
                        n.onChange(RODTL.rgb2hex(u))
                    }
                    r.parentNode.removeChild(r);
                    document.removeEventListener("mousedown", t);
                    return
                }
                for (r = document.createElement("div"),
                r.setAttribute("class", "palette"),
                o = n.colors.length,
                e = "",
                f = 0; f < o; f++)
                    e = e + '<div class="palettein" style="background-color:#' + n.colors[f] + '" ><\/div>';
                r.innerHTML = e;
                n.wrapper.appendChild(r);
                document.addEventListener("mousedown", t)
            }
            function t() {
                var n = document.querySelector(".palette");
                n != null && (n.parentNode.removeChild(n),
                document.removeEventListener("mousedown", t))
            }
            var n = this;
            this.input = document.querySelector(this.wrapperEl);
            this.input.style.display = "none";
            this.wrapper = document.createElement("div");
            this.wrapper.setAttribute("class", "colorPicker-picker");
            this.wrapper.style.backgroundColor = n.value;
            this.input.parentNode.insertBefore(this.wrapper, this.input.nextSibling);
            this.wrapper.addEventListener("mousedown", i)
        },
        change: function(n) {
            var t = this;
            t.wrapper.style.backgroundColor = n;
            t.input.setAttribute("value", n)
        }
    };
    window.ColorPicker = n
}(),
function() {
    var n = function(n) {
        if (this.wrapperEl = "#slidercontainer",
        this.value = 0,
        this.onSlide = function() {}
        ,
        this.isMove = !1,
        n)
            for (var t in n)
                this[t] = n[t];
        this.init()
    };
    n.prototype = {
        init: function() {
            function h(t) {
                t.preventDefault();
                n.isMove = !0;
                ["touchmove", "mousemove"].forEach(function(n) {
                    document.addEventListener(n, o)
                });
                ["touchend", "mouseup"].forEach(function(n) {
                    document.addEventListener(n, s)
                })
            }
            function o(r) {
                var e, o, f;
                if (r.preventDefault(),
                n.isMove) {
                    var s = RODTL.offset(n.wrapper)
                      , h = RODTL.pointerEventToXY(r)
                      , u = parseInt(h.x - s.left) - 20;
                    u < 0 && (u = 0);
                    u > n.width - 20 && (u = n.width - 20);
                    i.style.left = u + "px";
                    t.style.width = u + 5 + "px";
                    e = u / (n.width - 20);
                    e < 0 && (e = 0);
                    o = n.max - n.min;
                    f = n.min + o * e;
                    f = n.increment == 1 ? Math.round(f) : Math.round(f / n.increment) * n.increment;
                    n.onSlide(f)
                }
            }
            function s(t) {
                t.preventDefault();
                ["touchmove", "mousemove"].forEach(function(n) {
                    document.removeEventListener(n, o)
                });
                ["touchend", "mouseup"].forEach(function(n) {
                    document.removeEventListener(n, s)
                });
                n.isMove = !1
            }
            var n = this, u, t, i, e, f, r;
            this.wrapper = document.querySelector(this.wrapperEl);
            u = document.createElement("div");
            u.setAttribute("class", "sliderbar");
            t = document.createElement("div");
            t.setAttribute("class", "sliderin");
            this.divIn = t;
            u.appendChild(t);
            i = document.createElement("div");
            i.setAttribute("class", "sliderpointer");
            this.divCursor = i;
            this.wrapper.appendChild(u);
            this.wrapper.appendChild(i);
            e = window.getComputedStyle(this.wrapper.parentNode).width;
            this.width = e.replace("px", "");
            this.min = parseFloat(this.wrapper.getAttribute("min"));
            this.max = parseFloat(this.wrapper.getAttribute("max"));
            this.increment = parseFloat(this.wrapper.getAttribute("step"));
            f = this.wrapper.getAttribute("value");
            f && (this.value = parseFloat(f));
            r = (n.value - this.min) / (this.max - this.min) * (this.width - 20);
            r < 0 && (r = 0);
            this.divCursor.style.left = r + "px";
            this.divIn.style.width = r + 5 + "px";
            ["touchstart", "mousedown"].forEach(function(t) {
                n.divCursor.addEventListener(t, h)
            })
        },
        set: function(n) {
            var t = this
              , i = (n - t.min) / (t.max - t.min) * (t.width - 20);
            i < 0 && (i = 0);
            t.divCursor.style.left = i + "px";
            t.divIn.style.width = i + 5 + "px"
        }
    };
    window.Slider = n
}();
